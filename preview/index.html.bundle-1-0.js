montageDefine("478e387","ui/code-mirror.reel/codemirror/codemirror-min",{dependencies:[],factory:function(e,t){var n=t.CodeMirror=function(){function e(a,c){function v(e){return e>=0&&$n.size>e}function y(e){return d($n,e)}function E(e,t){li=!0;for(var n=t-e.height,i=e;i;i=i.parent)i.height+=n}function S(e){var t={line:0,ch:0};ot(t,{line:$n.size-1,ch:y($n.size-1).text.length},K(e),t,t),ni=!0}function R(){var e=[];return $n.iter(0,$n.size,function(t){e.push(t.text)}),e.join("\n")}function N(e){function t(e){var n=gn(e,!0);if(n&&!z(n,o)){Xn||rt(),o=n,kt(i,n),ni=!1;var r=xt();(n.line>=r.to||n.line<r.from)&&(a=setTimeout(Sn(function(){t(e)}),150))}}zt(e.shiftKey);for(var n=w(e);n!=Dn;n=n.parentNode)if(n.parentNode==Bn&&n!=In)return;for(var n=w(e);n!=Dn;n=n.parentNode)if(n.parentNode==Nn)return Tn.onGutterClick&&Tn.onGutterClick(wi,j(Nn.childNodes,n)+mi,e),_(e);var i=gn(e);switch(L(e)){case 3:return H&&!I&&vn(e),void 0;case 2:return i&&At(i.line,i.ch,!0),void 0}if(!i)return w(e)==jn&&_(e),void 0;Xn||rt();var r=+new Date;if(ei&&ei.time>r-400&&z(ei.pos,i))return _(e),setTimeout(yt,20),Wt(i.line);if(Qn&&Qn.time>r-400&&z(Qn.pos,i))return ei={time:r,pos:i},_(e),qt(i);Qn={time:r,pos:i};var a,o=i;if(V&&!z(di.from,di.to)&&!k(i,di.from)&&!k(di.to,i)){Y&&(Fn.draggable=!0);var s=x(kn,"mouseup",Sn(function(t){Y&&(Fn.draggable=!1),ti=!1,s(),10>Math.abs(e.clientX-t.clientX)+Math.abs(e.clientY-t.clientY)&&(_(t),At(i.line,i.ch,!0),yt())}),!0);return ti=!0,void 0}_(e),At(i.line,i.ch,!0);var l=x(kn,"mousemove",Sn(function(e){clearTimeout(a),_(e),t(e)}),!0),s=x(kn,"mouseup",Sn(function(e){clearTimeout(a);var t=gn(e);t&&kt(i,t),_(e),yt(),ni=!0,l(),s()}),!0)}function G(e){for(var t=w(e);t!=Dn;t=t.parentNode)if(t.parentNode==Nn)return _(e);var n=gn(e);n&&(ei={time:+new Date,pos:n},_(e),qt(n))}function J(e){function t(e,t){var i=new FileReader;i.onload=function(){a[t]=i.result,++o==r&&(n=Bt(n),Sn(function(){var e=ht(a.join(""),n,n);kt(n,e)})())},i.readAsText(e)}e.preventDefault();var n=gn(e,!0),i=e.dataTransfer.files;if(n&&!Tn.readOnly)if(i&&i.length&&window.FileReader&&window.File)for(var r=i.length,a=Array(r),o=0,s=0;r>s;++s)t(i[s],s);else try{var a=e.dataTransfer.getData("Text");if(a){var l=ht(a,n,n),c=di.from,u=di.to;kt(n,l),ti&&ht("",c,u),yt()}}catch(e){}}function Q(e){var t=mt();P(t),e.dataTransfer.setDragImage(X,0,0),e.dataTransfer.setData("Text",t)}function et(e){var i,r,a=$[e.keyCode],o=W[Tn.keyMap].auto;if(null==a||e.altGraphKey)return o&&(Tn.keyMap=o),null;if(e.altKey&&(a="Alt-"+a),e.ctrlKey&&(a="Ctrl-"+a),e.metaKey&&(a="Cmd-"+a),e.shiftKey&&(i=t("Shift-"+a,Tn.extraKeys,Tn.keyMap))?r=!0:i=t(a,Tn.extraKeys,Tn.keyMap),"string"==typeof i&&(i=q.propertyIsEnumerable(i)?q[i]:null),o&&(i||!n(e))&&(Tn.keyMap=o),!i)return!1;if(r){var s=Jn;Jn=null,i(wi),Jn=s}else i(wi);return _(e),!0}function tt(e){Xn||rt();var t=e.keyCode;if(U&&27==t&&(e.returnValue=!1),zt(16==t||e.shiftKey),!Tn.onKeyEvent||!Tn.onKeyEvent(wi,b(e))){var n=et(e);window.opera&&(Li=n?e.keyCode:null,!n&&(I?e.metaKey:e.ctrlKey)&&88==e.keyCode&&dt(""))}}function nt(e){if(window.opera&&e.keyCode==Li)return Li=null,_(e),void 0;if(!(Tn.onKeyEvent&&Tn.onKeyEvent(wi,b(e))||window.opera&&!e.which&&et(e))){if(Tn.electricChars&&Yn.electricChars){var t=String.fromCharCode(null==e.charCode?e.keyCode:e.charCode);Yn.electricChars.indexOf(t)>-1&&setTimeout(Sn(function(){Ht(di.to.line,"smart")}),75)}vt()}}function it(e){Tn.onKeyEvent&&Tn.onKeyEvent(wi,b(e))||16==e.keyCode&&(Jn=null)}function rt(){Tn.readOnly||(Xn||(Tn.onFocus&&Tn.onFocus(wi),Xn=!0,-1==Dn.className.search(/\bCodeMirror-focused\b/)&&(Dn.className+=" CodeMirror-focused"),si||_t(!0)),gt(),bn())}function at(){Xn&&(Tn.onBlur&&Tn.onBlur(wi),Xn=!1,Dn.className=Dn.className.replace(" CodeMirror-focused","")),clearInterval(Un),setTimeout(function(){Xn||(Jn=null)},150)}function ot(e,t,n,i,r){if(yi){var a=[];for($n.iter(e.line,t.line+1,function(e){a.push(e.text)}),yi.addChange(e.line,n.length,a);yi.done.length>Tn.undoDepth;)yi.done.shift()}ut(e,t,n,i,r)}function st(e,t){var n=e.pop();if(n){var i=[],r=n.start+n.added;$n.iter(n.start,r,function(e){i.push(e.text)}),t.push({start:n.start,added:n.old.length,old:i});var a=Bt({line:n.start+n.old.length-1,ch:A(i[i.length-1],n.old[n.old.length-1])});ut({line:n.start,ch:0},{line:r-1,ch:y(r-1).text.length},n.old,a,a),ni=!0}}function lt(){st(yi.done,yi.undone)}function ct(){st(yi.undone,yi.done)}function ut(e,t,n,i,r){function a(e){return Math.min(t.line,t.line+b)>=e?e:e+b}var o=!1,s=bi.length;Tn.lineWrapping||$n.iter(e.line,t.line,function(e){return e.text.length==s?(o=!0,!0):void 0}),(e.line!=t.line||n.length>1)&&(li=!0);var c=t.line-e.line,u=y(e.line),h=y(t.line);if(0==e.ch&&0==t.ch&&""==n[n.length-1]){var d=[],p=null;e.line?(p=y(e.line-1),p.fixMarkEnds(h)):h.fixMarkStarts();for(var f=0,m=n.length-1;m>f;++f)d.push(l.inheritMarks(n[f],p));c&&$n.remove(e.line,c,ci),d.length&&$n.insert(e.line,d)}else if(u==h)if(1==n.length)u.replace(e.ch,t.ch,n[0]);else{h=u.split(t.ch,n[n.length-1]),u.replace(e.ch,null,n[0]),u.fixMarkEnds(h);for(var d=[],f=1,m=n.length-1;m>f;++f)d.push(l.inheritMarks(n[f],u));d.push(h),$n.insert(e.line+1,d)}else if(1==n.length)u.replace(e.ch,null,n[0]),h.replace(null,t.ch,""),u.append(h),$n.remove(e.line+1,c,ci);else{var d=[];u.replace(e.ch,null,n[0]),h.replace(null,t.ch,n[n.length-1]),u.fixMarkEnds(h);for(var f=1,m=n.length-1;m>f;++f)d.push(l.inheritMarks(n[f],u));c>1&&$n.remove(e.line+1,c-1,ci),$n.insert(e.line+1,d)}if(Tn.lineWrapping){var g=jn.clientWidth/pn()-3;$n.iter(e.line,e.line+n.length,function(e){if(!e.hidden){var t=Math.ceil(e.text.length/g)||1;t!=e.height&&E(e,t)}})}else $n.iter(e.line,f+n.length,function(e){var t=e.text;t.length>s&&(bi=t,s=t.length,hi=null,o=!1)}),o&&(s=0,bi="",hi=null,$n.iter(0,$n.size,function(e){var t=e.text;t.length>s&&(s=t.length,bi=t)}));for(var v=[],b=n.length-c-1,f=0,_=Gn.length;_>f;++f){var C=Gn[f];e.line>C?v.push(C):C>t.line&&v.push(C+b)}var w=e.line+Math.min(n.length,500);wn(e.line,w),v.push(w),Gn=v,xn(100),ri.push({from:e.line,to:t.line+1,diff:b});var L={from:e,to:t,text:n};if(ai){for(var x=ai;x.next;x=x.next);x.next=L}else ai=L;Dt(i,r,a(di.from.line),a(di.to.line)),Bn.style.height=$n.height*dn()+2*fn()+"px"}function ht(e,t,n){function i(i){if(k(i,t))return i;if(!k(n,i))return r;var a=i.line+e.length-(n.line-t.line)-1,o=i.ch;return i.line==n.line&&(o+=e[e.length-1].length-(n.ch-(n.line==t.line?t.ch:0))),{line:a,ch:o}}t=Bt(t),n=n?Bt(n):t,e=K(e);var r;return pt(e,t,n,function(e){return r=e,{from:i(di.from),to:i(di.to)}}),r}function dt(e,t){pt(K(e),di.from,di.to,function(e){return"end"==t?{from:e,to:e}:"start"==t?{from:di.from,to:di.from}:{from:di.from,to:e}})}function pt(e,t,n,i){var r=1==e.length?e[0].length+t.ch:e[e.length-1].length,a=i({line:t.line+e.length-1,ch:r});ot(t,n,e,a.from,a.to)}function ft(e,t){var n=e.line,i=t.line;if(n==i)return y(n).text.slice(e.ch,t.ch);var r=[y(n).text.slice(e.ch)];return $n.iter(n+1,i,function(e){r.push(e.text)}),r.push(y(i).text.slice(0,t.ch)),r.join("\n")}function mt(){return ft(di.from,di.to)}function gt(){xi||Kn.set(Tn.pollInterval,function(){Mn(),bt(),Xn&&gt(),En()})}function vt(){function e(){Mn();var n=bt();n||t?(xi=!1,gt()):(t=!0,Kn.set(60,e)),En()}var t=!1;xi=!0,Kn.set(20,e)}function bt(){if(si||!Xn||Z(An))return!1;var e=An.value;if(e==Mi)return!1;Jn=null;for(var t=0,n=Math.min(Mi.length,e.length);n>t&&Mi[t]==e[t];)++t;return Mi.length>t?di.from={line:di.from.line,ch:di.from.ch-(Mi.length-t)}:pi&&z(di.from,di.to)&&(di.to={line:di.to.line,ch:Math.min(y(di.to.line).text.length,di.to.ch+(e.length-t))}),dt(e.slice(t),"end"),Mi=e,!0}function _t(e){z(di.from,di.to)?e&&(Mi=An.value=""):(Mi="",An.value=mt(),An.select())}function yt(){Tn.readOnly||An.focus()}function Ct(){if(Wn.getBoundingClientRect){var e=Wn.getBoundingClientRect();if(!U||e.top!=e.bottom){var t=window.innerHeight||Math.max(document.body.offsetHeight,document.documentElement.offsetHeight);(0>e.top||e.bottom>t)&&Wn.scrollIntoView()}}}function wt(){var e=cn(di.inverted?di.from:di.to),t=Tn.lineWrapping?Math.min(e.x,Fn.offsetWidth):e.x;return Lt(t,e.y,t,e.yBot)}function Lt(e,t,n,i){var r=mn(),a=fn(),o=dn();t+=a,i+=a,e+=r,n+=r;var s=jn.clientHeight,l=jn.scrollTop,c=!1,u=!0;l>t?(jn.scrollTop=Math.max(0,t-2*o),c=!0):i>l+s&&(jn.scrollTop=i+o-s,c=!0);var h=jn.clientWidth,d=jn.scrollLeft,p=Tn.fixedGutter?Rn.clientWidth:0;return d+p>e?(50>e&&(e=0),jn.scrollLeft=Math.max(0,e-10-p),c=!0):n>h+d-3&&(jn.scrollLeft=n+10-h,c=!0,n>Bn.clientWidth&&(u=!1)),c&&Tn.onScroll&&Tn.onScroll(wi),u}function xt(){var e=dn(),t=jn.scrollTop-fn(),n=Math.max(0,Math.floor(t/e)),i=Math.ceil((t+jn.clientHeight)/e);return{from:f($n,n),to:f($n,i)}}function Mt(e,t){if(!jn.clientWidth)return mi=gi=fi=0,void 0;var n=xt();if(!(e!==!0&&0==e.length&&n.from>=mi&&gi>=n.to)){var i=Math.max(n.from-100,0),r=Math.min($n.size,n.to+100);i>mi&&20>i-mi&&(i=mi),gi>r&&20>gi-r&&(r=Math.min($n.size,gi));for(var a=e===!0?[]:Et([{from:mi,to:gi,domStart:0}],e),o=0,s=0;a.length>s;++s){var l=a[s];i>l.from&&(l.domStart+=i-l.from,l.from=i),l.to>r&&(l.to=r),l.from>=l.to?a.splice(s--,1):o+=l.to-l.from}if(o!=r-i){a.sort(function(e,t){return e.domStart-t.domStart});var c=dn(),u=Rn.style.display;Vn.style.display=Rn.style.display="none",St(i,r,a),Vn.style.display="";var h=i!=mi||r!=gi||vi!=jn.clientHeight+c;if(h&&(vi=jn.clientHeight+c),mi=i,gi=r,fi=m($n,i),In.style.top=fi*c+"px",Bn.style.height=$n.height*c+2*fn()+"px",Vn.childNodes.length!=gi-mi)throw Error("BAD PATCH! "+JSON.stringify(a)+" size="+(gi-mi)+" nodes="+Vn.childNodes.length);if(Tn.lineWrapping){hi=jn.clientWidth;var d=Vn.firstChild;$n.iter(mi,gi,function(e){if(!e.hidden){var t=Math.round(d.offsetHeight/c)||1;e.height!=t&&(E(e,t),li=!0)}d=d.nextSibling})}else null==hi&&(hi=sn(bi)),hi>jn.clientWidth?(Fn.style.width=hi+"px",Bn.style.width="",Bn.style.width=jn.scrollWidth+"px"):Fn.style.width=Bn.style.width="";return Rn.style.display=u,(h||li)&&Tt(),Ot(),!t&&Tn.onUpdate&&Tn.onUpdate(wi),!0}}}function Et(e,t){for(var n=0,i=t.length||0;i>n;++n){for(var r=t[n],a=[],o=r.diff||0,s=0,l=e.length;l>s;++s){var c=e[s];r.to<=c.from&&r.diff?a.push({from:c.from+o,to:c.to+o,domStart:c.domStart}):r.to<=c.from||r.from>=c.to?a.push(c):(r.from>c.from&&a.push({from:c.from,to:r.from,domStart:c.domStart}),r.to<c.to&&a.push({from:r.to+o,to:c.to+o,domStart:c.domStart+(r.to-c.from)}))}e=a}return e}function St(e,t,n){function i(e){var t=e.nextSibling;return e.parentNode.removeChild(e),t}if(n.length){for(var r=0,a=Vn.firstChild,o=0;n.length>o;++o){for(var s=n[o];s.domStart>r;)a=i(a),r++;for(var l=0,c=s.to-s.from;c>l;++l)a=a.nextSibling,r++}for(;a;)a=i(a)}else Vn.innerHTML="";var u=n.shift(),a=Vn.firstChild,l=e,h=di.from.line,d=di.to.line,p=e>h&&d>=e,f=kn.createElement("div");$n.iter(e,t,function(e){var t=null,i=null;p?(t=0,d==l&&(p=!1,i=di.to.ch)):h==l&&(d==l?(t=di.from.ch,i=di.to.ch):(p=!0,t=di.from.ch)),u&&u.to==l&&(u=n.shift()),!u||u.from>l?(f.innerHTML=e.hidden?"<pre></pre>":e.getHTML(t,i,!0,_i),Vn.insertBefore(f.firstChild,a)):a=a.nextSibling,++l})}function Tt(){if(Tn.gutter||Tn.lineNumbers){var e=In.offsetHeight,t=jn.clientHeight;Rn.style.height=(2>e-t?t:e)+"px";var n=[],i=mi;$n.iter(mi,Math.max(gi,mi+1),function(e){if(e.hidden)n.push("<pre></pre>");else{var t=e.gutterMarker,r=Tn.lineNumbers?i+Tn.firstLineNumber:null;t&&t.text?r=t.text.replace("%N%",null!=r?r:""):null==r&&(r=" "),n.push(t&&t.style?'<pre class="'+t.style+'">':"<pre>",r);for(var a=1;e.height>a;++a)n.push("<br/>&#160;");n.push("</pre>")}++i}),Rn.style.display="none",Nn.innerHTML=n.join("");for(var r=($n.size+"").length,a=Nn.firstChild,o=O(a),s="";r>o.length+s.length;)s+=" ";s&&a.insertBefore(kn.createTextNode(s),a.firstChild),Rn.style.display="",Fn.style.marginLeft=Rn.offsetWidth+"px",li=!1}}function Ot(){var e=di.inverted?di.from:di.to,t=(dn(),cn(e,!0)),n=T(Dn),i=T(Vn);Pn.style.top=t.y+i.top-n.top+"px",Pn.style.left=t.x+i.left-n.left+"px",z(di.from,di.to)?(Wn.style.top=t.y+"px",Wn.style.left=(Tn.lineWrapping?Math.min(t.x,Fn.offsetWidth):t.x)+"px",Wn.style.display=""):Wn.style.display="none"}function zt(e){Jn=e?Jn||(di.inverted?di.to:di.from):null}function kt(e,t){var n=Jn&&Bt(Jn);n&&(k(n,e)?e=n:k(t,n)&&(t=n)),Dt(e,t),ii=!0}function Dt(e,t,n,i){if(Ei=null,null==n&&(n=di.from.line,i=di.to.line),!z(di.from,e)||!z(di.to,t)){if(k(t,e)){var r=t;t=e,e=r}e.line!=n&&(e=Pt(e,n,di.from.ch)),t.line!=i&&(t=Pt(t,i,di.to.ch)),z(e,t)?di.inverted=!1:z(e,di.to)?di.inverted=!1:z(t,di.from)&&(di.inverted=!0),z(e,t)?z(di.from,di.to)||ri.push({from:n,to:i+1}):z(di.from,di.to)?ri.push({from:e.line,to:t.line+1}):(z(e,di.from)||(n>e.line?ri.push({from:e.line,to:Math.min(t.line,n)+1}):ri.push({from:n,to:Math.min(i,e.line)+1})),z(t,di.to)||(i>t.line?ri.push({from:Math.max(n,e.line),to:i+1}):ri.push({from:Math.max(e.line,i),to:t.line+1}))),di.from=e,di.to=t,oi=!0}}function Pt(e,t,n){function i(t){for(var i=e.line+t,r=1==t?$n.size:-1;i!=r;){var a=y(i);if(!a.hidden){var o=e.ch;return(o>n||o>a.text.length)&&(o=a.text.length),{line:i,ch:o}}i+=t}}var r=y(e.line);return r.hidden?e.line>=t?i(1)||i(-1):i(-1)||i(1):e}function At(e,t,n){var i=Bt({line:e,ch:t||0});(n?kt:Dt)(i,i)}function jt(e){return Math.max(0,Math.min(e,$n.size-1))}function Bt(e){if(0>e.line)return{line:0,ch:0};if(e.line>=$n.size)return{line:$n.size-1,ch:y($n.size-1).text.length};var t=e.ch,n=y(e.line).text.length;return null==t||t>n?{line:e.line,ch:n}:0>t?{line:e.line,ch:0}:e}function It(e,t){function n(){for(var t=a+e,n=0>e?-1:$n.size;t!=n;t+=e){var i=y(t);if(!i.hidden)return a=t,s=i,!0}}function i(t){if(o==(0>e?0:s.text.length)){if(t||!n())return!1;o=0>e?s.text.length:0}else o+=e;return!0}var r=di.inverted?di.from:di.to,a=r.line,o=r.ch,s=y(a);if("char"==t)i();else if("column"==t)i(!0);else if("word"==t)for(var l=!1;!(0>e)||i();){if(B(s.text.charAt(o)))l=!0;else if(l){0>e&&(e=1,i());break}if(e>0&&!i())break}return{line:a,ch:o}}function Rt(e,t){var n=0>e?di.from:di.to;(Jn||z(di.from,di.to))&&(n=It(e,t)),At(n.line,n.ch,!0)}function Nt(e,t){z(di.from,di.to)?0>e?ht("",It(e,t),di.to):ht("",di.from,It(e,t)):ht("",di.from,di.to),ii=!0}function Ft(e,t){var n=0,i=cn(di.inverted?di.from:di.to,!0);null!=Ei&&(i.x=Ei),"page"==t?n=jn.clientHeight:"line"==t&&(n=dn());var r=un(i.x,i.y+n*e+2);At(r.line,r.ch,!0),Ei=i.x}function qt(e){for(var t=y(e.line).text,n=e.ch,i=e.ch;n>0&&B(t.charAt(n-1));)--n;for(;t.length>i&&B(t.charAt(i));)++i;kt({line:e.line,ch:n},{line:e.line,ch:i})}function Wt(e){kt({line:e,ch:0},{line:e,ch:y(e).text.length})}function Vt(e){if(z(di.from,di.to))return Ht(di.from.line,e);for(var t=di.to.line-(di.to.ch?0:1),n=di.from.line;t>=n;++n)Ht(n,e)}function Ht(e,t){if(t||(t="add"),"smart"==t)if(Yn.indent)var n=Cn(e);else t="prev";var i,r=y(e),a=r.indentation(Tn.tabSize),o=r.text.match(/^\s*/)[0];"prev"==t?i=e?y(e-1).indentation(Tn.tabSize):0:"smart"==t?i=Yn.indent(n,r.text.slice(o.length),r.text):"add"==t?i=a+Tn.indentUnit:"subtract"==t&&(i=a-Tn.indentUnit),i=Math.max(0,i);var s=i-a;if(s){var l="",c=0;if(Tn.indentWithTabs)for(var u=Math.floor(i/Tn.tabSize);u;--u)c+=Tn.tabSize,l+="	";for(;i>c;)++c,l+=" "}else{if(di.from.line!=e&&di.to.line!=e)return;var l=o}ht(l,{line:e,ch:0},{line:e,ch:o.length})}function Ut(){Yn=e.getMode(Tn,Tn.mode),$n.iter(0,$n.size,function(e){e.stateAfter=null}),Gn=[0],xn()}function Yt(){var e=Tn.gutter||Tn.lineNumbers;Rn.style.display=e?"":"none",e?li=!0:Vn.parentNode.style.marginLeft=0}function Gt(){if(Tn.lineWrapping){Dn.className+=" CodeMirror-wrap";var e=jn.clientWidth/pn()-3;$n.iter(0,$n.size,function(t){if(!t.hidden){var n=Math.ceil(t.text.length/e)||1;1!=n&&E(t,n)}}),Fn.style.width=Bn.style.width=""}else Dn.className=Dn.className.replace(" CodeMirror-wrap",""),hi=null,bi="",$n.iter(0,$n.size,function(e){1!=e.height&&!e.hidden&&E(e,1),e.text.length>bi.length&&(bi=e.text)});ri.push({from:0,to:$n.size})}function Xt(){for(var e='<span class="cm-tab">',t=0;Tn.tabSize>t;++t)e+=" ";return e+"</span>"}function Kt(){_i=Xt(),Mt(!0)}function Zt(){jn.className=jn.className.replace(/\s*cm-s-\w+/g,"")+Tn.theme.replace(/(^|\s)\s*/g," cm-s-")}function $t(){this.set=[]}function Jt(e,t,n){function i(e,t,n,i){y(e).addMark(new o(t,n,i,r.set))}e=Bt(e),t=Bt(t);var r=new $t;if(e.line==t.line)i(e.line,e.ch,t.ch,n);else{i(e.line,e.ch,null,n);for(var a=e.line+1,s=t.line;s>a;++a)i(a,null,null,n);i(t.line,null,t.ch,n)}return ri.push({from:e.line,to:t.line+1}),r}function Qt(e){e=Bt(e);var t=new s(e.ch);return y(e.line).addMark(t),t}function en(e,t,n){return"number"==typeof e&&(e=y(jt(e))),e.gutterMarker={text:t,style:n},li=!0,e}function tn(e){"number"==typeof e&&(e=y(jt(e))),e.gutterMarker=null,li=!0}function nn(e,t){var n=e,i=e;return"number"==typeof e?i=y(jt(e)):n=p(e),null==n?null:t(i,n)?(ri.push({from:n,to:n+1}),i):null}function rn(e,t){return nn(e,function(e){return e.className!=t?(e.className=t,!0):void 0})}function an(e,t){return nn(e,function(e,n){return e.hidden!=t?(e.hidden=t,E(e,t?0:1),t&&(di.from.line==n||di.to.line==n)&&Dt(Pt(di.from,di.from.line,di.from.ch),Pt(di.to,di.to.line,di.to.ch)),li=!0):void 0})}function on(e){if("number"==typeof e){if(!v(e))return null;var t=e;if(e=y(e),!e)return null}else{var t=p(e);if(null==t)return null}var n=e.gutterMarker;return{line:t,handle:e,text:e.text,markerText:n&&n.text,markerClass:n&&n.style,lineClass:e.className}}function sn(e){return qn.innerHTML="<pre><span>x</span></pre>",qn.firstChild.firstChild.firstChild.nodeValue=e,qn.firstChild.firstChild.offsetWidth||10}function ln(e,t){var n="";if(Tn.lineWrapping){var i=e.text.indexOf(" ",t+2);n=P(e.text.slice(t+1,0>i?e.text.length:i+(U?5:0)))}qn.innerHTML="<pre>"+e.getHTML(null,null,!1,_i,t)+'<span id="CodeMirror-temp-'+ki+'">'+P(e.text.charAt(t)||" ")+"</span>"+n+"</pre>";var r=document.getElementById("CodeMirror-temp-"+ki),a=r.offsetTop,o=r.offsetLeft;if(U&&t&&0==a&&0==o){var s=document.createElement("span");s.innerHTML="x",r.parentNode.insertBefore(s,r.nextSibling),a=s.offsetTop}return{top:a,left:o}}function cn(e,t){var n,i=dn(),r=i*(m($n,e.line)-(t?fi:0));if(0==e.ch)n=0;else{var a=ln(y(e.line),e.ch);n=a.left,Tn.lineWrapping&&(r+=Math.max(0,a.top))}return{x:n,y:r,yBot:r+i}}function un(e,t){function n(e){var t=ln(s,e);if(c){var n=Math.round(t.top/i);return Math.max(0,t.left+(n-u)*jn.clientWidth)}return t.left}0>t&&(t=0);var i=dn(),r=pn(),a=fi+Math.floor(t/i),o=f($n,a);if(o>=$n.size)return{line:$n.size-1,ch:y($n.size-1).text.length};var s=y(o),l=s.text,c=Tn.lineWrapping,u=c?a-m($n,o):0;if(0>=e&&0==u)return{line:o,ch:0};for(var h,d=0,p=0,g=l.length,v=Math.min(g,Math.ceil((e+.9*u*jn.clientWidth)/r));;){var b=n(v);if(!(e>=b&&g>v)){h=b,g=v;break}v=Math.min(g,Math.ceil(1.2*v))}if(e>h)return{line:o,ch:g};for(v=Math.floor(.8*g),b=n(v),e>b&&(d=v,p=b);;){if(1>=g-d)return{line:o,ch:h-e>e-p?d:g};var _=Math.ceil((d+g)/2),C=n(_);C>e?(g=_,h=C):(d=_,p=C)}}function hn(e){var t=cn(e,!0),n=T(Fn);return{x:n.left+t.x,y:n.top+t.y,yBot:n.top+t.yBot}}function dn(){if(null==Oi){Oi="<pre>";for(var e=0;49>e;++e)Oi+="x<br/>";Oi+="x</pre>"}var t=Vn.clientHeight;return t==Ti?Si:(Ti=t,qn.innerHTML=Oi,Si=qn.firstChild.offsetHeight/50||1,qn.innerHTML="",Si)}function pn(){return jn.clientWidth==Di?zi:(Di=jn.clientWidth,zi=sn("x"))}function fn(){return Fn.offsetTop}function mn(){return Fn.offsetLeft}function gn(e,t){var n,i,r=T(jn,!0);try{n=e.clientX,i=e.clientY}catch(e){return null}if(!t&&(n-r.left>jn.clientWidth||i-r.top>jn.clientHeight))return null;var a=T(Fn,!0);return un(n-a.left,i-a.top)}function vn(e){function t(){var e=K(An.value).join("\n");e!=r&&Sn(dt)(e,"end"),Pn.style.position="relative",An.style.cssText=i,si=!1,_t(!0),gt()}var n=gn(e);if(n&&!window.opera){(z(di.from,di.to)||k(n,di.from)||!k(n,di.to))&&Sn(At)(n.line,n.ch);var i=An.style.cssText;Pn.style.position="absolute",An.style.cssText="position: fixed; width: 30px; height: 30px; top: "+(e.clientY-5)+"px; left: "+(e.clientX-5)+"px; z-index: 1000; background: white; "+"border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);",si=!0;var r=An.value=mt();if(yt(),An.select(),H){C(e);var a=x(window,"mouseup",function(){a(),setTimeout(t,20)},!0)}else setTimeout(t,50)}}function bn(){clearInterval(Un);var e=!0;Wn.style.visibility="",Un=setInterval(function(){Wn.style.visibility=(e=!e)?"":"hidden"},650)}function _n(e){function t(e,t,n){if(e.text)for(var i,r=e.styles,a=o?0:e.text.length-1,l=o?0:r.length-2,c=o?r.length:-2;l!=c;l+=2*s){var u=r[l];if(null==r[l+1]||r[l+1]==d){for(var h=o?0:u.length-1,m=o?u.length:-1;h!=m;h+=s,a+=s)if(a>=t&&n>a&&f.test(i=u.charAt(h))){var g=Pi[i];if(">"==g.charAt(1)==o)p.push(i);else{if(p.pop()!=g.charAt(0))return{pos:a,match:!1};if(!p.length)return{pos:a,match:!0}}}}else a+=s*u.length}}var n=di.inverted?di.from:di.to,i=y(n.line),r=n.ch-1,a=r>=0&&Pi[i.text.charAt(r)]||Pi[i.text.charAt(++r)];if(a){for(var o=(a.charAt(0),">"==a.charAt(1)),s=o?1:-1,l=i.styles,c=r+1,u=0,h=l.length;h>u;u+=2)if(0>=(c-=l[u].length)){var d=l[u+1];break}for(var p=[i.text.charAt(r)],f=/[(){}[\]]/,u=n.line,h=o?Math.min(u+100,$n.size):Math.max(-1,u-100);u!=h;u+=s){var i=y(u),m=u==n.line,g=t(i,m&&o?r+1:0,m&&!o?r:i.text.length);if(g)break}g||(g={pos:null,match:!1});var d=g.match?"CodeMirror-matchingbracket":"CodeMirror-nonmatchingbracket",v=Jt({line:n.line,ch:r},{line:n.line,ch:r+1},d),b=null!=g.pos&&Jt({line:u,ch:g.pos},{line:u,ch:g.pos+1},d),_=Sn(function(){v.clear(),b&&b.clear()});e?setTimeout(_,800):ui=_}}function yn(e){for(var t,n,i=e,r=e-40;i>r;--i){if(0==i)return 0;var a=y(i-1);if(a.stateAfter)return i;var o=a.indentation(Tn.tabSize);(null==n||t>o)&&(n=i-1,t=o)}return n}function Cn(e){var t=yn(e),n=t&&y(t-1).stateAfter;return n=n?i(Yn,n):r(Yn),$n.iter(t,e,function(e){e.highlight(Yn,n,Tn.tabSize),e.stateAfter=i(Yn,n)}),e>t&&ri.push({from:t,to:e}),$n.size>e&&!y(e).stateAfter&&Gn.push(e),n}function wn(e,t){var n=Cn(e);$n.iter(e,t,function(e){e.highlight(Yn,n,Tn.tabSize),e.stateAfter=i(Yn,n)})}function Ln(){for(var e=+new Date+Tn.workTime,t=Gn.length;Gn.length;){if(y(mi).stateAfter)var n=Gn.pop();else var n=mi;if(!(n>=$n.size)){var a=yn(n),o=a&&y(a-1).stateAfter;o=o?i(Yn,o):r(Yn);var s=0,l=Yn.compareStates,c=!1,u=a,h=!1;if($n.iter(u,$n.size,function(t){var r=t.stateAfter;if(+new Date>e)return Gn.push(u),xn(Tn.workDelay),c&&ri.push({from:n,to:u+1}),h=!0;var a=t.highlight(Yn,o,Tn.tabSize);if(a&&(c=!0),t.stateAfter=i(Yn,o),l){if(r&&l(r,o))return!0}else if(a===!1&&r){if(++s>3&&(!Yn.indent||Yn.indent(r,"")==Yn.indent(o,"")))return!0}else s=0;++u}),h)return;c&&ri.push({from:n,to:u+1})}}t&&Tn.onHighlightComplete&&Tn.onHighlightComplete(wi)}function xn(e){Gn.length&&Zn.set(e,Sn(Ln))}function Mn(){ni=ii=ai=null,ri=[],oi=!1,ci=[]}function En(){var e,t=!1;oi&&(t=!wt()),ri.length?e=Mt(ri,!0):(oi&&Ot(),li&&Tt()),t&&wt(),oi&&(Ct(),bn()),Xn&&!si&&(ni===!0||ni!==!1&&oi)&&_t(ii),oi&&Tn.matchBrackets&&setTimeout(Sn(function(){ui&&(ui(),ui=null),z(di.from,di.to)&&_n(!1)}),20);var n=ai,i=ci;oi&&Tn.onCursorActivity&&Tn.onCursorActivity(wi),n&&Tn.onChange&&wi&&Tn.onChange(wi,n);for(var r=0;i.length>r;++r)i[r](wi);e&&Tn.onUpdate&&Tn.onUpdate(wi)}function Sn(e){return function(){Ai++||Mn();try{var t=e.apply(this,arguments)}finally{--Ai||En()}return t}}var Tn={},On=e.defaults;for(var zn in On)On.hasOwnProperty(zn)&&(Tn[zn]=(c&&c.hasOwnProperty(zn)?c:On)[zn]);var kn=Tn.document,Dn=kn.createElement("div");Dn.className="CodeMirror"+(Tn.lineWrapping?" CodeMirror-wrap":""),Dn.innerHTML='<div style="overflow: hidden; position: relative; width: 3px; height: 0px;"><textarea style="position: absolute; padding: 0; width: 1px;" wrap="off" autocorrect="off" autocapitalize="off"></textarea></div><div class="CodeMirror-scroll" tabindex="-1"><div style="position: relative"><div style="position: relative"><div class="CodeMirror-gutter"><div class="CodeMirror-gutter-text"></div></div><div class="CodeMirror-lines"><div style="position: relative"><div style="position: absolute; width: 100%; height: 0; overflow: hidden; visibility: hidden"></div><pre class="CodeMirror-cursor">&#160;</pre><div></div></div></div></div></div></div>',a.appendChild?a.appendChild(Dn):a(Dn);var Pn=Dn.firstChild,An=Pn.firstChild,jn=Dn.lastChild,Bn=jn.firstChild,In=Bn.firstChild,Rn=In.firstChild,Nn=Rn.firstChild,Fn=Rn.nextSibling.firstChild,qn=Fn.firstChild,Wn=qn.nextSibling,Vn=Wn.nextSibling;Zt(),/AppleWebKit/.test(navigator.userAgent)&&/Mobile\/\w+/.test(navigator.userAgent)&&(An.style.width="0px"),Y||(Fn.draggable=!0),null!=Tn.tabindex&&(An.tabIndex=Tn.tabindex),!Tn.gutter&&!Tn.lineNumbers&&(Rn.style.display="none");try{sn("x")}catch(Hn){throw Hn.message.match(/runtime/i)&&(Hn=Error("A CodeMirror inside a P-style element does not work in Internet Explorer. (innerHTML bug)")),Hn}var Un,Yn,Gn,Xn,Kn=new M,Zn=new M,$n=new h([new u([new l("")])]);Ut();var Jn,Qn,ei,ti,ni,ii,ri,ai,oi,si,li,ci,ui,hi,di={from:{line:0,ch:0},to:{line:0,ch:0},inverted:!1},pi=!1,fi=0,mi=0,gi=0,vi=0,bi="",_i=Xt();Sn(function(){S(Tn.value||""),ni=!1})();var yi=new g;x(jn,"mousedown",Sn(N)),x(jn,"dblclick",Sn(G)),x(Fn,"dragstart",Q),x(Fn,"selectstart",_),H||x(jn,"contextmenu",vn),x(jn,"scroll",function(){Mt([]),Tn.fixedGutter&&(Rn.style.left=jn.scrollLeft+"px"),Tn.onScroll&&Tn.onScroll(wi)}),x(window,"resize",function(){Mt(!0)}),x(An,"keyup",Sn(it)),x(An,"input",vt),x(An,"keydown",Sn(tt)),x(An,"keypress",Sn(nt)),x(An,"focus",rt),x(An,"blur",at),x(jn,"dragenter",C),x(jn,"dragover",C),x(jn,"drop",Sn(J)),x(jn,"paste",function(){yt(),vt()}),x(An,"paste",vt),x(An,"cut",Sn(function(){dt("")}));var Ci;try{Ci=kn.activeElement==An}catch(Hn){}Ci?setTimeout(rt,20):at();var wi=Dn.CodeMirror={getValue:R,setValue:Sn(S),getSelection:mt,replaceSelection:Sn(dt),focus:function(){yt(),rt(),vt()},setOption:function(e,t){var n=Tn[e];Tn[e]=t,"mode"==e||"indentUnit"==e?Ut():"readOnly"==e&&t?(at(),An.blur()):"theme"==e?Zt():"lineWrapping"==e&&n!=t?Sn(Gt)():"tabSize"==e&&Sn(Kt)(),("lineNumbers"==e||"gutter"==e||"firstLineNumber"==e||"theme"==e)&&Sn(Yt)()},getOption:function(e){return Tn[e]},undo:Sn(lt),redo:Sn(ct),indentLine:Sn(function(e,t){v(e)&&Ht(e,null==t?"smart":t?"add":"subtract")}),indentSelection:Sn(Vt),historySize:function(){return{undo:yi.done.length,redo:yi.undone.length}},clearHistory:function(){yi=new g},matchBrackets:Sn(function(){_n(!0)}),getTokenAt:Sn(function(e){return e=Bt(e),y(e.line).getTokenAt(Yn,Cn(e.line),e.ch)}),getStateAfter:function(e){return e=jt(null==e?$n.size-1:e),Cn(e+1)},cursorCoords:function(e){return null==e&&(e=di.inverted),hn(e?di.from:di.to)},charCoords:function(e){return hn(Bt(e))},coordsChar:function(e){var t=T(Fn);return un(e.x-t.left,e.y-t.top)},markText:Sn(Jt),setBookmark:Qt,setMarker:Sn(en),clearMarker:Sn(tn),setLineClass:Sn(rn),hideLine:Sn(function(e){return an(e,!0)}),showLine:Sn(function(e){return an(e,!1)}),onDeleteLine:function(e,t){if("number"==typeof e){if(!v(e))return null;e=y(e)}return(e.handlers||(e.handlers=[])).push(t),e},lineInfo:on,addWidget:function(e,t,n,i,r){e=cn(Bt(e));var a=e.yBot,o=e.x;if(t.style.position="absolute",Bn.appendChild(t),"over"==i)a=e.y;else if("near"==i){var s=Math.max(jn.offsetHeight,$n.height*dn()),l=Math.max(Bn.clientWidth,Fn.clientWidth)-mn();e.yBot+t.offsetHeight>s&&e.y>t.offsetHeight&&(a=e.y-t.offsetHeight),o+t.offsetWidth>l&&(o=l-t.offsetWidth)}t.style.top=a+fn()+"px",t.style.left=t.style.right="","right"==r?(o=Bn.clientWidth-t.offsetWidth,t.style.right="0px"):("left"==r?o=0:"middle"==r&&(o=(Bn.clientWidth-t.offsetWidth)/2),t.style.left=o+mn()+"px"),n&&Lt(o,a,o+t.offsetWidth,a+t.offsetHeight)},lineCount:function(){return $n.size},clipPos:Bt,getCursor:function(e){return null==e&&(e=di.inverted),D(e?di.from:di.to)},somethingSelected:function(){return!z(di.from,di.to)},setCursor:Sn(function(e,t,n){null==t&&"number"==typeof e.line?At(e.line,e.ch,n):At(e,t,n)}),setSelection:Sn(function(e,t,n){(n?kt:Dt)(Bt(e),Bt(t||e))}),getLine:function(e){return v(e)?y(e).text:void 0},getLineHandle:function(e){return v(e)?y(e):void 0},setLine:Sn(function(e,t){v(e)&&ht(t,{line:e,ch:0},{line:e,ch:y(e).text.length})}),removeLine:Sn(function(e){v(e)&&ht("",{line:e,ch:0},Bt({line:e+1,ch:0}))}),replaceRange:Sn(ht),getRange:function(e,t){return ft(Bt(e),Bt(t))},execCommand:function(e){return q[e](wi)},moveH:Sn(Rt),deleteH:Sn(Nt),moveV:Sn(Ft),toggleOverwrite:function(){pi=!pi},posFromIndex:function(e){var t,n=0;return $n.iter(0,$n.size,function(i){var r=i.text.length+1;return r>e?(t=e,!0):(e-=r,++n,void 0)}),Bt({line:n,ch:t})},indexFromPos:function(e){if(0>e.line||0>e.ch)return 0;var t=e.ch;return $n.iter(0,e.line,function(e){t+=e.text.length+1}),t},operation:function(e){return Sn(e)()},refresh:function(){Mt(!0)},getInputField:function(){return An},getWrapperElement:function(){return Dn},getScrollerElement:function(){return jn},getGutterElement:function(){return Rn}},Li=null,xi=!1,Mi="",Ei=null;$t.prototype.clear=Sn(function(){for(var e=1/0,t=-1/0,n=0,i=this.set.length;i>n;++n){var r=this.set[n],a=r.marked;if(a&&r.parent){var o=p(r);e=Math.min(e,o),t=Math.max(t,o);for(var s=0;a.length>s;++s)a[s].set==this.set&&a.splice(s--,1)}}1/0!=e&&ri.push({from:e,to:t+1})}),$t.prototype.find=function(){for(var e,t,n=0,i=this.set.length;i>n;++n)for(var r=this.set[n],a=r.marked,o=0;a.length>o;++o){var s=a[o];if(s.set==this.set&&(null!=s.from||null!=s.to)){var l=p(r);null!=l&&(null!=s.from&&(e={line:l,ch:s.from}),null!=s.to&&(t={line:l,ch:s.to}))}}return{from:e,to:t}};var Si,Ti,Oi,zi,ki=Math.floor(16777215*Math.random()).toString(16),Di=0,Pi={"(":")>",")":"(<","[":"]>","]":"[<","{":"}>","}":"{<"},Ai=0;for(var ji in F)F.propertyIsEnumerable(ji)&&!wi.propertyIsEnumerable(ji)&&(wi[ji]=F[ji]);return wi}function t(e,t,n){function i(e,t,n){var r=t[e];if(null!=r)return r;if(null==n&&(n=t.fallthrough),null==n)return t.catchall;if("string"==typeof n)return i(e,W[n]);for(var a=0,o=n.length;o>a;++a)if(r=i(e,W[n[a]]),null!=r)return r;return null}return t?i(e,t,n):i(e,W[n])}function n(e){var t=$[e.keyCode];return"Ctrl"==t||"Alt"==t||"Shift"==t||"Mod"==t}function i(e,t){if(t===!0)return t;if(e.copyState)return e.copyState(t);var n={};for(var i in t){var r=t[i];r instanceof Array&&(r=r.concat([])),n[i]=r}return n}function r(e,t,n){return e.startState?e.startState(t,n):!0}function a(e,t){this.pos=this.start=0,this.string=e,this.tabSize=t||8}function o(e,t,n,i){this.from=e,this.to=t,this.style=n,this.set=i}function s(e){this.from=e,this.to=e,this.line=null}function l(e,t){this.styles=t||[e,null],this.text=e,this.height=1,this.marked=this.gutterMarker=this.className=this.handlers=null,this.stateAfter=this.parent=this.hidden=null}function c(e,t,n,i){for(var r=0,a=0,o=0;t>a;r+=2){var s=n[r],l=a+s.length;0==o?(l>e&&i.push(s.slice(e-a,Math.min(s.length,t-a)),n[r+1]),l>=e&&(o=1)):1==o&&(l>t?i.push(s.slice(0,t-a),n[r+1]):i.push(s,n[r+1])),a=l}}function u(e){this.lines=e,this.parent=null;for(var t=0,n=e.length,i=0;n>t;++t)e[t].parent=this,i+=e[t].height;this.height=i}function h(e){this.children=e;for(var t=0,n=0,i=0,r=e.length;r>i;++i){var a=e[i];t+=a.chunkSize(),n+=a.height,a.parent=this}this.size=t,this.height=n,this.parent=null}function d(e,t){for(;!e.lines;)for(var n=0;;++n){var i=e.children[n],r=i.chunkSize();if(r>t){e=i;break}t-=r}return e.lines[t]}function p(e){if(null==e.parent)return null;for(var t=e.parent,n=j(t.lines,e),i=t.parent;i;t=i,i=i.parent){var r=0;for(i.children.length;i.children[r]!=t;++r)n+=i.children[r].chunkSize()}return n}function f(e,t){var n=0;e:do{for(var i=0,r=e.children.length;r>i;++i){var a=e.children[i],o=a.height;if(o>t){e=a;continue e}t-=o,n+=a.chunkSize()}return n}while(!e.lines);for(var i=0,r=e.lines.length;r>i;++i){var s=e.lines[i],l=s.height;if(l>t)break;t-=l}return n+i}function m(e,t){var n=0;e:do{for(var i=0,r=e.children.length;r>i;++i){var a=e.children[i],o=a.chunkSize();if(o>t){e=a;continue e}t-=o,n+=a.height}return n}while(!e.lines);for(var i=0;t>i;++i)n+=e.lines[i].height;return n}function g(){this.time=0,this.done=[],this.undone=[]}function v(){C(this)}function b(e){return e.stop||(e.stop=v),e}function _(e){e.preventDefault?e.preventDefault():e.returnValue=!1}function y(e){e.stopPropagation?e.stopPropagation():e.cancelBubble=!0}function C(e){_(e),y(e)}function w(e){return e.target||e.srcElement
}function L(e){return e.which?e.which:1&e.button?1:2&e.button?3:4&e.button?2:void 0}function x(e,t,n,i){if("function"==typeof e.addEventListener){if(e.addEventListener(t,n,!1),i)return function(){e.removeEventListener(t,n,!1)}}else{var r=function(e){n(e||window.event)};if(e.attachEvent("on"+t,r),i)return function(){e.detachEvent("on"+t,r)}}}function M(){this.id=null}function E(e,t,n){null==t&&(t=e.search(/[^\s\u00a0]/),-1==t&&(t=e.length));for(var i=0,r=0;t>i;++i)"	"==e.charAt(i)?r+=n-r%n:++r;return r}function S(e){return e.currentStyle?e.currentStyle:window.getComputedStyle(e,null)}function T(e,t){for(var n=e.ownerDocument.body,i=0,r=0,a=!1,o=e;o;o=o.offsetParent){var s=o.offsetLeft,l=o.offsetTop;o==n?(i+=Math.abs(s),r+=Math.abs(l)):(i+=s,r+=l),t&&"fixed"==S(o).position&&(a=!0)}for(var c=t&&!a?null:n,o=e.parentNode;o!=c;o=o.parentNode)null!=o.scrollLeft&&(i-=o.scrollLeft,r-=o.scrollTop);return{left:i,top:r}}function O(e){return e.textContent||e.innerText||e.nodeValue||""}function z(e,t){return e.line==t.line&&e.ch==t.ch}function k(e,t){return e.line<t.line||e.line==t.line&&e.ch<t.ch}function D(e){return{line:e.line,ch:e.ch}}function P(e){return X.textContent=e,X.innerHTML}function A(e,t){if(!t)return e?e.length:0;if(!e)return t.length;for(var n=e.length,i=t.length;n>=0&&i>=0&&e.charAt(n)==t.charAt(i);--n,--i);return i+1}function j(e,t){if(e.indexOf)return e.indexOf(t);for(var n=0,i=e.length;i>n;++n)if(e[n]==t)return n;return-1}function B(e){return/\w/.test(e)||e.toUpperCase()!=e.toLowerCase()}e.defaults={value:"",mode:null,theme:"default",indentUnit:2,indentWithTabs:!1,tabSize:4,keyMap:"default",extraKeys:null,electricChars:!0,onKeyEvent:null,lineWrapping:!1,lineNumbers:!1,gutter:!1,fixedGutter:!1,firstLineNumber:1,readOnly:!1,onChange:null,onCursorActivity:null,onGutterClick:null,onHighlightComplete:null,onUpdate:null,onFocus:null,onBlur:null,onScroll:null,matchBrackets:!1,workTime:100,workDelay:200,pollInterval:100,undoDepth:40,tabindex:null,document:window.document};var I=/Mac/.test(navigator.platform),R=(/Win/.test(navigator.platform),{}),N={};e.defineMode=function(t,n){!e.defaults.mode&&"null"!=t&&(e.defaults.mode=t),R[t]=n},e.defineMIME=function(e,t){N[e]=t},e.getMode=function(t,n){if("string"==typeof n&&N.hasOwnProperty(n)&&(n=N[n]),"string"==typeof n)var i=n,r={};else if(null!=n)var i=n.name,r=n;var a=R[i];return a?a(t,r||{}):(window.console&&console.warn("No mode "+i+" found, falling back to plain text."),e.getMode(t,"text/plain"))},e.listModes=function(){var e=[];for(var t in R)R.propertyIsEnumerable(t)&&e.push(t);return e},e.listMIMEs=function(){var e=[];for(var t in N)N.propertyIsEnumerable(t)&&e.push({mime:t,mode:N[t]});return e};var F=e.extensions={};e.defineExtension=function(e,t){F[e]=t};var q=e.commands={selectAll:function(e){e.setSelection({line:0,ch:0},{line:e.lineCount()-1})},killLine:function(e){var t=e.getCursor(!0),n=e.getCursor(!1),i=!z(t,n);i||e.getLine(t.line).length!=t.ch?e.replaceRange("",t,i?n:{line:t.line}):e.replaceRange("",t,{line:t.line+1,ch:0})},deleteLine:function(e){var t=e.getCursor().line;e.replaceRange("",{line:t,ch:0},{line:t})},undo:function(e){e.undo()},redo:function(e){e.redo()},goDocStart:function(e){e.setCursor(0,0,!0)},goDocEnd:function(e){e.setSelection({line:e.lineCount()-1},null,!0)},goLineStart:function(e){e.setCursor(e.getCursor().line,0,!0)},goLineStartSmart:function(e){var t=e.getCursor(),n=e.getLine(t.line),i=Math.max(0,n.search(/\S/));e.setCursor(t.line,i>=t.ch&&t.ch?0:i,!0)},goLineEnd:function(e){e.setSelection({line:e.getCursor().line},null,!0)},goLineUp:function(e){e.moveV(-1,"line")},goLineDown:function(e){e.moveV(1,"line")},goPageUp:function(e){e.moveV(-1,"page")},goPageDown:function(e){e.moveV(1,"page")},goCharLeft:function(e){e.moveH(-1,"char")},goCharRight:function(e){e.moveH(1,"char")},goColumnLeft:function(e){e.moveH(-1,"column")},goColumnRight:function(e){e.moveH(1,"column")},goWordLeft:function(e){e.moveH(-1,"word")},goWordRight:function(e){e.moveH(1,"word")},delCharLeft:function(e){e.deleteH(-1,"char")},delCharRight:function(e){e.deleteH(1,"char")},delWordLeft:function(e){e.deleteH(-1,"word")},delWordRight:function(e){e.deleteH(1,"word")},indentAuto:function(e){e.indentSelection("smart")},indentMore:function(e){e.indentSelection("add")},indentLess:function(e){e.indentSelection("subtract")},insertTab:function(e){e.replaceSelection("	","end")},transposeChars:function(e){var t=e.getCursor(),n=e.getLine(t.line);t.ch>0&&t.ch<n.length-1&&e.replaceRange(n.charAt(t.ch)+n.charAt(t.ch-1),{line:t.line,ch:t.ch-1},{line:t.line,ch:t.ch+1})},newlineAndIndent:function(e){e.replaceSelection("\n","end"),e.indentLine(e.getCursor().line)},toggleOverwrite:function(e){e.toggleOverwrite()}},W=e.keyMap={};W.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharRight",Backspace:"delCharLeft",Tab:"indentMore","Shift-Tab":"indentLess",Enter:"newlineAndIndent",Insert:"toggleOverwrite"},W.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Alt-Up":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Down":"goDocEnd","Ctrl-Left":"goWordLeft","Ctrl-Right":"goWordRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delWordLeft","Ctrl-Delete":"delWordRight","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll",fallthrough:"basic"},W.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goWordLeft","Alt-Right":"goWordRight","Cmd-Left":"goLineStart","Cmd-Right":"goLineEnd","Alt-Backspace":"delWordLeft","Ctrl-Alt-Backspace":"delWordRight","Alt-Delete":"delWordRight","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll",fallthrough:["basic","emacsy"]},W["default"]=I?W.macDefault:W.pcDefault,W.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Alt-F":"goWordRight","Alt-B":"goWordLeft","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageUp","Shift-Ctrl-V":"goPageDown","Ctrl-D":"delCharRight","Ctrl-H":"delCharLeft","Alt-D":"delWordRight","Alt-Backspace":"delWordLeft","Ctrl-K":"killLine","Ctrl-T":"transposeChars"},e.fromTextArea=function(t,n){function i(){t.value=s.getValue()}function r(){i(),t.form.submit=o,t.form.submit(),t.form.submit=r}if(n||(n={}),n.value=t.value,!n.tabindex&&t.tabindex&&(n.tabindex=t.tabindex),t.form){var a=x(t.form,"submit",i,!0);if("function"==typeof t.form.submit){var o=t.form.submit;t.form.submit=r}}t.style.display="none";var s=e(function(e){t.parentNode.insertBefore(e,t.nextSibling)},n);return s.save=i,s.getTextArea=function(){return t},s.toTextArea=function(){i(),t.parentNode.removeChild(s.getWrapperElement()),t.style.display="",t.form&&(a(),"function"==typeof t.form.submit&&(t.form.submit=o))},s},e.copyState=i,e.startState=r,a.prototype={eol:function(){return this.pos>=this.string.length},sol:function(){return 0==this.pos},peek:function(){return this.string.charAt(this.pos)},next:function(){return this.pos<this.string.length?this.string.charAt(this.pos++):void 0},eat:function(e){var t=this.string.charAt(this.pos);if("string"==typeof e)var n=t==e;else var n=t&&(e.test?e.test(t):e(t));return n?(++this.pos,t):void 0},eatWhile:function(e){for(var t=this.pos;this.eat(e););return this.pos>t},eatSpace:function(){for(var e=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>e},skipToEnd:function(){this.pos=this.string.length},skipTo:function(e){var t=this.string.indexOf(e,this.pos);return t>-1?(this.pos=t,!0):void 0},backUp:function(e){this.pos-=e},column:function(){return E(this.string,this.start,this.tabSize)},indentation:function(){return E(this.string,null,this.tabSize)},match:function(e,t,n){function i(e){return n?e.toLowerCase():e}if("string"!=typeof e){var r=this.string.slice(this.pos).match(e);return r&&t!==!1&&(this.pos+=r[0].length),r}return i(this.string).indexOf(i(e),this.pos)==this.pos?(t!==!1&&(this.pos+=e.length),!0):void 0},current:function(){return this.string.slice(this.start,this.pos)}},e.StringStream=a,o.prototype={attach:function(e){this.set.push(e)},detach:function(e){var t=j(this.set,e);t>-1&&this.set.splice(t,1)},split:function(e,t){if(e>=this.to&&null!=this.to)return null;var n=e>this.from||null==this.from?null:this.from-e+t,i=null==this.to?null:this.to-e+t;return new o(n,i,this.style,this.set)},dup:function(){return new o(null,null,this.style,this.set)},clipTo:function(e,t,n,i,r){null!=this.from&&this.from>=t&&(this.from=Math.max(i,this.from)+r),null!=this.to&&this.to>t&&(this.to=this.to>i?this.to+r:t),e&&i>this.from&&(this.to>i||null==this.to)&&(this.from=null),n&&(this.to>t||null==this.to)&&(t>this.from||null==this.from)&&(this.to=null)},isDead:function(){return null!=this.from&&null!=this.to&&this.from>=this.to},sameSet:function(e){return this.set==e.set}},s.prototype={attach:function(e){this.line=e},detach:function(e){this.line==e&&(this.line=null)},split:function(e,t){return this.from>e?(this.from=this.to=this.from-e+t,this):void 0},isDead:function(){return this.from>this.to},clipTo:function(e,t,n,i,r){(e||this.from>t)&&(n||i>this.to)?(this.from=0,this.to=-1):this.from>t&&(this.from=this.to=Math.max(i,this.from)+r)},sameSet:function(){return!1},find:function(){return this.line&&this.line.parent?{line:p(this.line),ch:this.from}:null},clear:function(){if(this.line){var e=j(this.line.marked,this);-1!=e&&this.line.marked.splice(e,1),this.line=null}}},l.inheritMarks=function(e,t){var n=new l(e),i=t&&t.marked;if(i)for(var r=0;i.length>r;++r)if(null==i[r].to&&i[r].style){var a=n.marked||(n.marked=[]),o=i[r],s=o.dup();a.push(s),s.attach(n)}return n},l.prototype={replace:function(e,t,n){var i=[],r=this.marked,a=null==t?this.text.length:t;if(c(0,e,this.styles,i),n&&i.push(n,null),c(a,this.text.length,this.styles,i),this.styles=i,this.text=this.text.slice(0,e)+n+this.text.slice(a),this.stateAfter=null,r)for(var o=n.length-(a-e),s=0,l=r[s];r.length>s;++s)l.clipTo(null==e,e||0,null==t,a,o),l.isDead()&&(l.detach(this),r.splice(s--,1))},split:function(e,t){var n=[t,null],i=this.marked;c(e,this.text.length,this.styles,n);var r=new l(t+this.text.slice(e),n);if(i)for(var a=0;i.length>a;++a){var o=i[a],s=o.split(e,t.length);s&&(r.marked||(r.marked=[]),r.marked.push(s),s.attach(r))}return r},append:function(e){var t=this.text.length,n=e.marked,i=this.marked;if(this.text+=e.text,c(0,e.text.length,e.styles,this.styles),i)for(var r=0;i.length>r;++r)null==i[r].to&&(i[r].to=t);if(n&&n.length){i||(this.marked=i=[]);e:for(var r=0;n.length>r;++r){var a=n[r];if(!a.from)for(var o=0;i.length>o;++o){var s=i[o];if(s.to==t&&s.sameSet(a)){s.to=null==a.to?null:a.to+t,s.isDead()&&(s.detach(this),n.splice(r--,1));continue e}}i.push(a),a.attach(this),a.from+=t,null!=a.to&&(a.to+=t)}}},fixMarkEnds:function(e){var t=this.marked,n=e.marked;if(t)for(var i=0;t.length>i;++i){var r=t[i],a=null==r.to;if(a&&n)for(var o=0;n.length>o;++o)if(n[o].sameSet(r)){a=!1;break}a&&(r.to=this.text.length)}},fixMarkStarts:function(){var e=this.marked;if(e)for(var t=0;e.length>t;++t)null==e[t].from&&(e[t].from=0)},addMark:function(e){e.attach(this),null==this.marked&&(this.marked=[]),this.marked.push(e),this.marked.sort(function(e,t){return(e.from||0)-(t.from||0)})},highlight:function(e,t,n){var i,r=new a(this.text,n),o=this.styles,s=0,l=!1,c=o[0];for(""==this.text&&e.blankLine&&e.blankLine(t);!r.eol();){var u=e.token(r,t),h=this.text.slice(r.start,r.pos);if(r.start=r.pos,s&&o[s-1]==u?o[s-2]+=h:h&&(!l&&(o[s+1]!=u||s&&o[s-2]!=i)&&(l=!0),o[s++]=h,o[s++]=u,i=c,c=o[s]),r.pos>5e3){o[s++]=this.text.slice(r.pos),o[s++]=null;break}}return o.length!=s&&(o.length=s,l=!0),s&&o[s-2]!=i&&(l=!0),l||(5>o.length&&10>this.text.length?null:!1)},getTokenAt:function(e,t,n){for(var i=this.text,r=new a(i);n>r.pos&&!r.eol();){r.start=r.pos;var o=e.token(r,t)}return{start:r.start,end:r.pos,string:r.current(),className:o||null,state:t}},indentation:function(e){return E(this.text,null,e)},getHTML:function(e,t,n,i,r){function a(e,t){e&&(l&&U&&" "==e.charAt(0)&&(e=" "+e.slice(1)),l=!1,t?s.push('<span class="',t,'">',P(e).replace(/\t/g,i),"</span>"):s.push(P(e).replace(/\t/g,i)))}function o(){h&&(v+=1,b=h.length>v?h[v]:null)}var s=[],l=!0;n&&s.push(this.className?'<pre class="'+this.className+'">':"<pre>");var c=this.styles,u=this.text,h=this.marked;e==t&&(e=null);var d=u.length;if(null!=r&&(d=Math.min(r,d)),u||null!=r)if(h||null!=e){var p,f=0,m=0,g="",v=-1,b=null;for(o();d>f;){var _=d,y="";for(null!=e&&(e>f?_=e:(null==t||t>f)&&(y=" CodeMirror-selected",null!=t&&(_=Math.min(_,t))));b&&null!=b.to&&f>=b.to;)o();for(b&&(b.from>f?_=Math.min(_,b.from):(y+=" "+b.style,null!=b.to&&(_=Math.min(_,b.to))));;){var C=f+g.length,w=p;if(y&&(w=p?p+y:y),a(C>_?g.slice(0,_-f):g,w),C>=_){g=g.slice(_-f),f=_;break}f=C,g=c[m++],p="cm-"+c[m++]}}null!=e&&null==t&&a(" ","CodeMirror-selected")}else for(var m=0,L=0;d>L;m+=2){var x=c[m],p=c[m+1],M=x.length;L+M>d&&(x=x.slice(0,d-L)),L+=M,a(x,p&&"cm-"+p)}else a(" ",null!=e&&null==t?"CodeMirror-selected":null);return n&&s.push("</pre>"),s.join("")},cleanUp:function(){if(this.parent=null,this.marked)for(var e=0,t=this.marked.length;t>e;++e)this.marked[e].detach(this)}},u.prototype={chunkSize:function(){return this.lines.length},remove:function(e,t,n){for(var i=e,r=e+t;r>i;++i){var a=this.lines[i];if(this.height-=a.height,a.cleanUp(),a.handlers)for(var o=0;a.handlers.length>o;++o)n.push(a.handlers[o])}this.lines.splice(e,t)},collapse:function(e){e.splice.apply(e,[e.length,0].concat(this.lines))},insertHeight:function(e,t,n){this.height+=n,this.lines.splice.apply(this.lines,[e,0].concat(t));for(var i=0,r=t.length;r>i;++i)t[i].parent=this},iterN:function(e,t,n){for(var i=e+t;i>e;++e)if(n(this.lines[e]))return!0}},h.prototype={chunkSize:function(){return this.size},remove:function(e,t,n){this.size-=t;for(var i=0;this.children.length>i;++i){var r=this.children[i],a=r.chunkSize();if(a>e){var o=Math.min(t,a-e),s=r.height;if(r.remove(e,o,n),this.height-=s-r.height,a==o&&(this.children.splice(i--,1),r.parent=null),0==(t-=o))break;e=0}else e-=a}if(25>this.size-t){var l=[];this.collapse(l),this.children=[new u(l)]}},collapse:function(e){for(var t=0,n=this.children.length;n>t;++t)this.children[t].collapse(e)},insert:function(e,t){for(var n=0,i=0,r=t.length;r>i;++i)n+=t[i].height;this.insertHeight(e,t,n)},insertHeight:function(e,t,n){this.size+=t.length,this.height+=n;for(var i=0,r=this.children.length;r>i;++i){var a=this.children[i],o=a.chunkSize();if(o>=e){if(a.insertHeight(e,t,n),a.lines&&a.lines.length>50){for(;a.lines.length>50;){var s=a.lines.splice(a.lines.length-25,25),l=new u(s);a.height-=l.height,this.children.splice(i+1,0,l),l.parent=this}this.maybeSpill()}break}e-=o}},maybeSpill:function(){if(!(10>=this.children.length)){var e=this;do{var t=e.children.splice(e.children.length-5,5),n=new h(t);if(e.parent){e.size-=n.size,e.height-=n.height;var i=j(e.parent.children,e);e.parent.children.splice(i+1,0,n)}else{var r=new h(e.children);r.parent=e,e.children=[r,n],e=r}n.parent=e.parent}while(e.children.length>10);e.parent.maybeSpill()}},iter:function(e,t,n){this.iterN(e,t-e,n)},iterN:function(e,t,n){for(var i=0,r=this.children.length;r>i;++i){var a=this.children[i],o=a.chunkSize();if(o>e){var s=Math.min(t,o-e);if(a.iterN(e,s,n))return!0;if(0==(t-=s))break;e=0}else e-=o}}},g.prototype={addChange:function(e,t,n){this.undone.length=0;var i=+new Date,r=this.done[this.done.length-1];if(i-this.time>400||!r||r.start>e+t||r.start+r.added<e-r.added+r.old.length)this.done.push({start:e,added:t,old:n});else{var a=0;if(r.start>e){for(var o=r.start-e-1;o>=0;--o)r.old.unshift(n[o]);r.added+=r.start-e,r.start=e}else e>r.start&&(a=e-r.start,t+=a);for(var o=r.added-a,s=n.length;s>o;++o)r.old.push(n[o]);t>r.added&&(r.added=t)}this.time=i}},e.e_stop=C,e.e_preventDefault=_,e.e_stopPropagation=y,e.connect=x,M.prototype={set:function(e,t){clearTimeout(this.id),this.id=setTimeout(t,e)}};var V=function(){if(/MSIE [1-8]\b/.test(navigator.userAgent))return!1;var e=document.createElement("div");return"draggable"in e}(),H=/gecko\/\d{7}/i.test(navigator.userAgent),U=/MSIE \d/.test(navigator.userAgent),Y=/WebKit\//.test(navigator.userAgent),G="\n";(function(){var e=document.createElement("textarea");e.value="foo\nbar",e.value.indexOf("\r")>-1&&(G="\r\n")})(),null!=document.documentElement.getBoundingClientRect&&(T=function(e,t){try{var n=e.getBoundingClientRect();n={top:n.top,left:n.left}}catch(i){n={top:0,left:0}}if(!t)if(null==window.pageYOffset){var r=document.documentElement||document.body.parentNode;null==r.scrollTop&&(r=document.body),n.top+=r.scrollTop,n.left+=r.scrollLeft}else n.top+=window.pageYOffset,n.left+=window.pageXOffset;return n});var X=document.createElement("pre");"\na"==P("a")?P=function(e){return X.textContent=e,X.innerHTML.slice(1)}:"	"!=P("	")&&(P=function(e){return X.innerHTML="",X.appendChild(document.createTextNode(e)),X.innerHTML}),e.htmlEscape=P;var K=3!="\n\nb".split(/\n/).length?function(e){for(var t,n=0,i=[];(t=e.indexOf("\n",n))>-1;)i.push(e.slice(n,"\r"==e.charAt(t-1)?t-1:t)),n=t+1;return i.push(e.slice(n)),i}:function(e){return e.split(/\r?\n/)};e.splitLines=K;var Z=window.getSelection?function(e){try{return e.selectionStart!=e.selectionEnd}catch(t){return!1}}:function(e){try{var t=e.ownerDocument.selection.createRange()}catch(n){}return t&&t.parentElement()==e?0!=t.compareEndPoints("StartToEnd",t):!1};e.defineMode("null",function(){return{token:function(e){e.skipToEnd()}}}),e.defineMIME("text/plain","null");var $={3:"Enter",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",91:"Mod",92:"Mod",93:"Mod",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",63276:"PageUp",63277:"PageDown",63275:"End",63273:"Home",63234:"Left",63232:"Up",63235:"Right",63233:"Down",63302:"Insert",63272:"Delete"};return e.keyNames=$,function(){for(var e=0;10>e;e++)$[e+48]=e+"";for(var e=65;90>=e;e++)$[e]=String.fromCharCode(e);for(var e=1;12>=e;e++)$[e+111]=$[e+63235]="F"+e}(),e}();n.defineMode("css",function(e){function t(e,t){return o=t,e}function n(e,n){var o=e.next();return"@"==o?(e.eatWhile(/[\w\\\-]/),t("meta",e.current())):"/"==o&&e.eat("*")?(n.tokenize=i,i(e,n)):"<"==o&&e.eat("!")?(n.tokenize=r,r(e,n)):"="!=o?"~"!=o&&"|"!=o||!e.eat("=")?'"'==o||"'"==o?(n.tokenize=a(o),n.tokenize(e,n)):"#"==o?(e.eatWhile(/[\w\\\-]/),t("atom","hash")):"!"==o?(e.match(/^\s*\w*/),t("keyword","important")):/\d/.test(o)?(e.eatWhile(/[\w.%]/),t("number","unit")):/[,.+>*\/]/.test(o)?t(null,"select-op"):/[;{}:\[\]]/.test(o)?t(null,o):(e.eatWhile(/[\w\\\-]/),t("variable","variable")):t(null,"compare"):(t(null,"compare"),void 0)}function i(e,i){for(var r,a=!1;null!=(r=e.next());){if(a&&"/"==r){i.tokenize=n;break}a="*"==r}return t("comment","comment")}function r(e,i){for(var r,a=0;null!=(r=e.next());){if(a>=2&&">"==r){i.tokenize=n;break}a="-"==r?a+1:0}return t("comment","comment")}function a(e){return function(i,r){for(var a,o=!1;null!=(a=i.next())&&(a!=e||o);)o=!o&&"\\"==a;return o||(r.tokenize=n),t("string","string")}}var o,s=e.indentUnit;return{startState:function(e){return{tokenize:n,baseIndent:e||0,stack:[]}},token:function(e,t){if(e.eatSpace())return null;var n=t.tokenize(e,t),i=t.stack[t.stack.length-1];return"hash"==o&&"rule"==i?n="atom":"variable"==n&&("rule"==i?n="number":i&&"@media{"!=i||(n="tag")),"rule"==i&&/^[\{\};]$/.test(o)&&t.stack.pop(),"{"==o?"@media"==i?t.stack[t.stack.length-1]="@media{":t.stack.push("{"):"}"==o?t.stack.pop():"@media"==o?t.stack.push("@media"):"{"==i&&"comment"!=o&&t.stack.push("rule"),n},indent:function(e,t){var n=e.stack.length;return/^\}/.test(t)&&(n-="rule"==e.stack[e.stack.length-1]?2:1),e.baseIndent+n*s},electricChars:"}"}}),n.defineMIME("text/css","css"),n.defineMode("htmlmixed",function(e){function t(e,t){var n=o.token(e,t.htmlState);return"tag"==n&&">"==e.current()&&t.htmlState.context&&(/^script$/i.test(t.htmlState.context.tagName)?(t.token=r,t.localState=s.startState(o.indent(t.htmlState,"")),t.mode="javascript"):/^style$/i.test(t.htmlState.context.tagName)&&(t.token=a,t.localState=l.startState(o.indent(t.htmlState,"")),t.mode="css")),n}function i(e,t,n){var i=e.current(),r=i.search(t);return r>-1&&e.backUp(i.length-r),n}function r(e,n){return e.match(/^<\/\s*script\s*>/i,!1)?(n.token=t,n.curState=null,n.mode="html",t(e,n)):i(e,/<\/\s*script\s*>/,s.token(e,n.localState))}function a(e,n){return e.match(/^<\/\s*style\s*>/i,!1)?(n.token=t,n.localState=null,n.mode="html",t(e,n)):i(e,/<\/\s*style\s*>/,l.token(e,n.localState))}var o=n.getMode(e,{name:"xml",htmlMode:!0}),s=n.getMode(e,"javascript"),l=n.getMode(e,"css");return{startState:function(){var e=o.startState();return{token:t,localState:null,mode:"html",htmlState:e}},copyState:function(e){if(e.localState)var t=n.copyState(e.token==a?l:s,e.localState);return{token:e.token,localState:t,mode:e.mode,htmlState:n.copyState(o,e.htmlState)}},token:function(e,t){return t.token(e,t)},indent:function(e,n){return e.token==t||/^\s*<\//.test(n)?o.indent(e.htmlState,n):e.token==r?s.indent(e.localState,n):l.indent(e.localState,n)},compareStates:function(e,t){return o.compareStates(e.htmlState,t.htmlState)},electricChars:"/{}:"}}),n.defineMIME("text/html","htmlmixed"),n.defineMode("javascript",function(e,t){function n(e,t,n){return t.tokenize=n,n(e,t)}function i(e,t){for(var n,i=!1;null!=(n=e.next());){if(n==t&&!i)return!1;i=!i&&"\\"==n}return i}function r(e,t,n){return B=e,I=n,t}function a(e,t){var a=e.next();if('"'==a||"'"==a)return n(e,t,o(a));if(/[\[\]{}\(\),;\:\.]/.test(a))return r(a);if("0"==a&&e.eat(/x/i))return e.eatWhile(/[\da-f]/i),r("number","number");if(/\d/.test(a))return e.match(/^\d*(?:\.\d*)?(?:[eE][+\-]?\d+)?/),r("number","number");if("/"==a)return e.eat("*")?n(e,t,s):e.eat("/")?(e.skipToEnd(),r("comment","comment")):t.reAllowed?(i(e,"/"),e.eatWhile(/[gimy]/),r("regexp","string")):(e.eatWhile(q),r("operator",null,e.current()));if("#"==a)return e.skipToEnd(),r("error","error");if(q.test(a))return e.eatWhile(q),r("operator",null,e.current());e.eatWhile(/[\w\$_]/);var l=e.current(),c=F.propertyIsEnumerable(l)&&F[l];return c&&t.kwAllowed?r(c.type,c.style,l):r("variable","variable",l)}function o(e){return function(t,n){return i(t,e)||(n.tokenize=a),r("string","string")}}function s(e,t){for(var n,i=!1;n=e.next();){if("/"==n&&i){t.tokenize=a;break}i="*"==n}return r("comment","comment")}function l(e,t,n,i,r,a){this.indented=e,this.column=t,this.type=n,this.prev=r,this.info=a,null!=i&&(this.align=i)}function c(e,t){for(var n=e.localVars;n;n=n.next)if(n.name==t)return!0}function u(e,t,n,i,r){var a=e.cc;for(V.state=e,V.stream=r,V.marked=null,V.cc=a,e.lexical.hasOwnProperty("align")||(e.lexical.align=!0);;){var o=a.length?a.pop():N?y:_;if(o(n,i)){for(;a.length&&a[a.length-1].lex;)a.pop()();return V.marked?V.marked:"variable"==n&&c(e,i)?"variable-2":t}}}function h(){for(var e=arguments.length-1;e>=0;e--)V.cc.push(arguments[e])}function d(){return h.apply(null,arguments),!0}function p(e){var t=V.state;if(t.context){V.marked="def";for(var n=t.localVars;n;n=n.next)if(n.name==e)return;t.localVars={name:e,next:t.localVars}}}function f(){V.state.context||(V.state.localVars=H),V.state.context={prev:V.state.context,vars:V.state.localVars}}function m(){V.state.localVars=V.state.context.vars,V.state.context=V.state.context.prev}function g(e,t){var n=function(){var n=V.state;n.lexical=new l(n.indented,V.stream.column(),e,null,n.lexical,t)};return n.lex=!0,n}function v(){var e=V.state;e.lexical.prev&&(")"==e.lexical.type&&(e.indented=e.lexical.indented),e.lexical=e.lexical.prev)}function b(e){return function(t){return t==e?d():";"==e?h():d(arguments.callee)}}function _(e){return"var"==e?d(g("vardef"),T,b(";"),v):"keyword a"==e?d(g("form"),y,_,v):"keyword b"==e?d(g("form"),_,v):"{"==e?d(g("}"),S,v):";"==e?d():"function"==e?d(A):"for"==e?d(g("form"),b("("),g(")"),z,b(")"),v,_,v):"variable"==e?d(g("stat"),L):"switch"==e?d(g("form"),y,g("}","switch"),b("{"),S,v,v):"case"==e?d(y,b(":")):"default"==e?d(b(":")):"catch"==e?d(g("form"),f,b("("),j,b(")"),_,v,m):h(g("stat"),y,b(";"),v)}function y(e){return W.hasOwnProperty(e)?d(w):"function"==e?d(A):"keyword c"==e?d(C):"("==e?d(g(")"),y,b(")"),v,w):"operator"==e?d(y):"["==e?d(g("]"),E(y,"]"),v,w):"{"==e?d(g("}"),E(M,"}"),v,w):d()}function C(e){return e.match(/[;\}\)\],]/)?h():h(y)}function w(e,t){return"operator"==e&&/\+\+|--/.test(t)?d(w):"operator"==e?d(y):";"!=e?"("==e?d(g(")"),E(y,")"),v,w):"."==e?d(x,w):"["==e?d(g("]"),y,b("]"),v,w):void 0:void 0}function L(e){return":"==e?d(v,_):h(w,b(";"),v)}function x(e){return"variable"==e?(V.marked="property",d()):void 0}function M(e){return"variable"==e&&(V.marked="property"),W.hasOwnProperty(e)?d(b(":"),y):void 0}function E(e,t){function n(i){return","==i?d(e,n):i==t?d():d(b(t))}return function(i){return i==t?d():h(e,n)}}function S(e){return"}"==e?d():h(_,S)}function T(e,t){return"variable"==e?(p(t),d(O)):d()}function O(e,t){return"="==t?d(y,O):","==e?d(T):void 0}function z(e){return"var"==e?d(T,D):";"==e?h(D):"variable"==e?d(k):h(D)}function k(e,t){return"in"==t?d(y):d(w,D)}function D(e,t){return";"==e?d(P):"in"==t?d(y):d(y,b(";"),P)}function P(e){")"!=e&&d(y)}function A(e,t){return"variable"==e?(p(t),d(A)):"("==e?d(g(")"),f,E(j,")"),v,_,m):void 0}function j(e,t){return"variable"==e?(p(t),d()):void 0}var B,I,R=e.indentUnit,N=t.json,F=function(){function e(e){return{type:e,style:"keyword"}}var t=e("keyword a"),n=e("keyword b"),i=e("keyword c"),r=e("operator"),a={type:"atom",style:"atom"};return{"if":t,"while":t,"with":t,"else":n,"do":n,"try":n,"finally":n,"return":i,"break":i,"continue":i,"new":i,"delete":i,"throw":i,"var":e("var"),"const":e("var"),let:e("var"),"function":e("function"),"catch":e("catch"),"for":e("for"),"switch":e("switch"),"case":e("case"),"default":e("default"),"in":r,"typeof":r,"instanceof":r,"true":a,"false":a,"null":a,undefined:a,NaN:a,Infinity:a}}(),q=/[+\-*&%=<>!?|]/,W={atom:!0,number:!0,variable:!0,string:!0,regexp:!0},V={state:null,column:null,marked:null,cc:null},H={name:"this",next:{name:"arguments"}};return v.lex=!0,{startState:function(e){return{tokenize:a,reAllowed:!0,kwAllowed:!0,cc:[],lexical:new l((e||0)-R,0,"block",!1),localVars:null,context:null,indented:0}},token:function(e,t){if(e.sol()&&(t.lexical.hasOwnProperty("align")||(t.lexical.align=!1),t.indented=e.indentation()),e.eatSpace())return null;var n=t.tokenize(e,t);return"comment"==B?n:(t.reAllowed="operator"==B||"keyword c"==B||B.match(/^[\[{}\(,;:]$/),t.kwAllowed="."!=B,u(t,n,B,I,e))},indent:function(e,t){if(e.tokenize!=a)return 0;var n=t&&t.charAt(0),i=e.lexical,r=i.type,o=n==r;return"vardef"==r?i.indented+4:"form"==r&&"{"==n?i.indented:"stat"==r||"form"==r?i.indented+R:"switch"!=i.info||o?i.align?i.column+(o?0:1):i.indented+(o?0:R):i.indented+(/^(?:case|default)\b/.test(t)?R:2*R)},electricChars:":{}"}}),n.defineMIME("text/javascript","javascript"),n.defineMIME("application/json",{name:"javascript",json:!0}),n.defineMode("xml",function(e,t){function n(e,t){function n(n){return t.tokenize=n,n(e,t)}var r=e.next();if("<"==r){if(e.eat("!"))return e.eat("[")?e.match("CDATA[")?n(a("atom","]]>")):null:e.match("--")?n(a("comment","-->")):e.match("DOCTYPE",!0,!0)?(e.eatWhile(/[\w\._\-]/),n(o(1))):null;if(e.eat("?"))return e.eatWhile(/[\w\._\-]/),t.tokenize=a("meta","?>"),"meta";b=e.eat("/")?"closeTag":"openTag",e.eatSpace(),v="";for(var s;s=e.eat(/[^\s\u00a0=<>\"\'\/?]/);)v+=s;return t.tokenize=i,"tag"}return"&"==r?(e.eatWhile(/[^;]/),e.eat(";"),"atom"):(e.eatWhile(/[^&<]/),null)}function i(e,t){var i=e.next();return">"==i||"/"==i&&e.eat(">")?(t.tokenize=n,b=">"==i?"endTag":"selfcloseTag","tag"):"="==i?(b="equals",null):/[\'\"]/.test(i)?(t.tokenize=r(i),t.tokenize(e,t)):(e.eatWhile(/[^\s\u00a0=<>\"\'\/?]/),"word")}function r(e){return function(t,n){for(;!t.eol();)if(t.next()==e){n.tokenize=i;break}return"string"}}function a(e,t){return function(i,r){for(;!i.eol();){if(i.match(t)){r.tokenize=n;break}i.next()}return e}}function o(e){return function(t,i){for(var r;null!=(r=t.next());){if("<"==r)return i.tokenize=o(e+1),i.tokenize(t,i);if(">"==r){if(1==e){i.tokenize=n;break}return i.tokenize=o(e-1),i.tokenize(t,i)}}return"meta"}}function s(){for(var e=arguments.length-1;e>=0;e--)_.cc.push(arguments[e])}function l(){return s.apply(null,arguments),!0}function c(e,t){var n=w.doNotIndent.hasOwnProperty(e)||_.context&&_.context.noIndent;_.context={prev:_.context,tagName:e,indent:_.indented,startOfLine:t,noIndent:n}}function u(){_.context&&(_.context=_.context.prev)}function h(e){if("openTag"==e)return _.tagName=v,l(f,d(_.startOfLine));if("closeTag"==e){var t=!1;return t=_.context?_.context.tagName!=v:!0,t&&(y="error"),l(p(t))}return l()}function d(e){return function(t){return"selfcloseTag"==t||"endTag"==t&&w.autoSelfClosers.hasOwnProperty(_.tagName.toLowerCase())?l():"endTag"==t?(c(_.tagName,e),l()):l()}}function p(e){return function(t){return e&&(y="error"),"endTag"==t?(u(),l()):(y="error",l(arguments.callee))}}function f(e){return"word"==e?(y="attribute",l(f)):"equals"==e?l(m,f):"string"==e?(y="error",l(f)):s()}function m(e){return"word"==e&&w.allowUnquoted?(y="string",l()):"string"==e?l(g):s()}function g(e){return"string"==e?l(g):s()}var v,b,_,y,C=e.indentUnit,w=t.htmlMode?{autoSelfClosers:{br:!0,img:!0,hr:!0,link:!0,input:!0,meta:!0,col:!0,frame:!0,base:!0,area:!0},doNotIndent:{pre:!0},allowUnquoted:!0}:{autoSelfClosers:{},doNotIndent:{},allowUnquoted:!1},L=t.alignCDATA;return{startState:function(){return{tokenize:n,cc:[],indented:0,startOfLine:!0,tagName:null,context:null}},token:function(e,t){if(e.sol()&&(t.startOfLine=!0,t.indented=e.indentation()),e.eatSpace())return null;y=b=v=null;var n=t.tokenize(e,t);if(t.type=b,(n||b)&&"comment"!=n)for(_=t;;){var i=t.cc.pop()||h;if(i(b||n))break}return t.startOfLine=!1,y||n},indent:function(e,t,r){var a=e.context;if(e.tokenize!=i&&e.tokenize!=n||a&&a.noIndent)return r?r.match(/^(\s*)/)[0].length:0;if(L&&/<!\[CDATA\[/.test(t))return 0;for(a&&/^<\//.test(t)&&(a=a.prev);a&&!a.startOfLine;)a=a.prev;return a?a.indent+C:0},compareStates:function(e,t){if(e.indented!=t.indented||e.tokenize!=t.tokenize)return!1;for(var n=e.context,i=t.context;;n=n.prev,i=i.prev){if(!n||!i)return n==i;if(n.tagName!=i.tagName)return!1}},electricChars:"/"}}),n.defineMIME("application/xml","xml"),n.defineMIME("text/html",{name:"xml",htmlMode:!0})}}),montageDefine("9a6eb8c","ui/repetition.reel/repetition",{dependencies:["../../core/core","../component","../../core/template","../../core/range-controller","../../core/promise","../../core/browser","collections/map","collections/set","../../core/deprecate","../../core/logger","frb/observers"],factory:function(e,t){var n=e("../../core/core").Montage,i=e("../component").Component;e("../../core/template").Template;var r=e("../../core/range-controller").RangeController,a=e("../../core/promise").Promise,o=e("../../core/browser").browser,s=e("collections/map"),l=e("collections/set"),c=e("../../core/deprecate").deprecationWarning,u=e("../../core/logger").logger("repetition").color.magenta(),h=e("frb/observers"),d=h.observeProperty,p=h.observeKey,f=t.Iteration=n.specialize({repetition:{value:null},controller:{value:null},object:{value:null},selected:{value:null},_fragment:{value:null},_childComponents:{value:null},index:{value:null},_drawnIndex:{value:null},active:{value:null},_noTransition:{value:null},_templateDocumentPart:{value:null},isDirty:{value:!1},constructor:{value:function f(){this.super(),u.isDebug&&u.debug("Iteration:%s create iteration %O",Object.hash(this),this),this.repetition=null,this.controller=null,this.object=null,this.defineBinding("selected",{"<->":"object.defined() ? repetition.contentController.selection.has(object) : selected"}),this._fragment=null,this._childComponents=null,this.index=null,this._drawnIndex=null,this.active=!1,this.defineBinding("active",{"<->":"repetition.activeIterations.has(())"}),this._noTransition=!1,this.addOwnPropertyChangeListener("active",this),this.addOwnPropertyChangeListener("selected",this),this.addOwnPropertyChangeListener("_noTransition",this),this.addPathChangeListener("index.defined() && _childComponents.defined()",this,"handleComponentModelChange"),this.cachedFirstElement=null
}},initWithRepetition:{value:function(e){return this.repetition=e,this}},recycle:{value:function(){this.index=null,this.object=null,this._noTransition=!0}},injectIntoDocument:{value:function(e){null!==this._drawnIndex?(u.isDebug&&u.debug("Iteration:%s retracting from index %s and injecting at %s",Object.hash(this),this._drawnIndex,e),this.retractFromDocument()):u.isDebug&&u.debug("Iteration:%s injecting at index %s",Object.hash(this),e);var t=this,n=this.repetition,i=n.element,r=n._boundaries,a=i.ownerDocument.createTextNode(""),o=r[e];if(r.splice(e,0,a),i.insertBefore(a,o),i.insertBefore(this._fragment,o),n._drawnIterations.splice(e,0,this),n._updateDrawnIndexes(e),n._addDirtyClassListIteration(this),!this._elementsWillBeAddedToMap){var s=this._childComponents.length,l=function(e){e.target.removeEventListener("firstDraw",l,!1),s--,s||t.forEachElement(function(e){n._iterationForElement.set(e,t)})};if(this._childComponents.length>0)for(var c=0;this._childComponents.length>c;c++){var h=this._childComponents[c];h.addEventListener("firstDraw",l,!1),h.needsDraw=!0,h._completedFirstDraw===!0&&console.error("Repetiton:%s child component %O has already drawn.",Object.hash(this),h)}else this.forEachElement(function(e){n._iterationForElement.set(e,t)});this._elementsWillBeAddedToMap=!0}}},_elementsWillBeAddedToMap:{value:!1},retractFromDocument:{value:function(){u.isDebug&&u.debug("Iteration:%s retractFromDocument drawnIndex: %s",Object.hash(this),this._drawnIndex);var e=this._drawnIndex,t=this.repetition,n=t.element,i=t._boundaries[e],r=t._boundaries[e+1];t._boundaries.splice(e,1);for(var a=this._fragment,o=i.nextSibling;o!=r;){var s=o.nextSibling;n.removeChild(o),a.appendChild(o),o=s}n.removeChild(i),this._drawnIndex=null,t._drawnIterations.splice(e,1),t._updateDrawnIndexes(e)}},handleComponentModelChange:{value:function(e){e?this._childComponents.forEach(this.repetition.addChildComponent,this.repetition):this._childComponents&&this._childComponents.forEach(this.repetition.removeChildComponent,this.repetition)}},handlePropertyChange:{value:function(){this.repetition&&(this.repetition._addDirtyClassListIteration(this),this.repetition.needsDraw=!0)}},forEachElement:{value:function(e,t){var n=this.repetition,i=this._drawnIndex;if(null!=i)for(var r=n._boundaries[i];r!==n._boundaries[i+1];r=r.nextSibling)1===r.nodeType&&e.call(t,r)}},firstElement:{get:function(){var e=this.repetition,t=this._drawnIndex;if(null!=t)for(var n=e._boundaries[t];n!==e._boundaries[t+1];n=n.nextSibling)if(1===n.nodeType)return this.cachedFirstElement=n,n}},isComponentTreeLoaded:{value:function(){return null!==this._fragment}},cachedFirstElement:{value:null}});t.Repetition=i.specialize({initWithContent:{value:function(e){return this.object=e,this}},initWithContentController:{value:function(e){return this.contentController=e,this}},content:{get:function(){return this.getPath("contentController.content")},set:function(e){this.contentController=(new r).initWithContent(e)}},contentController:{value:null},isSelectionEnabled:{value:null},selection:{value:null},selectedIterations:{value:null},selectedIndexes:{value:null},activeIterations:{value:null},iterations:{value:null},currentIteration:{value:null},objectAtCurrentIteration:{value:null},hasTemplate:{value:!1},_iterationTemplate:{value:null},clonesChildComponents:{value:!0},constructor:{value:function(){this.super(),this.contentController=null,this.organizedContent=[],this.defineBinding("organizedContent.rangeContent()",{"<-":"contentController.organizedContent"}),this.isSelectionEnabled=!1,this.defineBinding("selection",{"<->":"contentController.selection"}),this.defineBinding("selectedIterations",{"<-":"iterations.filter{selected}"}),this.defineBinding("selectedIndexes",{"<-":"selectedIterations.map{index}"}),this._iterationTemplate=null,this.addPathChangeListener(this._setupRequirements,this,"_handleSetupRequirementsChange"),this.addPathChangeListener("innerTemplate",this,"_handleInnerTemplateChange"),this.iterations=[],this._drawnIterations=[],this._freeIterations=[],this._contentForIteration=s(),this._iterationForElement=s(),this.currentIteration=null,this._templateId=null,this._iterationCreationPromise=a.resolve(),this._boundaries=[],this._dirtyClassListIterations=l(),this._requestedIterations=0,this._createdIterations=0,this._canDrawInitialContent=!1,this._initialContentDrawn=!1,this.addOwnPropertyChangeListener("isSelectionEnabled",this),this._selectionPointer=null,this.activeIterations=[]}},_setupRequirements:{value:"[!_iterationTemplate.defined(),!_newDomContent.defined(),!_shouldClearDomContentOnNextDraw,_isComponentExpanded,_ownerDocumentPart.defined()].every{}"},_handleSetupRequirementsChange:{value:function(e){e&&this._setupIterationTemplate()}},_handleInnerTemplateChange:{value:function(e){this._iterationTemplate&&this._teardownIterationTemplate(),e&&this.getPath(this._setupRequirements)&&this._setupIterationTemplate()}},cleanupDeletedComponentTree:{value:function(e){var t=this._innerTemplate;this._innerTemplate=null,t&&this._teardownIterationTemplate(),e&&this.cancelBindings()}},expandComponent:{value:function(){return this._isComponentExpanded=!0,a.resolve()}},_buildIterationTemplate:{value:function(){var e,t,i,r;return e=this.innerTemplate.clone(),t=e.getSerialization(),i=t.getSerializationObject(),r=n.getInfoForObject(this).label,this._iterationLabel=r+":iteration",i[this._iterationLabel]={},e.setObjects(i),this.innerTemplate.hasParameters()&&this._expandIterationTemplateParameters(e),window._montage_le_flag&&(e.refresher=this,this._leTagIterationTemplate(e)),e}},_rebuildIterationTemplate:{value:function(){var e,t=this._iterationTemplate,n=this.iterations;this._purgeFreeIterations();for(var i,r=0;i=n[r];r++)i.isDirty=!0;this._innerTemplate=null,e=this._buildIterationTemplate(),t.replaceContentsWithTemplate(e)}},refreshTemplate:{value:function(){this._rebuildIterationTemplate()}},_setupIterationTemplate:{value:function(){var e=this;this._iterationTemplate=this._buildIterationTemplate();for(var t,n=e.childComponents,i=n.length-1;t=n[i--];)t.detachFromParentComponent(),t.needsDraw=!1,t.cleanupDeletedComponentTree(!0);e.handleOrganizedContentRangeChange(e.organizedContent,[],0),e.organizedContent.addRangeChangeListener(e,"organizedContent"),e._canDrawInitialContent=!0,e.needsDraw=!0}},_leTagIterationTemplate:{value:function(e){var t=e.document.body;if(t.children.length>0){var n=this.ownerComponent._montage_metadata.moduleId,i=this._montage_metadata.label;this._leTagStarArgument(n,i,t)}}},_teardownIterationTemplate:{value:function(){this.organizedContent.removeRangeChangeListener(this,"organizedContent"),this.handleOrganizedContentRangeChange([],this.organizedContent,0),this._purgeFreeIterations(),this._iterationTemplate=null,this._contentForIteration.clear(),this._iterationForElement.clear(),this.currentIteration=null,this._templateId=null,this._requestedIterations=0,this._createdIterations=0,this._canDrawInitialContent=!1,this._selectionPointer=null,this.activeIterations.clear(),this._dirtyClassListIterations.clear()}},_purgeFreeIterations:{value:function(){for(var e=0;this._freeIterations.length>e;e++)for(var t=this._freeIterations[e],n=0;t._childComponents.length>n;n++){var i=t._childComponents[n];this.removeChildComponent(i),i.cleanupDeletedComponentTree(!0)}this._freeIterations.clear()}},_expandIterationTemplateParameters:{value:function(e){for(var t,n,i,r,a,o,s,l,c,u=this;e.hasParameters();){u=u.ownerComponent,t=u._ownerDocumentPart.template,r=u._ownerDocumentPart.objects,o=e.expandParameters(u),i=e.getSerialization().getExternalObjectLabels(),a=e.getInstances(),l=o.labels,n=o.labelsCollisions;for(var h,d=0;h=l[d];d++)s=n&&h in n?n[h]:h,i.indexOf(s)>=0?a[s]=r[h]:(c=t.getObjectMetadata(h),c.owner||(c.owner=r.owner),e.setObjectMetadata(s,c.require,c.label,c.owner))}}},_iterationLabel:{value:null},_iterationCreationPromise:{value:null},_createIteration:{value:function(){var e=this,t=(new this.Iteration).initWithRepetition(this);return this._iterationCreationPromise=this._iterationCreationPromise.then(function(){var n,i,r=e.element.ownerDocument;return e.currentIteration=t,n=e._iterationTemplate.getInstances(),n=Object.create(n),n[e._iterationLabel]=t,i=e._iterationTemplate.instantiateWithInstances(n,r).then(function(n){n.parentDocumentPart=e._ownerDocumentPart,t._templateDocumentPart=n,n.loadComponentTree().then(function(){u.isDebug&&u.debug("Iteration:%s component tree loaded.",Object.hash(t)),t._fragment=n.fragment,t._childComponents=n.childComponents,e.constructIteration(t)}).done(),e.currentIteration=null}),i.done(),i.then(null,function(){})}),this._requestedIterations++,t}},constructIteration:{value:function(){this._createdIterations++,this._createdIterations>=this._requestedIterations&&(this.needsDraw=!0,this._canDraw=!0)}},observeProperty:{value:function(e,t,n){return"contentAtCurrentIteration"===e||"objectAtCurrentIteration"===e?("contentAtCurrentIteration"===e?c("contentAtCurrentIteration",":iteration.object"):"objectAtCurrentIteration"===e&&c("objectAtCurrentIteration",":iteration.object"),p(this._contentForIteration,this.currentIteration,t,n)):"currentIteration"===e?(c("currentIteration",":iteration"),t(this.currentIteration)):d(this,e,t,n)}},makePropertyObservable:{value:function(e){return"currentIteration"!==e?n.makePropertyObservable.call(this,e):void 0}},_controllerIterations:{value:null},_drawnIterations:{value:null},_freeIterations:{value:null},_contentForIteration:{value:null},handleOrganizedContentRangeChange:{value:function(e,t,n){u.isDebug&&u.debug("Repetition:%s content changed +%s@%s %O -%s %O ",Object.hash(this),e?e.length:0,n,e,t?t.length:0,t);var i=this.iterations,r=this._contentForIteration;this._iterationTemplate.isDirty&&this._iterationTemplate.refresh();var a=Math.min(e.length,t.length),o=t.length-a,s=e.length-a;if(u.isDebug&&u.debug("Repetition:%s +%s -%s iterations",Object.hash(this),s,o),a>0)for(var l=0;a>l;l++,n++)i[n].object=e[l],r.set(i[n],e[l]);if(o>0){var c=i.splice(n,o);c.forEach(function(e){e.recycle()});for(var h,l=0;h=c[l];l++)h.isDirty||this._freeIterations.push(h)}if(s>0){if(u.isDebug)var d=[];for(;s>this._freeIterations.length;)this._freeIterations.push(this._createIteration()),u.isDebug&&d.push(this._freeIterations[this._freeIterations.length-1]);for(var p=Array(s),l=a,f=0;e.length>l;l++,f++){var m=this._freeIterations.pop();u.isDebug&&(d.has(m)||u.debug("Repetition:%s reusing %s",Object.hash(this),Object.hash(m)));var g=e[l];m.object=g,r.set(m,g),p[f]=m}i.swap(n,0,p)}(o>0||s>0)&&this._updateIndexes(n),this.needsDraw=!0}},_updateIndexes:{value:function(e){for(var t=this.iterations;t.length>e;e++)t[e].index=e}},_addDirtyClassListIteration:{value:function(e){e.forEachElement(function(t){var n;t&&(n=t.component)?(n.classList[e.active?"add":"remove"]("active"),n.classList[e.selected?"add":"remove"]("selected"),n.classList.remove("no-transition")):this._dirtyClassListIterations.add(e)},this)}},canDraw:{value:function(){var e=this.canDrawGate.value;return e=e&&this._requestedIterations<=this._createdIterations,e=e&&(this._initialContentDrawn||this._canDrawInitialContent)}},_boundaries:{value:null},_dirtyClassListIterations:{value:null},_requestedIterations:{value:null},_createdIterations:{value:null},_canDrawInitialContent:{value:null},_initialContentDrawn:{value:null},draw:{value:function(){this._initialContentDrawn||(this._drawInitialContent(),this._initialContentDrawn=!0);for(var e=this._drawnIterations.length-1;e>=0;e--)null===this._drawnIterations[e].index&&this._drawnIterations[e].retractFromDocument();for(var e=0;this.iterations.length>e;e++){var t=this.iterations[e];t._drawnIndex!==t.index&&t.isComponentTreeLoaded()&&t.injectIntoDocument(e)}var n=this._dirtyClassListIterations.toArray();this._dirtyClassListIterations.clear(),n.forEach(function(e){e.isComponentTreeLoaded()&&e.forEachElement(function(t){t.component||(t.classList[e.active?"add":"remove"]("active"),t.classList[e.selected?"add":"remove"]("selected"),t.classList.remove("no-transition"))},this)},this)}},_drawInitialContent:{value:function(){for(var e=this.element,t=e.childNodes.length,n=0;t>n;n++)e.removeChild(e.firstChild);var i=e.ownerDocument.createTextNode("");e.appendChild(i),this._boundaries.push(i)}},_updateDrawnIndexes:{value:function(e){for(var t=this._drawnIterations;t.length>e;e++)t[e]._drawnIndex=e}},_selectionPointer:{value:null},handleIsSelectionEnabledChange:{value:function(e){e?this._enableSelectionTracking():this._disableSelectionTracking()}},_enableSelectionTracking:{value:function(){o.android&&o.android.androidBrowser?window.Touch?this.element.addEventListener("touchstart",this,!0):this.element.addEventListener("mousedown",this,!0):(this.element.addEventListener("touchstart",this,!0),this.element.addEventListener("mousedown",this,!0))}},_disableSelectionTracking:{value:function(){o.android&&o.android.androidBrowser?window.Touch?this.element.removeEventListener("touchstart",this,!0):this.element.removeEventListener("mousedown",this,!0):(this.element.removeEventListener("touchstart",this,!0),this.element.removeEventListener("mousedown",this,!0))}},_observeSelectionPointer:{value:function(e){this._selectionPointer=e,this.eventManager.claimPointer(e,this);var t=this.element.ownerDocument;t.addEventListener("touchend",this,!1),t.addEventListener("touchcancel",this,!1),t.addEventListener("mouseup",this,!1)}},_ignoreSelectionPointer:{value:function(){this.eventManager.isPointerClaimedByComponent(this._selectionPointer,this)&&this.eventManager.forfeitPointer(this._selectionPointer,this),this._selectionPointer=null,this.activeIterations.clear();var e=this.element.ownerDocument;e.removeEventListener("touchend",this,!1),e.removeEventListener("touchcancel",this,!1),e.removeEventListener("mouseup",this,!1)}},captureMousedown:{value:function(e){if(null==this._selectionPointer){this._observeSelectionPointer("mouse");var t=this._findIterationContainingElement(e.target);t?t.active=!0:this._ignoreSelectionPointer()}}},captureTouchstart:{value:function(e){if(null==this._selectionPointer){this._observeSelectionPointer(e.changedTouches[0].identifier);var t=this._findIterationContainingElement(e.target);t?t.active=!0:this._ignoreSelectionPointer()}}},handleTouchend:{value:function(e){for(var t=0;e.changedTouches.length>t&&!this._endSelectionOnTarget(e.changedTouches[t].identifier,e.target);t++);}},handleTouchcancel:{value:function(){this._ignoreSelectionPointer()}},handleMouseup:{value:function(e){this._endSelectionOnTarget("mouse",e.target)}},_endSelectionOnTarget:{value:function(e,t){if(e===this._selectionPointer){if(this.eventManager.isPointerClaimedByComponent(this._selectionPointer,this)){var n=this._findIterationContainingElement(t);n&&(n.active=!1,n.selected||(n.selected=!0))}return this._ignoreSelectionPointer(),!0}}},_findIterationContainingElement:{value:function(e){for(var t;e;){if(e===this.element)return this._iterationForElement.get(t);t=e,e=e.parentNode}}},Iteration:{value:f,serializable:!1}})}}),montageDefine("9a6eb8c","composer/translate-composer",{dependencies:["./composer","../core/event/event-manager"],factory:function(e,t){var n=e("./composer").Composer,i=e("../core/event/event-manager").defaultEventManager,r=t.TranslateComposer=n.specialize({constructor:{value:function r(){this.super()}},_NATIVE_ELEMENTS:{value:["A","IFRAME","EMBED","OBJECT","VIDEO","AUDIO","CANVAS","LABEL","INPUT","BUTTON","SELECT","TEXTAREA","KEYGEN","DETAILS","COMMAND"]},_WHEEL_POINTER:{value:"wheel",writable:!1},_externalUpdate:{value:!0},isAnimating:{value:!1},isMoving:{value:!1},stealChildrenPointer:{value:!1},stealChildrenPointerThreshold:{value:130},frame:{value:function(){this.isAnimating&&this._animationInterval(),this._externalUpdate=!1}},_pointerSpeedMultiplier:{value:1},pointerSpeedMultiplier:{get:function(){return this._pointerSpeedMultiplier},set:function(e){this._pointerSpeedMultiplier=e}},pointerStartEventPosition:{value:null},_shouldDispatchTranslate:{value:!1},_isSelfUpdate:{value:!1},_allowFloats:{value:!1},allowFloats:{get:function(){return this._allowFloats},set:function(e){this._allowFloats!==e&&(this._allowFloats=e,this.translateX=this._translateX,this.translateY=this._translateY)}},_translateX:{value:0},translateX:{get:function(){return this._translateX},set:function(e){if("vertical"===this._axis)this._translateX=this._minTranslateX||0;else{var t=isNaN(e)?0:this._allowFloats?parseFloat(e):e>>0;null!==this._minTranslateX&&this._minTranslateX>t&&(t=this._minTranslateX),null!==this._maxTranslateX&&t>this._maxTranslateX&&(t=this._maxTranslateX),this._isSelfUpdate||(this.isAnimating=!1),this._translateX=t}}},_translateY:{value:0},translateY:{get:function(){return this._translateY},set:function(e){if("horizontal"===this._axis)this._translateY=this._minTranslateY||0;else{var t=isNaN(e)?0:this._allowFloats?parseFloat(e):e>>0;null!==this._minTranslateY&&this._minTranslateY>t&&(t=this._minTranslateY),null!==this._maxTranslateY&&t>this._maxTranslateY&&(t=this._maxTranslateY),this._isSelfUpdate||(this.isAnimating=!1),this._translateY=t}}},_minTranslateX:{value:null},minTranslateX:{get:function(){return this._minTranslateX},set:function(e){null!==e&&(e=parseFloat(e)),this._minTranslateX!==e&&(null!==e&&e>this._translateX&&(this.translateX=e),this._minTranslateX=e)}},_maxTranslateX:{value:null},maxTranslateX:{get:function(){return this._maxTranslateX},set:function(e){null!==e&&(e=parseFloat(e)),this._maxTranslateX!==e&&(null!==e&&this._translateX>e&&(this.translateX=e),this._maxTranslateX=e)}},_minTranslateY:{value:null},minTranslateY:{get:function(){return this._minTranslateY},set:function(e){null!==e&&(e=parseFloat(e)),this._minTranslateY!==e&&(null!==e&&e>this._translateY&&(this.translateY=e),this._minTranslateY=e)}},_maxTranslateY:{value:null},maxTranslateY:{get:function(){return this._maxTranslateY},set:function(e){null!==e&&(e=parseFloat(e)),this._maxTranslateY!==e&&(null!==e&&this._translateY>e&&(this.translateY=e),this._maxTranslateY=e)}},_axis:{value:"both"},axis:{get:function(){return this._axis},set:function(e){switch(e){case"vertical":case"horizontal":this._axis=e,this.translateX=this._translateX,this.translateY=this._translateY;break;default:this._axis="both"}}},invertAxis:{depends:["invertXAxis","invertYAxis"],get:function(){return this._invertXAxis===this._invertYAxis?this._invertXAxis:null},set:function(e){this.invertXAxis=e,this.invertYAxis=e}},_invertXAxis:{value:!1},invertXAxis:{get:function(){return this._invertXAxis},set:function(e){this._invertXAxis=!!e}},_invertYAxis:{value:!1},invertYAxis:{get:function(){return this._invertYAxis},set:function(e){this._invertYAxis=!!e}},startTranslateSpeed:{value:500},startTranslateRadius:{value:8},_hasMomentum:{value:!0},hasMomentum:{get:function(){return this._hasMomentum},set:function(e){this._hasMomentum=e?!0:!1}},__momentumDuration:{value:650},_momentumDuration:{get:function(){return this.__momentumDuration},set:function(e){this.__momentumDuration=isNaN(e)?1:e>>0,1>this.__momentumDuration&&(this.__momentumDuration=1)}},_pointerX:{value:null},_pointerY:{value:null},_touchIdentifier:{value:null},_isFirstMove:{value:!1},_start:{value:function(e,t,n,i){this.pointerStartEventPosition={pageX:e,pageY:t,target:n,timeStamp:i},this._pointerX=e,this._pointerY=t,window.Touch?(this._element.addEventListener("touchend",this,!0),this._element.addEventListener("touchcancel",this,!0),this._element.addEventListener("touchmove",this,!0),this._element.addEventListener("touchmove",this,!1)):(document.addEventListener("mouseup",this,!0),this._element.addEventListener("mousemove",this,!0)),this.isAnimating&&(this.isAnimating=!1,this._dispatchTranslateEnd()),this._isFirstMove=!0}},_observedPointer:{value:null},_shouldPreventDefault:{value:function(e){return!!e.target.tagName&&-1===r._NATIVE_ELEMENTS.indexOf(e.target.tagName)&&!e.target.isContentEditable}},handleMousedown:{value:function(e){this._observedPointer="mouse",0!==e.button||this.eventManager.componentClaimingPointer(this._observedPointer)||(this._start(e.clientX,e.clientY,e.target,e.timeStamp),this.eventManager.claimPointer(this._observedPointer,this))}},captureMousemove:{value:function(e){this.eventManager.isPointerClaimedByComponent(this._observedPointer,this)&&(e.preventDefault(),this._isFirstMove?this._firstMove():this._move(e.clientX,e.clientY))}},captureMouseup:{value:function(e){this._end(e)}},_releaseInterest:{value:function(){window.Touch?(this._element.removeEventListener("touchend",this,!0),this._element.removeEventListener("touchcancel",this,!0),this._isFirstMove&&this._element.removeEventListener("touchmove",this,!0),this._element.removeEventListener("touchmove",this,!1)):(document.removeEventListener("mouseup",this,!0),this._isFirstMove?this._element.removeEventListener("mousemove",this,!0):document.removeEventListener("mousemove",this,!0)),this.eventManager.isPointerClaimedByComponent(this._observedPointer,this)&&this.eventManager.forfeitPointer(this._observedPointer,this),this._observedPointer=null}},captureTouchstart:{value:function(e){this._shouldPreventDefault(e)&&e.preventDefault(),null!==this._observedPointer&&this.eventManager.isPointerClaimedByComponent(this._observedPointer,this)||e.targetTouches&&1===e.targetTouches.length&&(this._observedPointer=e.targetTouches[0].identifier,this._start(e.targetTouches[0].clientX,e.targetTouches[0].clientY,e.targetTouches[0].target,e.timeStamp))}},captureTouchmove:{value:function(e){var t;this.stealChildrenPointer&&this._isAxisMovement(e.targetTouches[0])&&(t=e.timeStamp-this.pointerStartEventPosition.timeStamp,this.stealChildrenPointerThreshold>t&&this.eventManager.claimPointer(this._observedPointer,this))}},handleTouchmove:{value:function(e){for(var t=0,n=e.changedTouches.length;n>t&&e.changedTouches[t].identifier!==this._observedPointer;)t++;n>t&&(this._isFirstMove&&(this.eventManager.componentClaimingPointer(this._observedPointer)||this.eventManager.claimPointer(this._observedPointer,this)),this.eventManager.isPointerClaimedByComponent(this._observedPointer,this)?(e.preventDefault(),this._isFirstMove?this._firstMove():this._move(e.changedTouches[t].clientX,e.changedTouches[t].clientY)):this._releaseInterest())}},captureTouchend:{value:function(e){for(var t=0,n=e.changedTouches.length;n>t&&e.changedTouches[t].identifier!==this._observedPointer;)t++;n>t&&this._end(e.changedTouches[t])}},captureTouchcancel:{value:function(e){for(var t=0,n=e.changedTouches.length;n>t&&e.changedTouches[t].identifier!==this._observedPointer;)t++;n>t&&this._cancel(e.changedTouches[t])}},_isAxisMovement:{value:function(e){var t,n,i,r,a,o,s,l=e.velocity,c=.7853981633974483,u=2.356194490192345,h=-2.356194490192345,d=-.7853981633974483;if("both"===this.axis)return!0;if(!l||0===l.speed||isNaN(l.speed)?(o=this.pointerStartEventPosition.pageX-e.clientX,s=this.pointerStartEventPosition.pageY-e.clientY,a=Math.atan2(s,o)):a=l.angle,"horizontal"===this.axis){if(i=c>=a&&a>=d,r=a>=u||h>=a,i||r)return!0}else if("vertical"===this.axis&&(t=d>=a&&a>=h,n=a>=c&&u>=a,t||n))return!0;return!1}},_translateEndTimeout:{value:null},captureWheel:{value:function(){this.eventManager.componentClaimingPointer(this._WHEEL_POINTER)||this.eventManager.claimPointer(this._WHEEL_POINTER,this.component)}},handleWheel:{value:function(e){var t=this;if(this.eventManager.isPointerClaimedByComponent(this._WHEEL_POINTER,this.component)){var n=this._translateY,i=e.wheelDeltaY||-e.deltaY||0;this._dispatchTranslateStart(),this.translateY=this._translateY-20*i/120,this._dispatchTranslate(),window.clearTimeout(this._translateEndTimeout),this._translateEndTimeout=window.setTimeout(function(){t._dispatchTranslateEnd()},400),n!==this._translateY&&this._shouldPreventDefault(e)&&e.preventDefault(),this.eventManager.forfeitPointer(this._WHEEL_POINTER,this.component)}}},_firstMove:{value:function(){this._isFirstMove&&(this._dispatchTranslateStart(this._translateX,this._translateY),this._isFirstMove=!1,this.isMoving=!0,window.Touch?this._element.removeEventListener("touchmove",this,!0):(document.addEventListener("mousemove",this,!0),this._element.removeEventListener("mousemove",this,!0)))}},_move:{value:function(e,t){var n;this._isSelfUpdate=!0,"vertical"!==this._axis&&(n=this._invertXAxis?this._pointerX-e:e-this._pointerX,this.translateX+=n*this._pointerSpeedMultiplier),"horizontal"!==this._axis&&(n=this._invertYAxis?this._pointerY-t:t-this._pointerY,this.translateY+=n*this._pointerSpeedMultiplier),this._isSelfUpdate=!1,this._pointerX=e,this._pointerY=t,this._shouldDispatchTranslate&&this._dispatchTranslate()}},_bezierTValue:{value:function(e,t,n,i,r){var a,o,s,l,c=1-3*i+3*t,u=3*i-6*t,h=3*t,d=.5;for(o=0;10>o;o++)l=d*d,a=3*c*l+2*u*d+h,s=1-d,d-=(3*(s*s*d*t+s*l*i)+l*d-e)/a;return l=d*d,s=1-d,3*(s*s*d*n+s*l*r)+l*d}},_dispatchTranslateStart:{value:function(e,t){var n=document.createEvent("CustomEvent");n.initCustomEvent("translateStart",!0,!0,null),n.translateX=e,n.translateY=t,n.scroll=0,n.pointer=this._observedPointer,this.dispatchEvent(n)}},_dispatchTranslateEnd:{value:function(){var e=document.createEvent("CustomEvent");e.initCustomEvent("translateEnd",!0,!0,null),e.translateX=this._translateX,e.translateY=this._translateY,e.scroll=0,this.dispatchEvent(e)}},_dispatchTranslateCancel:{value:function(){var e=document.createEvent("CustomEvent");e.initCustomEvent("translateCancel",!0,!0,null),e.translateX=this._translateX,e.translateY=this._translateY,e.scroll=0,this.dispatchEvent(e)}},_dispatchTranslate:{value:function(){var e=document.createEvent("CustomEvent");e.initCustomEvent("translate",!0,!0,null),e.translateX=this._translateX,e.translateY=this._translateY,e.scroll=0,e.pointer=this._observedPointer,this.dispatchEvent(e)}},animateBouncingX:{value:!1,enumerable:!1},startTimeBounceX:{value:!1,enumerable:!1},animateBouncingY:{value:!1,enumerable:!1},startTimeBounceY:{value:!1,enumerable:!1},animateMomentum:{value:!1,enumerable:!1},startTime:{value:null,enumerable:!1},startX:{value:null,enumerable:!1},posX:{value:null,enumerable:!1},endX:{value:null,enumerable:!1},startY:{value:null,enumerable:!1},posY:{value:null,enumerable:!1},endY:{value:null,enumerable:!1},translateStrideX:{value:null},translateStrideY:{value:null},translateStrideDuration:{value:330},_animationInterval:{value:function(){var e,t,n,i,r=Date.now(),a=!1;this.animateMomentum&&(e=r-this.startTime,this.__momentumDuration>e?(this.posX=this.startX-(this.momentumX+this.momentumX*(this.__momentumDuration-e)/this.__momentumDuration)*e/1e3/2,this.posY=this.startY-(this.momentumY+this.momentumY*(this.__momentumDuration-e)/this.__momentumDuration)*e/1e3/2,this.translateStrideX&&null===this.startStrideXTime&&(this.__momentumDuration-e<this.translateStrideDuration||Math.abs(this.posX-this.endX)<.75*this.translateStrideX)&&(this.startStrideXTime=r),this.translateStrideY&&null===this.startStrideYTime&&(this.__momentumDuration-e<this.translateStrideDuration||Math.abs(this.posY-this.endY)<.75*this.translateStrideY)&&(this.startStrideYTime=r)):this.animateMomentum=!1),t=Math.round(this.endX/this.translateStrideX),this.startStrideXTime&&r-this.startStrideXTime>0&&(r-this.startStrideXTime<this.translateStrideDuration?(e=this._bezierTValue((r-this.startStrideXTime)/this.translateStrideDuration,.275,0,.275,1),this.posX=this.posX*(1-e)+t*this.translateStrideX*e,a=!0):this.posX=t*this.translateStrideX),t=Math.round(this.endY/this.translateStrideY),this.startStrideYTime&&r-this.startStrideYTime>0&&(r-this.startStrideYTime<this.translateStrideDuration?(e=this._bezierTValue((r-this.startStrideYTime)/this.translateStrideDuration,.275,0,.275,1),this.posY=this.posY*(1-e)+t*this.translateStrideY*e,a=!0):this.posY=t*this.translateStrideY),n=this.posX,i=this.posY,this._isSelfUpdate=!0,this.translateX=n,this.translateY=i,this._shouldDispatchTranslate&&this._dispatchTranslate(),this._isSelfUpdate=!1,this.isAnimating=this.animateMomentum||a,this.isAnimating?this.needsFrame=!0:this._dispatchTranslateEnd()}},_end:{value:function(e){this.startTime=Date.now(),this.endX=this.posX=this.startX=this._translateX,this.endY=this.posY=this.startY=this._translateY,this._hasMomentum&&(e.velocity.speed>40||this.translateStrideX||this.translateStrideY)?(this.momentumX="vertical"!==this._axis?e.velocity.x*this._pointerSpeedMultiplier*(this._invertXAxis?1:-1):0,this.momentumY="horizontal"!==this._axis?e.velocity.y*this._pointerSpeedMultiplier*(this._invertYAxis?1:-1):0,this.endX=this.startX-this.momentumX*this.__momentumDuration/2e3,this.endY=this.startY-this.momentumY*this.__momentumDuration/2e3,this.startStrideXTime=null,this.startStrideYTime=null,this.animateMomentum=!0):this.animateMomentum=!1,this.animateMomentum?this._animationInterval():this._isFirstMove||(this.isMoving=!1,this._dispatchTranslateEnd()),this._releaseInterest()}},_cancel:{value:function(){this.startTime=Date.now(),this.endX=this.posX=this.startX=this._translateX,this.endY=this.posY=this.startY=this._translateY,this.animateMomentum=!1,this._isFirstMove||(this.isMoving=!1,this._dispatchTranslateCancel()),this._releaseInterest()}},surrenderPointer:{value:function(e,t){return!this.isMoving&&t.stealChildrenPointer&&t.stealChildrenPointerThreshold<=this.stealChildrenPointerThreshold}},eventManager:{get:function(){return i}},load:{value:function(){if(window.Touch)this._element.addEventListener("touchstart",this,!0),this._element.addEventListener("touchstart",this,!1);else{this._element.addEventListener("mousedown",this,!1);var e;e=void 0!==window.onwheel?"wheel":"mousewheel",this._element.addEventListener(e,this,!1),this._element.addEventListener(e,this,!0)}this.eventManager.isStoringPointerEvents=!0}},addEventListener:{value:function(e,t,i){n.addEventListener.call(this,e,t,i),"translate"===e&&(this._shouldDispatchTranslate=!0)}}});r.prototype.handleMousewheel=r.prototype.handleWheel,r.prototype.captureMousewheel=r.prototype.captureWheel}}),montageDefine("9a6eb8c","composer/press-composer",{dependencies:["../core/core","./composer","../core/event/mutable-event"],factory:function(e,t){var n=e("../core/core").Montage,i=e("./composer").Composer,r=e("../core/event/mutable-event").MutableEvent,a=t.PressComposer=i.specialize({load:{value:function(){window.Touch?this._element.addEventListener("touchstart",this,!0):this._element.addEventListener("mousedown",this,!0)}},unload:{value:function(){window.Touch?this._element.removeEventListener("touchstart",this,!0):this._element.removeEventListener("mousedown",this,!0)}},delegate:{value:null},cancelPress:{value:function(){return this._state===a.PRESSED?(this._dispatchPressCancel(),this._endInteraction(),!0):!1}},addEventListener:{value:function(e,t,n){i.addEventListener.call(this,e,t,n),"longPress"===e&&(this._shouldDispatchLongPress=!0)}},UNPRESSED:{value:0},PRESSED:{value:1},CANCELLED:{value:2},_state:{enumerable:!1,value:0},state:{get:function(){return this._state}},_shouldDispatchLongPress:{enumerable:!1,value:!1},_longPressThreshold:{enumerable:!1,value:1e3},longPressThreshold:{get:function(){return this._longPressThreshold},set:function(e){this._longPressThreshold!==e&&(this._longPressThreshold=e)}},_longPressTimeout:{enumberable:!1,value:null},_observedPointer:{enumerable:!1,value:null},_startInteraction:{enumerable:!1,value:function(e){if("enabled"in this.component&&!this.component.enabled||null!==this._observedPointer)return!1;var t;"touchstart"===e.type?(t=e.changedTouches.length,1===t&&(this._observedPointer=e.changedTouches[0].identifier),document.addEventListener("touchend",this,!1),document.addEventListener("touchcancel",this,!1)):"mousedown"===e.type&&(this._observedPointer="mouse",document.addEventListener("mouseup",this,!1),document.addEventListener("click",this,!1)),this._element.addEventListener("dragstart",this,!1),this.component.eventManager.claimPointer(this._observedPointer,this),this._dispatchPressStart(e)}},_interpretInteraction:{value:function(e){var t,n,i;if(null===this._observedPointer)return this._endInteraction(e),void 0;for(t=!this.component.eventManager.isPointerClaimedByComponent(this._observedPointer,this),n=e.target;n!==this._element&&n&&n.parentNode;)n=n.parentNode;
if(i=n===this._element,t&&"click"===e.type)return e.preventDefault(),this._endInteraction(e),void 0;if("mouseup"===e.type){if(!t&&i)return this._dispatchPress(e),this._endInteraction(e),void 0;if(!t&&!i)return this._dispatchPressCancel(e),this._endInteraction(e),void 0;this._endInteraction(e)}}},_endInteraction:{value:function(){document.removeEventListener("touchend",this),document.removeEventListener("touchcancel",this),document.removeEventListener("click",this),document.removeEventListener("mouseup",this),this.component.eventManager.isPointerClaimedByComponent(this._observedPointer,this)&&this.component.eventManager.forfeitPointer(this._observedPointer,this),this._observedPointer=null,this._state=a.UNPRESSED}},_changedTouchisObserved:{value:function(e){if(null===this._observedPointer)return!1;for(var t=0,n=e.length;n>t;t++)if(e[t].identifier===this._observedPointer)return t;return!1}},surrenderPointer:{value:function(e,t){var n=this.callDelegateMethod("surrenderPointer",e,t);return void 0!==n&&n===!1?!1:(this._dispatchPressCancel(),!0)}},captureTouchstart:{value:function(e){this._startInteraction(e)}},handleTouchend:{value:function(e){return null===this._observedPointer?(this._endInteraction(e),void 0):(this._changedTouchisObserved(e.changedTouches)!==!1&&(this.component.eventManager.isPointerClaimedByComponent(this._observedPointer,this)?this._dispatchPress(e):e.preventDefault(),this._endInteraction(e)),void 0)}},handleTouchcancel:{value:function(e){(null===this._observedPointer||this._changedTouchisObserved(e.changedTouches)!==!1)&&(this.component.eventManager.isPointerClaimedByComponent(this._observedPointer,this)&&this._dispatchPressCancel(e),this._endInteraction(e))}},captureMousedown:{value:function(e){this._startInteraction(e)}},handleClick:{value:function(e){this._interpretInteraction(e)}},handleMouseup:{value:function(e){this._interpretInteraction(e)}},handleDragstart:{value:function(e){this._dispatchPressCancel(e),this._endInteraction()}},_createPressEvent:{enumerable:!1,value:function(e,t){var n,i;return t||(t=document.createEvent("CustomEvent"),t.initCustomEvent(e,!0,!0,null)),n=new o,n.event=t,n.type=e,n.pointer=this._observedPointer,n.targetElement=t.target,t.changedTouches&&(i=this._changedTouchisObserved(t.changedTouches))!==!1&&(n.touch=t.changedTouches[i]),n}},_dispatchPressStart:{enumerable:!1,value:function(e){if(this._state=a.PRESSED,this.dispatchEvent(this._createPressEvent("pressStart",e)),this._shouldDispatchLongPress){var t=this;this._longPressTimeout=setTimeout(function(){t._dispatchLongPress()},this._longPressThreshold)}}},_dispatchPress:{enumerable:!1,value:function(e){this._shouldDispatchLongPress&&(clearTimeout(this._longPressTimeout),this._longPressTimeout=null),this.dispatchEvent(this._createPressEvent("press",e)),this._state=a.UNPRESSED}},_dispatchLongPress:{enumerable:!1,value:function(e){this._shouldDispatchLongPress&&(this.dispatchEvent(this._createPressEvent("longPress",e)),this._longPressTimeout=null)}},_dispatchPressCancel:{enumerable:!1,value:function(e){this._shouldDispatchLongPress&&(clearTimeout(this._longPressTimeout),this._longPressTimeout=null),this._state=a.CANCELLED,this.dispatchEvent(this._createPressEvent("pressCancel",e))}}}),o=function(){var e,t,i,a,o,s;for(e=r.specialize({type:{value:"press"},_event:{enumerable:!1,value:null},event:{get:function(){return this._event},set:function(e){this._event=e}},_touch:{enumerable:!1,value:null},touch:{get:function(){return this._touch},set:function(e){this._touch=e}}}),t=["altKey","ctrlKey","metaKey","shiftKey","cancelBubble","currentTarget","defaultPrevented","eventPhase","timeStamp","preventDefault","stopImmediatePropagation","stopPropagation"],i=["clientX","clientY","pageX","pageY","screenX","screenY","target"],a=function(e){return{get:function(){return this._event[e]}}},o=function(e){return{get:function(){return this._touch?this._touch[e]:this._event[e]}}},s=t.length-1;s>=0;s--)n.defineProperty(e,t[s],a(t[s]));for(s=i.length-1;s>=0;s--)n.defineProperty(e,i[s],o(i[s]));return e}()}}),montageDefine("9a6eb8c","core/range-controller",{dependencies:["./core","collections/generic-collection"],factory:function(e,t){var n=e("./core").Montage,i=e("collections/generic-collection"),r=function(e,t){var n=e.clone();n.makeObservable(),n.rangeController=t,n.contentEquals=e&&e.contentEquals||Object.is,Object.defineProperty(n,"clone",{value:function(){return n.slice()}});var i=n.splice;return Object.defineProperty(n,"splice",{configurable:!1,value:function(e,t){var n=this.rangeController.content;this.contentEquals=n&&n.contentEquals||Object.is,e=e>=0?e:this.length+e;var r=this.length,a=Math.min(t,r-e),o=[].slice.call(arguments,2);o.contentEquals=this.contentEquals;var s,l=o.filter(function(t,i){if(n&&!n.has(t))return!1;if(o.findLast(t)>i)return!1;var r=this.find(t);return 0>r||r>=e&&e+a>r},this),c=Math.max(l.length,0),u=c-a,h=Math.max(r+u,e+c);if(!this.rangeController.multiSelect&&h>1){var d=c?l[c-1]:this.one();s=[0,r,d]}else s=this.rangeController.avoidsEmptySelection&&0===h?n.has(this[0])?[1,this.length-1]:[0,this.length,n.one()]:[e,t].concat(l);return i.apply(this,s)}}),n};t.RangeController=n.specialize({constructor:{value:function(e){this.content=null,this._selection=new r([],this),this.sortPath=null,this.filterPath=null,this.visibleIndexes=null,this.reversed=!1,this.start=null,this.length=null,this.selectAddedContent=!1,this.deselectInvisibleContent=!1,this.clearSelectionOnOrderChange=!1,this.avoidsEmptySelection=!1,this.multiSelect=!1,this.organizedContent=[],this.organizedContent.addRangeChangeListener(this,"organizedContent"),this.defineBinding("_orderedContent",{"<-":"content.($filterPath.defined() ? filter{path($filterPath)} : ()).($sortPath.defined() ? sorted{path($sortPath)} : ()).($reversed ?? 0 ? reversed() : ())"}),this.defineBinding("organizedContent.rangeContent()",{"<-":"_orderedContent.($visibleIndexes.defined() ?$visibleIndexes.filter{<$_orderedContent.length}.map{$_orderedContent[()]} : ()).($start.defined() && $length.defined() ?view($start, $length) : ())"}),this.addRangeAtPathChangeListener("content",this,"handleContentRangeChange"),this.addPathChangeListener("sortPath",this,"handleOrderChange"),this.addPathChangeListener("reversed",this,"handleOrderChange"),this.addOwnPropertyChangeListener("multiSelect",this),this.iterations=[],e&&this.initWithContent(e)}},initWithContent:{value:function(e){return this.content=e,this}},sortPath:{value:null},reversed:{value:null},filterPath:{value:null},visibleIndexes:{value:null},start:{value:null},length:{value:null},selectAddedContent:{value:!1},deselectInvisibleContent:{value:!1},clearSelectionOnOrderChange:{value:!1},avoidsEmptySelection:{value:!1},multiSelect:{value:!1},_orderedContent:{value:null},organizedContent:{value:null},iterations:{value:null},_selection:{value:null},selection:{get:function(){return this._selection},set:function(e){var t=[0,this._selection.length];e&&e.toArray&&(t=t.concat(e.toArray())),this._selection.splice.apply(this._selection,t)}},select:{value:function(e){!this.multiSelect&&this.selection.length>=1&&this.selection.clear(),this.selection.add(e)}},deselect:{value:function(e){(!this.avoidsEmptySelection||this.selection.length>1)&&this.selection["delete"](e)}},clearSelection:{value:function(){(!this.avoidsEmptySelection||this.selection.length>1)&&this.selection.clear()}},add:{value:function(e){var t;return this.content||(this.content=[]),t=this.content.add(e),t&&this.handleAdd(e),t}},push:{value:function(){for(var e=this.content.push.apply(this.content,arguments),t=0;arguments.length>t;t++)this.handleAdd(arguments[t]);return e}},pop:{value:function(){return this.content.pop()}},shift:{value:function(){return this.content.shift()}},unshift:{value:function(){for(var e=this.content.unshift.apply(this.content,arguments),t=0;arguments.length>t;t++)this.handleAdd(arguments[t]);return e}},splice:{value:function(){for(var e=this.content.splice.apply(this.content,arguments),t=2;arguments.length>t;t++)this.handleAdd(arguments[t]);return e}},swap:{value:function(e,t,n){var i=this.content.swap.apply(this.content,arguments);if(n)for(var e=2;n.length>e;e++)this.handleAdd(n[e]);return i}},"delete":{value:function(e){return this.content["delete"](e)}},has:{value:function(e){return this.content?this.content.has(e):!1}},addEach:{value:i.prototype.addEach},deleteEach:{value:i.prototype.deleteEach},clear:{value:function(){this.content.clear()}},addContent:{value:function(){var e=new this.contentConstructor;return this.add(e),e}},_contentConstructor:{value:null},contentConstructor:{get:function(){return this._contentConstructor?this._contentConstructor:this.content&&this.content.contentConstructor?this.content.contentConstructor:Object},set:function(e){this._contentConstructor=e}},handleContentRangeChange:{value:function(e,t){if(this.selection.length>0){var n=this.content&&this.content.contentEquals||Object.is;t.deleteEach(e,n),this.selection&&this.selection.deleteEach(t)}}},handleSelectionRangeChange:{value:function(e,t){if(this.selection)if(this.content){for(var n=[],i=0;e.length>i;i++)this.content.has(e[i])||n.push(e[i]);if(this._selection.deleteEach(n),!this.multiSelect&&this._selection.length>1){var r=this._selection.pop();this._selection.clear(),this._selection.add(r)}this.avoidsEmptySelection&&0==this._selection.length&&this._selection.add(t[0])}else this._selection.clear()}},handleOrganizedContentRangeChange:{value:function(e,t){if(this.deselectInvisibleContent&&this.selection){var n=t.clone(1);n.deleteEach(e),this.selection.deleteEach(t)}}},handleOrderChange:{value:function(){this.clearSelectionOnOrderChange&&this.selection&&this.selection.clear()}},handleAdd:{value:function(e){this.selectAddedContent&&this.selection&&(!this.multiSelect&&this.selection.length>=1&&this.selection.clear(),this.selection.add(e))}},handleMultiSelectChange:{value:function(){if(this.selection){var e=this.selection.length;if(!this.multiSelect&&e>1){var t=this._selection.pop();this._selection.clear(),this._selection.add(t)}}}}},{blueprintModuleId:e("./core")._blueprintModuleIdDescriptor,blueprint:e("./core")._blueprintDescriptor})}}),montageDefine("478e387","ui/main.reel/main",{dependencies:["montage","montage/ui/component","montage/core/template","gist","components","examples"],factory:function(e,t){var n=e("montage").Montage,i=e("montage/ui/component").Component,r=e("montage/core/template").Template,a=e("gist").gist,o=1;t.Main=i.specialize({templateObjects:{value:{}},_componentId:{value:1},_logger:{value:null},templateDidLoad:{value:function(){var e=this.examples[0];this._logger=this.templateObjects.logger,this.addEventListener("action",this,!1),window.addEventListener("hashchange",this,!1);var t=location.hash.slice(3);t?(this.loadGist(t),this.setupGistLink(t)):(this.loadExample(e),this.executeFiddle())}},components:{value:e("components").components},examples:{value:e("examples").examples},loadGist:{value:function(e){var t=this;a.load(e,null,function(n,i,a,s){var l,c,u;return n.version!==o?(t.redirectToVersion(n.version,e),void 0):(a&&(u=new r,l=u.createHtmlDocumentWithHtml(a),c=u.getInlineObjectsString(l),a=l.body.innerHTML,c=c.replace(/\n    /g,"\n"),a=a.replace(/\n    /g,"\n").replace(/^\s*\n|\n\s*$/g,"")),t.loadFiddle(i,c,a,s),t.executeFiddle(),void 0)})}},loadFiddle:{value:function(e,t,n,i){this.templateObjects.cssCodeMirror.value=e||"",this.templateObjects.serializationCodeMirror.value=t||"",this.templateObjects.htmlCodeMirror.value=n||"",this.templateObjects.javascriptCodeMirror.value=i||""}},executeFiddle:{value:function(){var e=this.templateObjects;e.montageFrame.load(e.cssCodeMirror.value,e.serializationCodeMirror.value,e.htmlCodeMirror.value,e.javascriptCodeMirror.value)}},loadExample:{value:function(e){location.hash="",this.loadFiddle(e.css,this._stringifySerialization(e.serialization),e.html,e.javascript),this.executeFiddle()}},addComponentToFiddle:{value:function(e){var t=this._generateComponentId(e.name);e.serialization.properties.element={"#":t},this._addSerialization(t,e.serialization),this._addHtml(e.html.replace('data-montage-id=""','data-montage-id="'+t+'"')),this.executeFiddle()}},redirectToVersion:{value:function(e,t){var n;e||(e=0),n=window.location.href.slice(0,-window.location.hash.length)+"v"+e+"/#!/"+t,window.location.href=n}},clear:{value:function(){location.hash="",this.loadFiddle("","","",""),this.executeFiddle()}},_tmpDiv:{value:document.createElement("div")},_addHtml:{value:function(e){var t,i,r=this._getSerializationObject(),a=this.templateObjects.htmlCodeMirror,o=a.value,s=this._tmpDiv,l=!0;if(t=r&&n.getPath.call(r,"owner.properties.element['#']"))if(a.hasModeErrors())this._logger.log("Add component warning: The HTML code seems to be invalid, appending element at the end.");else if(s.innerHTML=o,i=s.querySelector("*[data-montage-id='"+t+"']"),i&&i.parentNode==s&&!i.nextSibling){/([\t ]*)[^\n]*\n\s*<\/[^>]+>\s*$/.exec(o);var c=RegExp.$1||"";o=o.replace(/<\/[^>]+>\s*$/,c+e+"\n$&"),l=!1}else this._logger.log("Add component warning: The owner's element is not the single root element, appending element at the end.");l&&(o+=(o?"\n":"")+e),a.value=o}},_addSerialization:{value:function(e,t){var n,i=this._getSerializationObject(),r=this.templateObjects.serializationCodeMirror.value;i?(i[e]=t,n=this._stringifySerialization(i)):(i={},i[e]=t,n=this.templateObjects.serializationCodeMirror.value+(r?"\n":"")+this._stringifySerialization(i),r&&this._logger.log("Add component warning: The serialization seems to be invalid, appending component at the end.")),this.templateObjects.serializationCodeMirror.value=n}},_serializationObject:{value:null},_lastSerialization:{value:null},_getSerializationObject:{value:function(){var e=this.templateObjects.serializationCodeMirror.value;if(e===this._lastSerialization)return this._serializationObject;this._lastSerialization=e;try{return this._serializationObject=JSON.parse(e)}catch(t){return this._serializationObject=null}}},_generateComponentId:{value:function(e){var t,n=this._getSerializationObject();if(n){do t=e+this._componentId++;while(t in n)}else t=e+this._componentId++;return t}},_htmlPageTemplate:{value:'<!DOCTYPE html>\n<html>\n<head>\n    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />\n    <title>MFiddle</title>\n    <script type="text/montage-serialization"><!-- serialization --></script></head>\n<body>\n    <!-- html -->\n</body>\n</html>'},_generateHtmlPage:{value:function(){var e=this.templateObjects,t=e.serializationCodeMirror.value,n=e.htmlCodeMirror.value;return t=t.replace(/\n/gm,"\n    "),n=n.replace(/\n/gm,"\n    "),this._htmlPageTemplate.replace("<!-- serialization -->",t).replace("<!-- html -->",n)}},handleComponentButtonAction:{value:function(e){this.addComponentToFiddle(e.target.component)}},handleSaveAction:{value:function(){a.save({anon:!0,cssCode:this.templateObjects.cssCodeMirror.value,htmlMarkup:this._generateHtmlPage(),jsCode:this.templateObjects.javascriptCodeMirror.value,settings:{version:1},callback:function(e,t){location.hash=t?"!/"+e+"/"+t:"!/"+e}})}},handleNewAction:{value:function(){this.clear()}},handleRunAction:{value:function(){this.executeFiddle()}},handleExampleButtonAction:{value:function(e){this.loadExample(e.target.example)}},handleHashchange:{value:function(){var e=location.hash.slice(3);e&&a.id!=e&&this.loadGist(e),this.setupGistLink(e)}},setupGistLink:{value:function(e){var t=this.templateObjects.gistLink,n=this.templateObjects.gistLinkCondition;n.condition=!!e,t.href="https://gist.github.com/"+e}},_stringifySerialization:{value:function(e){return JSON.stringify(e,null,4).replace(/\{\s*(\"[#@]\")\s*:\s*(\"[^\"]+\")\s*\}/g,"{$1: $2}").replace(/\{\s*(\"(?:<-|<->)\")\s*:\s*(\"[^\"]+\"\s*(?:,\s*\"converter\"\s*:\s*\{\s*\"@\"\s*:\s*\"[^\"]+\"\s*\}\s*|,\s*\"deferred\"\s*:\s*(true|false)\s*)*)\}/g,function(e,t,n){return"{"+t+": "+n.replace(/,\s*/,", ").replace(/\n\s*/,"")+"}"})}}})}}),montageDefine("bcda5b7","ui/scroll-bars.reel/scroll-bars",{dependencies:["montage/ui/component"],factory:function(e,t){var n=e("montage/ui/component").Component;t.ScrollBars=n.specialize({_verticalScroll:{value:0},_horizontalScroll:{value:0},_verticalLength:{value:0},_horizontalLength:{value:0},verticalScroll:{get:function(){return this._verticalScroll},set:function(e){this._verticalScroll=e,this.needsDraw=!0}},horizontalScroll:{get:function(){return this._horizontalScroll},set:function(e){this._horizontalScroll=e,this.needsDraw=!0}},verticalLength:{get:function(){return this._verticalLength},set:function(e){this._verticalLength=e,this.needsDraw=!0}},horizontalLength:{get:function(){return this._horizontalLength},set:function(e){this._horizontalLength=e,this.needsDraw=!0}},_opacity:{value:0},opacity:{get:function(){return this._opacity},set:function(e){this._opacity=e,this.needsDraw=!0}},_isDisplayUpdated:{value:!1},_displayVertical:{value:!1},displayVertical:{get:function(){return this._displayVertical},set:function(e){this._displayVertical!==e&&(this._displayVertical=e,this._isDisplayUpdated=!0,this.needsDraw=!0)}},_displayHorizontal:{value:!1},displayHorizontal:{get:function(){return this._displayHorizontal},set:function(e){this._displayHorizontal!==e&&(this._displayHorizontal=e,this._isDisplayUpdated=!0,this.needsDraw=!0)}},_top:{value:!1},_bottomClip:{value:!1},_bottom:{value:!1},_left:{value:!1},_rightClip:{value:!1},_right:{value:!1},_hasResizedHorizontal:{value:!1},_hasResizedVertical:{value:!1},willDraw:{value:function(){this._offsetWidth!==this._element.offsetWidth&&(this._offsetWidth=this._element.offsetWidth,this._hasResizedHorizontal=!0),this._offsetHeight!==this._element.offsetHeight&&(this._offsetHeight=this._element.offsetHeight,this._hasResizedVertical=!0)}},draw:{value:function(){var e,t,n,i;if(this._isDisplayUpdated){var r=this._displayVertical?"block":"none",a=this._displayHorizontal?"block":"none";this._top.style.display=this._bottomClip.style.display=r,this._left.style.display=this._rightClip.style.display=a,this._isDisplayUpdated=!1}if(this._hasResizedHorizontal&&this._displayHorizontal&&(this._rightClip.style.width=this._right.style.width=this._offsetWidth-4+"px",this._rightClip.style.clip="rect(-1px,"+(this._offsetWidth-3)+"px,6px,3px)",this._hasResizedHorizontal=!1),this._hasResizedVertical&&this._displayVertical&&(this._bottomClip.style.height=this._bottom.style.height=this._offsetHeight-4+"px",this._bottomClip.style.clip="rect(3px,6px,"+(this._offsetHeight-3)+"px,-1px)",this._hasResizedVertical=!1),this._opacity){if(this._displayHorizontal){n=this._offsetWidth-9-(this._displayVertical?6:0),e=Math.floor(n*this._horizontalLength),i=n-e,t=1-this._horizontalLength?Math.floor(i*this._horizontalScroll/(1-this._horizontalLength)):0,0>t&&(e+=t,0>e&&(e=0),t=0),t>i&&(e+=Math.floor(i-t),0>e&&(e=0),t=n-e);var o=e-this._offsetWidth+9+"px,0px",s=t+2+"px,0px";this._right.style.webkitTransform="translate3d("+o+",0)",this._right.style.MozTransform="translate("+o+")",this._right.style.transform="translate("+o+")",this._left.style.webkitTransform=this._rightClip.style.webkitTransform="translate3d("+s+",0)",this._left.style.MozTransform=this._rightClip.style.MozTransform="translate("+s+")",this._left.style.transform=this._rightClip.style.transform="translate("+s+")",this._left.style.webkitTransition=this._right.style.webkitTransition="none",this._left.style.MozTransition=this._right.style.MozTransition="none",this._left.style.transition=this._right.style.transition="none",this._left.style.opacity=this._right.style.opacity=this._opacity}if(this._displayVertical){n=this._offsetHeight-9-(this._displayHorizontal?6:0),e=Math.floor(n*this._verticalLength),i=n-e,t=1-this._verticalLength?Math.floor(i*this._verticalScroll/(1-this._verticalLength)):0,0>t&&(e+=t,0>e&&(e=0),t=0),t>i&&(e+=Math.floor(i-t),0>e&&(e=0),t=n-e);var l="0px,"+(e-this._offsetHeight+9)+"px",c="0px,"+(t+2)+"px";this._bottom.style.webkitTransform="translate3d("+l+",0)",this._bottom.style.MozTransform="translate("+l+")",this._bottom.style.transform="translate("+l+")",this._top.style.webkitTransform=this._bottomClip.style.webkitTransform="translate3d("+c+",0)",this._top.style.MozTransform=this._bottomClip.style.MozTransform="translate("+c+")",this._top.style.transform=this._bottomClip.style.transform="translate("+c+")",this._top.style.webkitTransition=this._bottom.style.webkitTransition="none",this._top.style.MozTransition=this._bottom.style.MozTransition="none",this._top.style.transition=this._bottom.style.transition="none",this._top.style.opacity=this._bottom.style.opacity=this._opacity}}else this._displayHorizontal&&(this._left.style.webkitTransition=this._right.style.webkitTransition="300ms opacity",this._left.style.opacity=this._right.style.opacity=0),this._displayVertical&&(this._top.style.webkitTransition=this._bottom.style.webkitTransition="300ms opacity",this._top.style.opacity=this._bottom.style.opacity=0)}}})}}),montageDefine("478e387","ui/main.reel/main.html",{text:'<!DOCTYPE html><html><head>\n    <meta http-equiv=Content-Type content="text/html;charset=utf-8">\n    <title>MFiddle</title>\n    <link rel=stylesheet href=main.css>\n    <script type=text/montage-serialization>{"owner":{"properties":{"element":{"#":"main"}}},"cssView":{"prototype":"ui/content-view.reel","properties":{"element":{"#":"css"},"title":"CSS"}},"serializationView":{"prototype":"ui/content-view.reel","properties":{"element":{"#":"serialization"},"title":"Serialization"}},"htmlView":{"prototype":"ui/content-view.reel","properties":{"element":{"#":"html"},"title":"HTML"}},"javascriptView":{"prototype":"ui/content-view.reel","properties":{"element":{"#":"javascript"},"title":"JavaScript"}},"previewView":{"prototype":"ui/content-view.reel","properties":{"element":{"#":"preview"},"title":"Preview"}},"cssCodeMirror":{"prototype":"ui/code-mirror.reel","properties":{"element":{"#":"cssCodeMirror"},"mode":"css","matchBrackets":true,"lineNumbers":true}},"serializationCodeMirror":{"prototype":"ui/code-mirror.reel","properties":{"element":{"#":"serializationCodeMirror"},"mode":"json","matchBrackets":true,"lineNumbers":true}},"htmlCodeMirror":{"prototype":"ui/code-mirror.reel","properties":{"element":{"#":"htmlCodeMirror"},"mode":"htmlmixed","lineNumbers":true}},"javascriptCodeMirror":{"prototype":"ui/code-mirror.reel","properties":{"element":{"#":"javascriptCodeMirror"},"mode":"javascript","lineNumbers":true}},"components":{"prototype":"montage/ui/repetition.reel","properties":{"element":{"#":"components"}},"bindings":{"content":{"<-":"@owner.components"}}},"componentButton":{"prototype":"ui/component-button.reel","properties":{"element":{"#":"componentButton"}},"bindings":{"component":{"<-":"@components.objectAtCurrentIteration"}}},"gistLinkCondition":{"prototype":"montage/ui/condition.reel","properties":{"element":{"#":"gistLinkCondition"},"condition":false}},"gistLink":{"prototype":"matte/ui/anchor.reel","properties":{"element":{"#":"gist"}}},"save":{"prototype":"matte/ui/button.reel","properties":{"element":{"#":"save"}}},"new":{"prototype":"matte/ui/button.reel","properties":{"element":{"#":"new"}}},"run":{"prototype":"matte/ui/button.reel","properties":{"element":{"#":"run"}}},"examples":{"prototype":"montage/ui/repetition.reel","properties":{"element":{"#":"examples"}},"bindings":{"content":{"<-":"@owner.examples"}}},"exampleButton":{"prototype":"ui/example-button.reel","properties":{"element":{"#":"exampleButton"}},"bindings":{"example":{"<-":"@examples.objectAtCurrentIteration"}}},"montageFrame":{"prototype":"ui/montage-frame.reel","properties":{"element":{"#":"montageFrame"}}},"logger":{"prototype":"ui/logger.reel","properties":{"element":{"#":"logger"}},"bindings":{"input":{"<-":"@montageFrame.logMessages"}}}}</script>\n</head>\n<body>\n<div data-montage-id=main>\n    <div id=header>\n        <h1 id=logo>MFiddle</h1>\n        <ul id=components data-montage-id=components>\n            <li>\n                <div class=component-button-holder><div data-montage-id=componentButton></div></div>\n            </li>\n        </ul>\n        <a class=teaser-button href="http://montagejs.org/reveal/" target=_blank></a>\n        <ul id=links>\n            <li data-montage-id=gistLinkCondition class=montage-invisible><a data-montage-id=gist href="" target=_blank class=link>Gist</a></li>\n        </ul>\n        <ul id=menu>\n            <li><div class=menu-button data-montage-id=save>Save</div></li>\n            <li><div class=menu-button data-montage-id=new>New</div></li>\n            <li><div id=run class=menu-button data-montage-id=run>Run</div></li>\n            <li>\n                <div id=examples>\n                    <h2>Examples</h2>\n                    <ul data-montage-id=examples>\n                        <li class=exampleButtons>\n                            <span data-montage-id=exampleButton></span>\n                        </li>\n                    </ul>\n                </div>\n            </li>\n        </ul>\n    </div>\n    <div id=css data-montage-id=css>\n        <div data-montage-id=cssCodeMirror></div>\n    </div>\n    <div id=serialization data-montage-id=serialization>\n        <div data-montage-id=serializationCodeMirror></div>\n    </div>\n    <div id=html data-montage-id=html>\n        <div data-montage-id=htmlCodeMirror></div>\n    </div>\n    <div id=javascript data-montage-id=javascript>\n        <div data-montage-id=javascriptCodeMirror></div>\n    </div>\n    <div id=preview data-montage-id=preview>\n        <div id=iframe-wrapper>\n            <div data-montage-id=montageFrame></div>\n        </div>\n        <div id=logger data-montage-id=logger></div>\n    </div>\n</div>\n\n\n</body></html>'}),montageDefine("478e387","examples",{dependencies:["montage/ui/component"],factory:function(e,t){t.examples=[{label:"Simple component",css:"",serialization:{owner:{properties:{element:{"#":"component"}}},button:{prototype:"digit/ui/button.reel",properties:{element:{"#":"button"},label:"Click Me!"}}},html:'<div data-montage-id="component">\n	<button data-montage-id="button"></button>\n</div>',javascript:'var Component = require("montage/ui/component").Component;\n\nexports.Owner = Component.specialize({\n    templateDidLoad: {\n        value: function() {\n            console.log("templateDidLoad");\n        }\n    }\n});\n'},{label:"Simple button",css:"",serialization:{button:{prototype:"digit/ui/button.reel",properties:{element:{"#":"button"},label:"Click Me!"}}},html:'<button data-montage-id="button"></button>',javascript:""},{label:"Simple binding",css:".slider {\n    width: 50%;\n}",serialization:{slider:{prototype:"digit/ui/slider.reel",properties:{element:{"#":"slider"},value:50}},text:{prototype:"montage/ui/text.reel",properties:{element:{"#":"text"}},bindings:{value:{"<-":"@slider.value"}}}},html:'<input type="slider" data-montage-id="slider" class="slider">\n<h2 data-montage-id="text"></h2>',javascript:""},{label:"Simple listener",css:"",serialization:{owner:{properties:{element:{"#":"component"}}},button:{prototype:"digit/ui/button.reel",properties:{element:{"#":"button"},label:"Click Me!"},listeners:[{type:"action",listener:{"@":"owner"}}]}},html:'<div data-montage-id="component">\n	<button data-montage-id="button"></button>\n</div>',javascript:'var Component = require("montage/ui/component").Component;\n\nexports.Owner = Component.specialize({\n    handleButtonAction: {\n        value: function() {\n            console.log("action!");\n        }\n    }\n});\n'},{label:"Simple condition",css:"",serialization:{owner:{properties:{element:{"#":"component"}}},toggle:{prototype:"digit/ui/checkbox.reel",properties:{element:{"#":"toggle"},checked:!0}},hideBlockCondition:{prototype:"montage/ui/condition.reel",properties:{element:{"#":"block"}},bindings:{condition:{"<-":"@toggle.checked"}}}},html:'<div data-montage-id="component">\n	<label><input type="checkbox" data-montage-id="toggle">Show</label>\n    <div data-montage-id="block">\n        <h2>Hello There!</h2>\n    </div>\n</div>',javascript:'var Component = require("montage/ui/component").Component;\n\nexports.Owner = Component.specialize({\n});\n'},{label:"Two-way bindings",css:".slider2 {\n    width: 50%;\n}",serialization:{number:{prototype:"digit/ui/number-field.reel",properties:{element:{"#":"number"},value:50}},slider1:{prototype:"digit/ui/slider.reel",properties:{element:{"#":"slider1"}},bindings:{value:{"<->":"@number.value"}}},slider2:{prototype:"digit/ui/slider.reel",properties:{element:{"#":"slider2"}},bindings:{value:{"<->":"@number.value"}}}},html:'<p>\n    <input type="number" data-montage-id="number">\n    <input type="slider" data-montage-id="slider1" class="slider1">\n</p>\n<p>\n    <input type="slider" data-montage-id="slider2" class="slider2">\n</p>',javascript:""},{label:"Accessing repetition objects",css:"",serialization:{repetition:{prototype:"montage/ui/repetition.reel",properties:{content:["Mike","François","Afonso","Heather"],element:{"#":"repetition"}}},text:{prototype:"montage/ui/text.reel",properties:{element:{"#":"text"}},bindings:{value:{"<-":"@repetition:iteration.object"}}}},html:'<ul data-montage-id="repetition">\n  <li>\n    Hello there <span data-montage-id="text"></span>!\n  </li>\n</ul>',javascript:""},{label:"Listening on repeated buttons",css:"",serialization:{owner:{properties:{element:{"#":"owner"}}},repetition:{prototype:"montage/ui/repetition.reel",properties:{content:["One","Two","Three"],element:{"#":"repetition"}}},button:{prototype:"digit/ui/button.reel",properties:{element:{"#":"button"}},bindings:{label:{"<-":"@repetition:iteration.object"}},listeners:[{type:"action",listener:{"@":"owner"}}]}},html:'<div data-montage-id="owner">\n    <ul data-montage-id="repetition">\n        <button data-montage-id="button"></button>\n    </ul>\n</div>',javascript:'var Component = require("montage/ui/component").Component;\n\nexports.Owner = Component.specialize({\n    handleAction: {\n        value: function(event) {\n            console.log("action: " + event.target.element.textContent);\n        }\n    }\n});\n'}]}}),montageDefine("9da8b95","ui/button.reel/button",{dependencies:["ui/native-control","montage/composer/press-composer","montage/collections/dict"],factory:function(e,t){var n=e("ui/native-control").NativeControl,i=e("montage/composer/press-composer").PressComposer,r=e("montage/collections/dict"),a=t.Button=n.specialize({_preventFocus:{enumerable:!1,value:!1},preventFocus:{get:function(){return this._preventFocus},set:function(e){this._preventFocus=e===!0?!0:!1}},enabled:{dependencies:["disabled"],get:function(){return!this._disabled},set:function(e){this.disabled=!e}},converter:{value:null},_labelNode:{value:void 0,enumerable:!1},_label:{value:void 0,enumerable:!1},label:{get:function(){return this._label},set:function(e){if(e&&e.length>0&&this.converter)try{e=this.converter.convert(e),this.error&&(this.error=null)}catch(t){this.error=t}this._label=e,this._isInputElement&&(this._value=e),this.needsDraw=!0}},setLabelInitialValue:{value:function(e){void 0===this._label&&(this._label=e)}},holdThreshold:{get:function(){return this._pressComposer.longPressThreshold},set:function(e){this._pressComposer.longPressThreshold=e}},_pressComposer:{enumberable:!1,value:null},_active:{enumerable:!1,value:!1},active:{get:function(){return this._active},set:function(e){this._active=e,this.needsDraw=!0}},blur:{value:function(){this._element.blur()}},focus:{value:function(){this._element.focus()}},constructor:{value:function(){this.super(),this._pressComposer=new i,this._pressComposer.longPressThreshold=this.holdThreshold,this.addComposer(this._pressComposer)}},prepareForActivationEvents:{value:function(){this._pressComposer.addEventListener("pressStart",this,!1),this._pressComposer.addEventListener("press",this,!1),this._pressComposer.addEventListener("pressCancel",this,!1)}},addEventListener:{value:function(e,t,n){this.super(e,t,n),"hold"===e&&this._pressComposer.addEventListener("longPress",this,!1)}},handlePressStart:{value:function(e){this.active=!0,e.touch&&document.addEventListener("touchmove",this,!1),this._preventFocus||this._element.focus()
}},handlePress:{value:function(){this.active=!1,this._dispatchActionEvent(),document.removeEventListener("touchmove",this,!1)}},handleKeyup:{value:function(e){32===e.keyCode&&(this.active=!1,this._dispatchActionEvent())}},handleLongPress:{value:function(){this._pressComposer.cancelPress();var e=document.createEvent("CustomEvent");e.initCustomEvent("hold",!0,!0,null),this.dispatchEvent(e)}},handlePressCancel:{value:function(){this.active=!1,document.removeEventListener("touchmove",this,!1)}},handleTouchmove:{value:function(e){e.preventDefault()}},_isInputElement:{value:!1,enumerable:!1},enterDocument:{value:function(e){n.enterDocument&&n.enterDocument.apply(this,arguments),e&&(this._isInputElement="INPUT"===this.originalElement.tagName,this._isInputElement?(Object.defineProperty(this,"value",{get:function(){return this._label},set:function(e){this.label=e}}),void 0===this._label&&(this._label=this.originalElement.value)):(this.originalElement.firstChild||this.originalElement.appendChild(document.createTextNode("")),this._labelNode=this.originalElement.firstChild,this.setLabelInitialValue(this._labelNode.data),void 0===this._label&&(this._label=this._labelNode.data)),this.element.setAttribute("role","button"),this.element.addEventListener("keyup",this,!1))}},_drawLabel:{enumerable:!1,value:function(e){this._isInputElement?this._element.setAttribute("value",e):this._labelNode.data=e}},draw:{value:function(){this.super(),this._disabled?this._element.classList.add("disabled"):this._element.classList.remove("disabled"),this._active?this._element.classList.add("active"):this._element.classList.remove("active"),this._drawLabel(this.label)}},_detail:{value:null},detail:{get:function(){return null===this._detail&&(this._detail=new r),this._detail}},createActionEvent:{value:function(){var e,t=document.createEvent("CustomEvent");return e=this._detail,t.initCustomEvent("action",!0,!0,e),t}}});a.addAttributes({autofocus:{value:!1,dataType:"boolean"},disabled:{value:!1,dataType:"boolean"},form:null,formaction:null,formenctype:null,formmethod:null,formnovalidate:{dataType:"boolean"},formtarget:null,type:{value:"button"},name:null,value:null})}}),montageDefine("bcda5b7","ui/scroller.reel/scroller",{dependencies:["montage/ui/component"],factory:function(e,t){var n=e("montage/ui/component").Component;t.Scroller=n.specialize({constructor:{value:function(){this.super()}},_scrollX:{value:0},scrollX:{get:function(){return this._scrollX},set:function(e){this._scrollX!==e&&(this._scrollX=e,this.needsDraw=!0)}},_scrollY:{value:0},scrollY:{get:function(){return this._scrollY},set:function(e){this._scrollY!==e&&(this._scrollY=e,this.needsDraw=!0)}},_maxTranslateX:{value:0},_maxTranslateY:{value:0},_axis:{value:"auto"},axis:{get:function(){return this._axis},set:function(e){this._axis=e,this.needsDraw=!0}},_displayScrollbars:{value:"auto"},displayScrollbars:{get:function(){return this._displayScrollbars},set:function(e){switch(e){case"vertical":case"horizontal":case"both":case"auto":this._displayScrollbars=e;break;default:this._displayScrollbars="none"}this.needsDraw=!0}},_hasMomentum:{value:!0},hasMomentum:{get:function(){return this._hasMomentum},set:function(e){this._hasMomentum=e}},_content:{value:null},_scrollBars:{value:null},handleTranslateStart:{value:function(){this._scrollBars.opacity=.5}},handleTranslateEnd:{value:function(){this._scrollBars.opacity=0}},canDraw:{value:function(){return this.needsDraw=!0,n.canDraw.apply(this,arguments)}},willDraw:{value:function(){this._left=this._element.offsetLeft,this._top=this._element.offsetTop,this._width=this._element.offsetWidth,this._height=this._element.offsetHeight;var e=this._content.scrollWidth-this._width;this._maxTranslateX=0>e?0:e;var t=this._content.offsetHeight-this._height;this._maxTranslateY=0>t?0:t;var n=this.callDelegateMethod("didSetMaxScroll",{x:this._maxTranslateX,y:this._maxTranslateY});switch(n&&(this._maxTranslateX=n.x,this._maxTranslateY=n.y),this.scrollX=Math.min(this._scrollX,this._maxTranslateX),this.scrollY=Math.min(this._scrollY,this._maxTranslateY),this._displayScrollbars){case"horizontal":this._scrollBars.displayHorizontal=!0,this._scrollBars.displayVertical=!1;break;case"vertical":this._scrollBars.displayHorizontal=!1,this._scrollBars.displayVertical=!0;break;case"both":this._scrollBars.displayHorizontal=!0,this._scrollBars.displayVertical=!0;break;case"auto":this._scrollBars.displayHorizontal=!!this._maxTranslateX,this._scrollBars.displayVertical=!!this._maxTranslateY;break;case"none":this._scrollBars.displayHorizontal=!1,this._scrollBars.displayVertical=!1}this._scrollBars.displayHorizontal&&(this._content.scrollWidth?(this._scrollBars.horizontalLength=this._width/this._content.scrollWidth,this._scrollBars.horizontalScroll=this._scrollX/this._content.scrollWidth):(this._scrollBars.horizontalLength=1,this._scrollBars.horizontalScroll=0)),this._scrollBars.displayVertical&&(this._content.offsetHeight?(this._scrollBars.verticalLength=this._height/this._content.offsetHeight,this._scrollBars.verticalScroll=this._scrollY/this._content.offsetHeight):(this._scrollBars.verticalLength=1,this._scrollBars.verticalScroll=0))}},draw:{value:function(){var e=-this._scrollX+"px, "+-this._scrollY+"px";this._content.style.webkitTransform="translate3d("+e+", 0px)",this._content.style.MozTransform="translate("+e+")",this._content.style.transform="translate("+e+")"}}})}}),montageDefine("478e387","gist",{dependencies:[],factory:function(e,t){var n="https://api.github.com/",i="http://mfiddle.jit.su/",r=t.gist={clientId:"clientId",files:null,oauth:[function(e){r.oauth.callback=e,open("https://github.com/login/oauth/authorize?client_id="+r.clientId+"&scope=gist","popup","width=1015,height=500")},function(e){e?(window.ACCESS_TOKEN=localStorage.access_token=e,r.getUser(r.oauth.callback)):alert("Authentication error"),r.oauth.callback=null}],request:function(e){e.method=e.method||"GET",e.id=e.id||"",e.rev=e.rev||"",e.accepted=e.accepted||[];var t=e.anon||"GET"===e.method;if(!t&&!window.ACCESS_TOKEN)return r.oauth[0](function(){r.request(e)}),void 0;var a=e.path||"gists"+(e.id?"/"+e.id:"")+(e.rev?"/"+e.rev:"")+(e.gpath||""),o="GET"===e.method?i:n;this._xhr({method:e.method,url:o+a+(!e.anon&&window.ACCESS_TOKEN?"?access_token="+ACCESS_TOKEN:""),headers:e.headers,callback:function(t){var n=t.responseText?JSON.parse(t.responseText):null;n&&n.message&&-1===e.accepted.indexOf(t.status)?alert("Sorry, I got a "+t.status+" ("+n.message+")"):e.callback&&e.callback(n,t)},data:e.data?JSON.stringify(e.data):null})},_xhr:function(e){var t=new XMLHttpRequest,n=e.method||"GET",i=e.data||"";if(t.open(n,e.url+("GET"===n&&i?"?"+i:""),!0),"GET"!==n&&t.setRequestHeader("Content-type","application/x-www-form-urlencoded"),e.headers)for(var r in e.headers)t.setRequestHeader(r,e.headers[r]);return t.onreadystatechange=function(){4===t.readyState&&t.responseText&&e.callback(t)},t.send("GET"===n?null:i),t},getUser:function(e){r.request({path:"user",callback:function(t){window.user=t,e&&e(t)}})},save:function(e){e=e||{};var t=e.anon||!window.user,n=e.callback;if(!(!r.id||r.user&&window.user&&r.user.id==user.id||t))return r.fork(r.id,r.save,e.anon),void 0;var i=r.id||"",a=e.cssCode,o=e.htmlMarkup,s=e.jsCode,l=e.settings,c="title",u={};a&&(u["component.css"]={content:a}),o&&(u["component.html"]={content:o}),s&&(u["component.js"]={content:s}),u["settings.json"]={content:JSON.stringify(l)},r.request({anon:e.anon,id:t||e.forceNew?null:i,method:"POST",headers:{"Content-Type":"application/json; charset=UTF-8"},callback:function(e){e.id&&r.update(e),n&&n(e.id)},data:{description:c,"public":!0,files:u}})},fork:function(e,t){r.request({method:"POST",gpath:"/fork",id:e||r.id||null,headers:{"Content-Type":"text/plain; charset=UTF-8"},callback:function(e){e.id&&(r.update(e),t&&t())},data:{}})},load:function(e,t,n){r.request({id:e||r.id,rev:t||r.rev,callback:function(e){r.update(e);var t,i,a,o,s=this.files=e.files,l=s["component.css"],c=s["component.html"],u=s["component.js"],h=s["settings.json"];if(!l||!c||!u)for(var d in s){var p=d.slice(d.lastIndexOf("."));if(l||".css"!=p||(l=s[d]),c||".html"!=p||(c=s[d]),u||".js"!=p||(u=s[d]),l&&c&&u)break}if(l&&(t=l.content),c&&(i=c.content),u&&(a=u.content),h)try{o=JSON.parse(h.content)}catch(f){console.warn("Unknown settings: ",h),o={}}else o={};n&&n(o,t,i,a)}})},update:function(e){var t=e.id,n=e.history&&e.history[0]&&e.history[0].version||"";r.id!=t?(r.id=t,r.rev=void 0):r.rev&&r.rev!==n&&(r.rev=n),e.user&&(r.user=e.user),r.saved=!0},saved:!1};window.ACCESS_TOKEN=localStorage.access_token}}),montageDefine("478e387","ui/embed.reel/embed.html",{text:'<!DOCTYPE html><html><head>\n    <title></title>\n    <link rel=stylesheet type=text/css href=embed.css>\n    <script type=text/montage-serialization>{"owner":{"properties":{"element":{"#":"embed"}}},"anchor":{"prototype":"matte/ui/anchor.reel","properties":{"element":{"#":"anchor"},"textContent":"Edit"},"bindings":{"href":{"<-":"@owner.mfiddleUrl + \'#!/\' + @owner.fiddle.id"}}},"content":{"prototype":"ui/code-mirror.reel","properties":{"element":{"#":"content"},"lineNumbers":true,"matchBrackets":true,"mode":"json","readOnly":true},"bindings":{"mode":{"<-":"@owner.activeTab == \'html\' ? \'htmlmixed\' : (@owner.activeTab == \'serialization\' ? \'json\' : @owner.activeTab)"}}},"cssTab":{"prototype":"matte/ui/button.reel","properties":{"element":{"#":"cssTab"},"identifier":"tab","label":"CSS","type":"button"},"bindings":{"classList.has(\'mfiddle-Embed-tab--selected\')":{"<-":"@owner.activeTab == \'css\'"},"detail.get(\'tab\')":{"<-":"\'css\'"}}},"htmlTab":{"prototype":"matte/ui/button.reel","properties":{"element":{"#":"htmlTab"},"enabled":true,"identifier":"tab","label":"HTML"},"bindings":{"classList.has(\'mfiddle-Embed-tab--selected\')":{"<-":"@owner.activeTab == \'html\'"},"detail.get(\'tab\')":{"<-":"\'html\'"}}},"javascriptTab":{"prototype":"matte/ui/button.reel","properties":{"element":{"#":"javascriptTab"},"enabled":true,"identifier":"tab","label":"JavaScript"},"bindings":{"classList.has(\'mfiddle-Embed-tab--selected\')":{"<-":"@owner.activeTab == \'javascript\'"},"detail.get(\'tab\')":{"<-":"\'javascript\'"}}},"serializationTab":{"prototype":"matte/ui/button.reel","properties":{"element":{"#":"serializationTab"},"enabled":true,"identifier":"tab","label":"Serialization"},"bindings":{"classList.has(\'mfiddle-Embed-tab--selected\')":{"<-":"@owner.activeTab == \'serialization\'"},"detail.get(\'tab\')":{"<-":"\'serialization\'"}}}}</script>\n</head>\n<body>\n    <div data-montage-id=embed class=mfiddle-Embed>\n        <div class=mfiddle-Embed-tabs>\n            <span class=mfiddle-Embed-tab data-montage-id=serializationTab></span>\n            <span class=mfiddle-Embed-tab data-montage-id=htmlTab></span>\n            <span class=mfiddle-Embed-tab data-montage-id=javascriptTab></span>\n            <span class=mfiddle-Embed-tab data-montage-id=cssTab></span>\n            <a data-montage-id=anchor class=mfiddle-Embed-edit href="" target=_blank></a>\n        </div>\n        <div data-montage-id=content class=mfiddle-Embed-content></div>\n    </div>\n\n</body></html>'}),montageDefine("478e387","ui/montage-frame.reel/montage-frame",{dependencies:["montage/ui/component"],factory:function(e,t){var n=e("montage/ui/component").Component;t.MontageFrame=n.specialize({_css:{value:null},_serialization:{value:null},_html:{value:null},_javascript:{value:null},_hasNewData:{value:!1},_iframeReady:{value:!1},_iframeWindow:{value:null},_iframeDocument:{value:null},_cssElement:{value:null},_serializationElement:{value:null},_javascriptElement:{value:null},logMessages:{distinct:!0,value:[]},enterDocument:{value:function(e){var t=this;e&&window.addEventListener("message",function(e){e._event.source===t._element.contentWindow&&"ready"===e.data&&(t._iframeReady=!0,t.needsDraw=!0,t._iframeWindow=t._element.contentWindow,t._iframeDocument=t._element.contentDocument,t._cssElement=t._iframeDocument.head.querySelector("style"),t._javascriptElement=t._iframeDocument.head.querySelector("script[type='text/montage-javascript']"),t._iframeWindow.console.debug=t.debug.bind(t),t._iframeWindow.console.log=t.log.bind(t))},!1)}},debug:{value:function(e){0==e.indexOf("Syntax error")?this._iframeDocument.body.innerHTML="<pre>"+e+"</pre>":console.debug.apply(console,arguments)}},log:{value:function(){this.logMessages.push(Array.prototype.join.call(arguments," ")),console.log.apply(console,arguments)}},load:{value:function(e,t,n,i){this._css=e,this._serialization=t,this._html=n,this._javascript=i,this._hasNewData=!0,this.needsDraw=!0}},draw:{value:function(){if(this._iframeReady&&this._hasNewData){this._hasNewData=!1;var e=this._iframeDocument.head.querySelector("script[type='text/montage-serialization']");e&&e.parentNode.removeChild(e),this._serializationElement=this._iframeDocument.createElement("script"),this._serializationElement.setAttribute("type","text/montage-serialization"),this._iframeDocument.head.appendChild(this._serializationElement),this._iframeWindow.Frame.reset(),this._cssElement.textContent=this._css,this._serializationElement.textContent=this._serialization||"{}",this._javascriptElement.textContent=this._javascript,this._iframeDocument.body.innerHTML=this._html,this._iframeWindow.Frame.boot()}}}})}}),montageDefine("bcda5b7","ui/toggle-button.reel/toggle-button",{dependencies:["ui/button.reel"],factory:function(e,t){var n=e("ui/button.reel").Button;t.ToggleButton=n.specialize({hasTemplate:{value:!0},_pressed:{value:!1},pressed:{get:function(){return this._pressed},set:function(e){this._pressed=!!e,this._label=this._pressed?this._pressedLabel:this._unpressedLabel,this.needsDraw=!0}},_unpressedLabel:{value:null},unpressedLabel:{get:function(){return this._unpressedLabel},set:function(e){this._unpressedLabel=e,this._pressed||(this.label=this._unpressedLabel,this.needsDraw=!0)}},_pressedLabel:{value:null},pressedLabel:{get:function(){return this._pressedLabel},set:function(e){this._pressedLabel=e,this._pressed&&(this.label=this._pressedLabel,this.needsDraw=!0)}},_pressedClass:{value:"pressed"},pressedClass:{get:function(){return this._pressedClass},set:function(e){this._pressedClass=e,this._pressed&&(this.needsDraw=!0)}},label:{get:function(){return Object.getPropertyDescriptor(n,"label").get.call(this)},set:function(e){Object.getPropertyDescriptor(n,"label").set.call(this,e),this._pressed===!0&&this._label===this._unpressedLabel?this.pressed=!1:this._pressed===!1&&this._label===this._pressedLabel&&(this.pressed=!0)}},setLabelInitialValue:{value:function(e){null===this._label&&(this._label=e)}},enterDocument:{value:function(e){this.super(e),e&&(null===this._unpressedLabel&&null!==this._label&&(this._unpressedLabel=this._label),null===this._pressedLabel&&null!==this._label&&(this._pressedLabel=this._label))}},draw:{value:function(){this.super(),this._pressed?(this._element.classList.add(this._pressedClass),this._element.setAttribute("aria-pressed",!0)):(this._element.classList.remove(this._pressedClass),this._element.setAttribute("aria-pressed",!1))}},_dispatchActionEvent:{value:function(){this.pressed=!this._pressed,this.super()}},toggle:{value:function(){this.pressed=!this._pressed}}})}}),montageDefine("478e387","ui/code-mirror.reel/code-mirror",{dependencies:["montage/ui/component","./codemirror/codemirror-min"],factory:function(e,t){var n=e("montage/ui/component").Component,i=e("./codemirror/codemirror-min").CodeMirror;t.CodeMirror=n.specialize({_codeMirror:{value:null},tabSize:{value:4},indentUnit:{value:4},matchBrackets:{value:!1},lineNumbers:{value:!1},readOnly:{value:!1},_newValue:{value:null},_mode:{value:null},mode:{set:function(e){this._mode=e,this._codeMirror&&("json"==e?this._codeMirror.setOption("mode",{name:"javascript",json:!0}):this._codeMirror.setOption("mode",e))},get:function(){return this._mode}},enterDocument:{value:function(e){var t,n;if(e){n="json"===this.mode?{name:"javascript",json:!0}:this.mode,t=this._codeMirror=i(this._element,{mode:n,tabSize:this.tabSize,indentUnit:this.indentUnit,matchBrackets:this.matchBracket,lineNumbers:this.lineNumbers,readOnly:this.readOnly,value:this.value}),this._newValue=null;var r=this.element,a=this.ownerComponent.element.parentElement;setTimeout(function o(){getComputedStyle(r).width===getComputedStyle(a).width?setTimeout(o,50):t.refresh()},0)}}},draw:{value:function(){null!=this._newValue&&(this._codeMirror.setValue(this._newValue),this._newValue=null)}},value:{get:function(){return this._codeMirror?null!=this._newValue?this._newValue:this._codeMirror.getValue():this._newValue},set:function(e){this._newValue=e,this.needsDraw=!0}},hasModeErrors:{value:function(){return!!this._element.querySelector("*[class~='cm-error']")}}})}}),montageDefine("bcda5b7","ui/scroller.reel/scroller.html",{text:'<!DOCTYPE html><html><head>\n    <meta charset=utf-8>\n    <link rel=stylesheet href=scroller.css>\n    <script type=text/montage-serialization>{"scrollbars":{"prototype":"ui/scroll-bars.reel","properties":{"element":{"#":"scrollbars"}}},"translateComposer1":{"prototype":"montage/composer/translate-composer","properties":{"component":{"@":"owner"},"minTranslateX":0,"minTranslateY":0,"invertAxis":true,"stealChildrenPointer":true},"bindings":{"translateX":{"<->":"@owner.scrollX"},"translateY":{"<->":"@owner.scrollY"},"maxTranslateX":{"<-":"@owner._maxTranslateX"},"maxTranslateY":{"<-":"@owner._maxTranslateY"},"axis":{"<-":"@owner.axis"},"hasMomentum":{"<-":"@owner.hasMomentum"}},"listeners":[{"type":"translateStart","listener":{"@":"owner"}},{"type":"translateEnd","listener":{"@":"owner"}}]},"owner":{"prototype":"ui/scroller.reel","properties":{"_content":{"#":"content"},"element":{"#":"montage-scroller"},"_scrollBars":{"@":"scrollbars"}}}}</script>\n</head>\n<body>\n    <div data-montage-id=montage-scroller class=matte-Scroller>\n        <div data-montage-id=scrollbars></div>\n        <div data-montage-id=content class=matte-Scroller-content>\n            <div data-param=*></div>\n        </div>\n    </div>\n\n\n</body></html>'}),montageDefine("478e387","ui/logger.reel/logger",{dependencies:["montage/ui/component"],factory:function(e,t){var n=e("montage/ui/component").Component;t.Logger=n.specialize({constructor:{value:function(){this.super()}},_scroller:{value:null},_output:{value:null},input:{distinct:!0,value:[]},_isOpen:{value:!1},isOpen:{get:function(){return this._isOpen},set:function(e){this._isOpen!==e&&(this._isOpen=e,this.needsDraw=!0)}},_value:{value:""},_newMessages:{distinct:!0,value:[]},templateDidLoad:{value:function(){this.addRangeAtPathChangeListener("input",this,"handleInputChange")}},log:{value:function(e){this._newMessages.push(e),this.needsDraw=!0}},draw:{value:function(){var e=this._newMessages;if(e.length>0){this._value+=e.join("\n")+"\n",e.length=0,this._element.classList.add("Logger-hilight"),this._scroller.scrollY=Number.MAX_VALUE;var t=this;window.setTimeout(function(){t.needsDraw=!0},100)}else this._element.classList.remove("Logger-hilight");this.isOpen?(this._element.classList.add("open"),this._scroller.needsDraw=!0):(this._element.classList.remove("open"),this._scroller.scrollY=Number.MAX_VALUE),this._output.textContent=this._value}},handleInputChange:{value:function(e){for(var t,n=0;t=e[n];n++)this.log(t)}},handleClearAction:{value:function(){this._value="",this.needsDraw=!0}}})}}),montageDefine("478e387","components",{dependencies:[],factory:function(e,t){t.components=[{label:"Button",name:"button",x:0,y:-76,left:12,width:45,serialization:{prototype:"digit/ui/button.reel",properties:{label:"Button",enabled:!0}},html:'<button data-montage-id=""></button>'},{label:"Slider",name:"slider",x:-46,y:-76,width:43,left:12,serialization:{prototype:"digit/ui/slider.reel",properties:{min:0,max:100,value:50}},html:'<input type="slider" data-montage-id="">'},{label:"Checkbox",name:"checkbox",x:-89,y:-76,left:22,width:24,serialization:{prototype:"digit/ui/checkbox.reel",properties:{checked:!0}},html:'<input type="checkbox" data-montage-id="">'},{label:"TextField",name:"textField",x:-69,y:-101,left:14,serialization:{prototype:"digit/ui/text-field.reel",properties:{value:"Editable text"}},html:'<input data-montage-id="" type="text">'},{label:"Text",name:"text",x:-37,y:-50,left:12,width:44,serialization:{prototype:"montage/ui/text.reel",properties:{value:"Text"}},html:'<p data-montage-id=""></p>'},{label:"Repetition",name:"repetition",x:-29,y:-125,left:19,width:30,serialization:{prototype:"montage/ui/repetition.reel",properties:{content:[1,2,3]}},html:'<ul data-montage-id=""><li>Item</li></ul>'}]}}),montageDefine("9a6eb8c","ui/condition.reel/condition",{dependencies:["../component","../../core/logger"],factory:function(e,t){var n=e("../component").Component;e("../../core/logger").logger("condition"),t.Condition=n.specialize({hasTemplate:{value:!1},_condition:{value:!0},_contents:{value:null},constructor:{value:function(){this.super()}},condition:{set:function(e){e!==this._condition&&(this._condition=e,this.needsDraw=!0,this.isDeserializing||this._updateDomContent(e))},get:function(){return this._condition}},_updateDomContent:{value:function(e){"remove"===this.removalStrategy&&(e?this.domContent=this._contents:(this._contents=this.domContent,this.domContent=null))}},deserializedFromTemplate:{value:function(){this._condition||this._updateDomContent(this._condition)}},_removalStrategy:{value:"remove"},removalStrategy:{get:function(){return this._removalStrategy},set:function(e){var t;this._removalStrategy!==e&&("hide"!==e||this.isDeserializing||(t=this.domContent,this.domContent=this._contents,this._contents=t),this._removalStrategy=e,this.needsDraw=!0)}},draw:{value:function(){this.condition?this.element.classList.remove("montage-invisible"):this.element.classList.add("montage-invisible")}}})}}),montageDefine("478e387","ui/logger.reel/logger.html",{text:'<!DOCTYPE html><html><head>\n    <title>Logger</title>\n    <link rel=stylesheet href=logger.css>\n    <script type=text/montage-serialization>{"owner":{"properties":{"element":{"#":"logger"},"_scroller":{"@":"scroller"},"_output":{"#":"output"}},"bindings":{"isOpen":{"<-":"@toggle.pressed"}}},"toggle":{"prototype":"matte/ui/toggle-button.reel","properties":{"element":{"#":"toggle"},"pressedLabel":"▲ Console"}},"clear":{"prototype":"matte/ui/button.reel","properties":{"element":{"#":"clear"}},"listeners":[{"type":"action","listener":{"@":"owner"}}]},"scroller":{"prototype":"matte/ui/scroller.reel","properties":{"element":{"#":"scroller"},"axis":"both"}}}</script>\n</head>\n<body>\n    <div data-montage-id=logger class=Logger>\n        <div data-montage-id=scroller class=Logger-scroller>\n            <div data-montage-id=output class=Logger-output></div>\n        </div>\n        <div data-montage-id=buttons class=Logger-buttons>\n            <button data-montage-id=clear class=Logger-clear>Clear</button>\n            <button data-montage-id=toggle class=Logger-toggle>◀ Console</button>\n        </div>\n    </div>\n  \n\n\n</body></html>'}),montageDefine("478e387","ui/embed.reel/embed",{dependencies:["montage/ui/component","core/fiddle"],factory:function(e,t){var n=e("montage/ui/component").Component,i=e("core/fiddle").Fiddle;t.Embed=n.specialize({constructor:{value:function(){this.super()}},mfiddleUrl:{value:"http://montagejs.github.io/mfiddle/"},_id:{value:null},id:{set:function(e){this._id!==e&&(this._id=e,this.loadGist(e))},get:function(){return this._id}},_fiddle:{value:null},fiddle:{get:function(){return this._fiddle},set:function(e){this._fiddle=e,this._updateActiveTabContent()}},_activeTab:{value:"serialization"},activeTab:{get:function(){return this._activeTab},set:function(e){e!==this._activeTab&&(this._activeTab=e,this._updateActiveTabContent())}},templateDidLoad:{value:function(){this.addEventListener("action",this,!1)}},loadGist:{value:function(e){var t=this;i.fromId(e).then(function(e){t.fiddle=e})}},_updateActiveTabContent:{value:function(){var e,t=this._activeTab,n=this.fiddle;n&&("html"==t?e=n.html||"":"css"==t?e=n.css||"":"javascript"==t?e=n.javascript||"":"serialization"==t&&(e=n.serialization||""),this.templateObjects.content.value=e)}},handleTabAction:{value:function(e){this.activeTab=e.detail.get("tab")}}})}}),montageDefine("bcda5b7","ui/scroll-bars.reel/scroll-bars.html",{text:'<!DOCTYPE html><html><head>\n    <meta charset=utf-8>\n    <link rel=stylesheet href=scroll-bars.css>\n    <script type=text/montage-serialization>{"owner":{"properties":{"element":{"#":"matte-scroll-bars"},"_top":{"#":"top"},"_bottomClip":{"#":"bottom-clip"},"_bottom":{"#":"bottom"},"_left":{"#":"left"},"_rightClip":{"#":"right-clip"},"_right":{"#":"right"}}}}</script>\n</head>\n<body>\n    <div data-montage-id=matte-scroll-bars class=matte-ScrollBars>\n        <div data-montage-id=top class=matte-ScrollBars-top></div>\n        <div data-montage-id=bottom-clip class=matte-ScrollBars-bottomClip>\n            <div data-montage-id=bottom class=matte-ScrollBars-bottom></div>\n        </div>\n        <div data-montage-id=left class=matte-ScrollBars-left></div>\n        <div data-montage-id=right-clip class=matte-ScrollBars-rightClip>\n            <div data-montage-id=right class=matte-ScrollBars-right></div>\n        </div>\n    </div>\n\n\n</body></html>'}),montageDefine("9a6eb8c","composer/composer",{dependencies:["../core/core","../core/target"],factory:function(e,t){var n=(e("../core/core").Montage,e("../core/target").Target);t.Composer=n.specialize({_component:{value:null},component:{get:function(){return this._component},set:function(e){this._component=e}},_element:{value:null},element:{get:function(){return this._element},set:function(e){this._element=e}},lazyLoad:{value:!1},_needsFrame:{value:!1},needsFrame:{set:function(e){this._needsFrame!==e&&(this._needsFrame=e,this._component&&e&&this._component.scheduleComposer(this))},get:function(){return this._needsFrame}},frame:{value:function(){}},_resolveDefaults:{value:function(){null==this.element&&null!=this.component&&(this.element=this.component.element)}},_load:{value:function(){this.element||this._resolveDefaults(),this.load()}},load:{value:function(){}},unload:{value:function(){}},deserializedFromTemplate:{value:function(){this.component&&this.component.addComposer(this)}}})}}),montageDefine("478e387","core/fiddle",{dependencies:["montage","montage/core/template","montage/core/promise","gist"],factory:function(e,t){var n=e("montage").Montage,i=e("montage/core/template").Template,r=e("montage/core/promise").Promise,a=e("gist").gist,o=t.Fiddle=n.specialize({constructor:{value:function o(){this.super()}},id:{value:null},css:{value:null},serialization:{value:null},html:{value:null},settings:{value:null},init:{value:function(e,t,n,r){var a,o,s;return e||(e={version:1}),n&&(s=new i,a=s.createHtmlDocumentWithHtml(n),o=s.getInlineObjectsString(a),n=a.body.innerHTML,o=o.replace(/\n    /g,"\n"),n=n.replace(/\n    /g,"\n").replace(/^\s*\n|\n\s*$/g,"")),this.settings=e,this.css=t,this.serialization=o,this.html=n,this.javascript=r,this}}},{fromId:{value:function(e){var t=r.defer();return a.load(e,null,function(n,i,r,a){var s;s=(new o).init(n,i,r,a),s.id=e,t.resolve(s)}),t.promise}}})}}),montageDefine("478e387","ui/preview.reel/preview",{dependencies:["montage/ui/component","core/fiddle"],factory:function(e,t){var n=e("montage/ui/component").Component,i=e("core/fiddle").Fiddle;t.Preview=n.specialize({constructor:{value:function(){this.super()}},_id:{value:null},id:{set:function(e){e!==this._id&&(this._id=e,this.loadGist(e))},get:function(){return this._id}},_fiddle:{value:null},fiddle:{set:function(e){(!this._fiddle||e&&this._fiddle.id!==e.id)&&(this._fiddle=e,this._update())},get:function(){return this._fiddle}},templateDidLoad:{value:function(){this._update()}},_update:{value:function(){this._fiddle&&this.templateObjects&&this.templateObjects.montageFrame.load(this._fiddle.css,this._fiddle.serialization,this._fiddle.html,this._fiddle.javascript)}},loadGist:{value:function(e){var t=this;i.fromId(e).then(function(e){t.fiddle=e})}}})}}),montageDefine("9a6eb8c","ui/text.reel/text",{dependencies:["../component"],factory:function(e,t){var n=e("../component").Component;t.Text=n.specialize({constructor:{value:function(){this.super()}},hasTemplate:{value:!1},_value:{value:null},value:{get:function(){return this._value},set:function(e){this._value!==e&&(this._value=e,this.needsDraw=!0)}},converter:{value:null},defaultValue:{value:""},_valueNode:{value:null},_RANGE:{value:document.createRange()},enterDocument:{value:function(e){if(e){var t=this._RANGE;t.selectNodeContents(this.element),t.deleteContents(),this._valueNode=document.createTextNode(""),t.insertNode(this._valueNode),this.element.classList.add("montage-Text")}}},draw:{value:function(){var e=this._value,t=e||0===e?e:this.defaultValue;this.converter&&(t=this.converter.convert(t)),this._valueNode.data=t}}})}}),montageDefine("bcda5b7","package.json",{exports:{name:"matte",version:"0.2.0",repository:{type:"git",url:"https://github.com/montagejs/matte.git"},dependencies:{montage:"~0.14.0","native":"~0.2.0"},devDependencies:{"montage-testing":"~0.4.0"},exclude:["overview.html","overview","run-tests.html","test"],readmeFilename:"README.md",description:"matte ==============",bugs:{url:"https://github.com/montagejs/matte/issues"},_id:"matte@0.2.0",_from:"matte@~0.2.0",dist:{shasum:"a106a920a7d5c1642f8e5e16ad5854512741adb6"},_resolved:"https://registry.npmjs.org/matte/-/matte-0.2.0.tgz",hash:"bcda5b7",mappings:{montage:{name:"montage",hash:"9a6eb8c",location:"../montage@9a6eb8c/"},"native":{name:"native",hash:"9da8b95",location:"../native@9da8b95/"}},production:!0,useScriptInjection:!0}}),montageDefine("478e387","ui/content-view.reel/content-view.html",{text:'<!DOCTYPE html><html><head>\n    <meta http-equiv=Content-Type content="text/html; charset=utf-8">\n    <title>Content View</title>\n    <link rel=stylesheet href=content-view.css>\n    <script type=text/montage-serialization>{"owner":{"properties":{"element":{"#":"owner"}}},"text":{"prototype":"montage/ui/text.reel","properties":{"element":{"#":"title"}},"bindings":{"value":{"<-":"@owner.title"}}}}</script>\n</head>\n<body>\n    <div data-montage-id=owner class=content-view>\n        <h2 data-montage-id=title>Title</h2>\n        <div data-param=*></div>\n    </div>\n\n</body></html>'}),montageDefine("478e387","ui/component-button.reel/component-button",{dependencies:["montage/ui/component"],factory:function(e,t){var n=e("montage/ui/component").Component;t.ComponentButton=n.specialize({component:{value:null},_iconStyle:{value:null},enterDocument:{value:function(e){if(e){var t=this,n=this._element;this._iconStyle=this.templateObjects.icon.style,n.addEventListener("click",function(){t._dispatchActionEvent()},!1)}}},draw:{value:function(){var e=this._element,t=this.component;e.setAttribute("title","Add "+t.label),this._iconStyle.backgroundPosition=t.x+"px "+t.y+"px",this._iconStyle.width=t.width+"px",this._iconStyle.left=t.left+"px"}}})}}),montageDefine("9a6eb8c","core/browser",{dependencies:["montage"],factory:function(e,t){var n=e("montage").Montage,i=RegExp(/AppleWebKit\/([\d.]+)/),r=n.specialize({constructor:{value:function r(e){this.super(),this._userAgent=e,this._analyze(e)}},_analyze:{value:function(e){if(e.indexOf("Android")>-1&&e.indexOf("Mozilla/5.0")>-1&&e.indexOf("AppleWebKit")>-1){this.android={};var t=i.exec(e),n=null===t?null:parseFloat(i.exec(e)[1]);this.android.androidBrowser=null!==n&&537>n}}},_userAgent:{value:null}}),a=null;n.defineProperties(t,{browser:{get:function(){return null===a&&(a=new r(navigator.userAgent)),a}},Browser:{value:r}})}}),montageDefine("9da8b95","package.json",{exports:{name:"native",version:"0.2.0",repository:{type:"git",url:"https://github.com/montagejs/native.git"},dependencies:{montage:"~0.14.0"},devDependencies:{"montage-testing":"~0.4.0"},exclude:["overview.html","overview","run-tests.html","test"],readmeFilename:"README.md",description:"montage-native ==============",bugs:{url:"https://github.com/montagejs/native/issues"},_id:"native@0.2.0",_from:"native@~0.2.0",hash:"9da8b95",mappings:{montage:{name:"montage",hash:"9a6eb8c",location:"../montage@9a6eb8c/"}},production:!0,useScriptInjection:!0}}),montageDefine("478e387","ui/preview.reel/preview.html",{text:'<!DOCTYPE html><html><head>\n    <title></title>\n    <link rel=stylesheet type=text/css href=preview.css>\n    <script type=text/montage-serialization>{"owner":{"prototype":"ui/preview.reel","properties":{"element":{"#":"preview"}}},"montageFrame":{"prototype":"ui/montage-frame.reel","properties":{"element":{"#":"montageFrame"}}}}</script>\n</head>\n<body>\n    <div data-montage-id=preview class=Preview>\n        <div data-montage-id=montageFrame></div>\n    </div>\n\n</body></html>'}),montageDefine("478e387","ui/component-button.reel/component-button.html",{text:'<!DOCTYPE html><html><head>\n    <title></title>\n    <link rel=stylesheet type=text/css href=component-button.css>\n    <script type=text/montage-serialization>{"owner":{"properties":{"element":{"#":"owner"}}},"icon":{"value":{"#":"icon"}}}</script>\n</head>\n<body>\n    <div data-montage-id=owner class=component-button>\n        <div data-montage-id=icon class=icon></div>\n        <div class=highlighter></div>\n    </div>\n\n\n</body></html>'}),montageDefine("478e387","ui/example-button.reel/example-button",{dependencies:["montage/ui/component"],factory:function(e,t){var n=e("montage/ui/component").Component;
t.ExampleButton=n.specialize({hasTemplate:{value:!1},example:{value:!1},enterDocument:{value:function(e){if(e){var t=this,n=this._element;n.classList.add("example-button"),n.addEventListener("click",function(){t._dispatchActionEvent()},!1)}}},draw:{value:function(){this._element.textContent=this.example.label}}})}}),montageDefine("478e387","preview/ui/main.reel/main",{dependencies:["montage/ui/component"],factory:function(e,t){var n=e("montage/ui/component").Component;t.Main=n.specialize({constructor:{value:function(){this.super()}},templateDidLoad:{value:function(){window.addEventListener("hashchange",this,!1),this.loadGist()}},loadGist:{value:function(){var e=location.hash.slice(3);e&&(this.templateObjects.preview.id=e)}},handleHashchange:{value:function(){this.loadGist()}}})}}),montageDefine("478e387","embed/ui/main.reel/main",{dependencies:["montage/ui/component"],factory:function(e,t){var n=e("montage/ui/component").Component;t.Main=n.specialize({constructor:{value:function(){this.super()}},templateDidLoad:{value:function(){window.addEventListener("hashchange",this,!1),this.loadGist()}},loadGist:{value:function(){var e=location.hash.slice(3);e&&(this.templateObjects.embed.id=e)}},handleHashchange:{value:function(){this.loadGist()}}})}}),montageDefine("9da8b95","ui/native-control",{dependencies:["montage/ui/component"],factory:function(e,t){var n=e("montage/ui/component").Component,i=t.NativeControl=n.specialize({hasTemplate:{value:!1},willPrepareForDraw:{value:function(){}}});i.addAttributes({accesskey:null,contenteditable:null,contextmenu:null,dir:null,draggable:null,dropzone:null,hidden:{dataType:"boolean"},lang:null,spellcheck:null,style:null,tabindex:null,title:null})}}),montageDefine("478e387","preview/ui/main.reel/main.html",{text:'<!DOCTYPE html><html><head>\n    <title></title>\n    <script type=text/montage-serialization>{"owner":{"properties":{"element":{"#":"main"}}},"preview":{"prototype":"ui/preview.reel","properties":{"element":{"#":"preview"}}}}</script>\n</head>\n<body>\n    <div data-montage-id=main class=embed-Main>\n        <div data-montage-id=preview></div>\n    </div>\n\n\n</body></html>'}),montageDefine("478e387","embed/ui/main.reel/main.html",{text:'<!DOCTYPE html><html><head>\n    <title></title>\n    <script type=text/montage-serialization>{"owner":{"properties":{"element":{"#":"main"}}},"embed":{"prototype":"ui/embed.reel","properties":{"element":{"#":"embed"}}}}</script>\n</head>\n<body>\n    <div data-montage-id=main class=embed-Main>\n        <div data-montage-id=embed></div>\n    </div>\n\n\n</body></html>'}),montageDefine("478e387","ui/montage-frame.reel/montage-frame.html",{text:'<!DOCTYPE html><html><head>\n    <title></title>\n    <link rel=stylesheet type=text/css href=montage-frame.css>\n    <script type=text/montage-serialization>{"owner":{"properties":{"element":{"#":"component"}}}}</script>\n\n</head>\n<body>\n<iframe src=frame/frame.html data-montage-id=component class=montage-frame></iframe>\n\n\n</body></html>'}),montageDefine("9da8b95","ui/anchor.reel/anchor",{dependencies:["ui/native-control"],factory:function(e,t){var n=e("ui/native-control").NativeControl,i=t.Anchor=n.specialize({blur:{value:function(){this._element.blur()}},focus:{value:function(){this._element.focus()}}});i.addAttributes({textContent:null,href:null,hreflang:null,media:null,rel:null,target:null,type:null})}}),montageDefine("bcda5b7","ui/anchor.reel/anchor",{dependencies:["montage/ui/component","native/ui/anchor.reel"],factory:function(e,t){var n=(e("montage/ui/component").Component,e("native/ui/anchor.reel").Anchor);t.Anchor=n.specialize({hasTemplate:{value:!1},constructor:{value:function(){this.super(),this.classList.add("matte-Anchor")}}})}}),montageDefine("bcda5b7","ui/button.reel/button",{dependencies:["native/ui/button.reel"],factory:function(e,t){var n=e("native/ui/button.reel").Button;t.Button=n.specialize({hasTemplate:{value:!0},constructor:{value:function(){this.super(),this.classList.add("matte-Button")}}})}}),montageDefine("bcda5b7","ui/toggle-button.reel/toggle-button.html",{text:"<!DOCTYPE html><html><head>\n    <meta charset=utf-8>\n    <link rel=stylesheet href=../button.reel/button.css>\n    <link rel=stylesheet href=toggle-button.css>\n</head>\n<body>\n\n\n</body></html>"}),montageDefine("478e387","ui/code-mirror.reel/code-mirror.html",{text:"<!DOCTYPE html><html><head>\n    <title></title>\n    <link rel=stylesheet type=text/css href=codemirror/codemirror.css>\n</head>\n<body>\n\n\n</body></html>"}),montageDefine("bcda5b7","ui/button.reel/button.html",{text:"<!DOCTYPE html><html><head>\n    <meta charset=utf-8>\n    <link rel=stylesheet href=button.css>\n</head>\n<body>\n\n\n</body></html>"}),montageDefine("478e387","ui/content-view.reel/content-view",{dependencies:["montage/ui/component"],factory:function(e,t){var n=e("montage/ui/component").Component;t.ContentView=n.specialize({})}});
bundleLoaded("index.html.bundle-1-0.js")