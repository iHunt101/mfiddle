montageDefine("478e387","ui/code-mirror.reel/code-mirror",{dependencies:["montage/ui/component","./codemirror/codemirror-min"],factory:function(e,t){var n=e("montage/ui/component").Component,i=e("./codemirror/codemirror-min").CodeMirror;t.CodeMirror=n.specialize({_codeMirror:{value:null},tabSize:{value:4},indentUnit:{value:4},matchBrackets:{value:!1},lineNumbers:{value:!1},readOnly:{value:!1},_newValue:{value:null},_mode:{value:null},mode:{set:function(e){this._mode=e,this._codeMirror&&("json"==e?this._codeMirror.setOption("mode",{name:"javascript",json:!0}):this._codeMirror.setOption("mode",e))},get:function(){return this._mode}},enterDocument:{value:function(e){var t,n;if(e){n="json"===this.mode?{name:"javascript",json:!0}:this.mode,t=this._codeMirror=i(this._element,{mode:n,tabSize:this.tabSize,indentUnit:this.indentUnit,matchBrackets:this.matchBracket,lineNumbers:this.lineNumbers,readOnly:this.readOnly,value:this.value}),this._newValue=null;var o=this.element,a=this.ownerComponent.element.parentElement;setTimeout(function r(){getComputedStyle(o).width===getComputedStyle(a).width?setTimeout(r,50):t.refresh()},0)}}},draw:{value:function(){null!=this._newValue&&(this._codeMirror.setValue(this._newValue),this._newValue=null)}},value:{get:function(){return this._codeMirror?null!=this._newValue?this._newValue:this._codeMirror.getValue():this._newValue},set:function(e){this._newValue=e,this.needsDraw=!0}},hasModeErrors:{value:function(){return!!this._element.querySelector("*[class~='cm-error']")}}})}});